var j0=Object.defineProperty;var ev=(l,r,n)=>r in l?j0(l,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[r]=n;var V=(l,r,n)=>(ev(l,typeof r!="symbol"?r+"":r,n),n);import{V as De,C as pt,L as Yu,d as qu,G as Hs,B as Je,F as ye,e as ti,M as Eu,a as sn,f as ni,g as Ru,b as In,h as ri,i as $u,j as tr,U as ii,k as nr,l as Ns,c as tv,A as oi,O as nv,S as rv,m as iv,P as Zu,n as sv,W as av,o as ov,T as ui,p as Qu,q as li,r as uv,s as lv,R as Pu,t as Lu,u as Mu,v as fv,w as Qr,E as cv,x as ge,y as Fu,z as si,D as Ls,H as Du,I as dt,J as hv,K as pv,N as dv,Q as gv,X as vv,Y as mv,Z as _v,_ as wv,$ as yv,a0 as Gt,a1 as xv,a2 as Jr,a3 as Tv,a4 as Av}from"./OrbitControls-5e651079.js";import{d as Iv,r as Sv,o as Cv,c as Ou,f as Ms,F as bv,b as Ev,g as Uu,t as Rv}from"./index-208f82d6.js";var Zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};const Pv=/^[og]\s*(.+)?/,Lv=/^mtllib /,Mv=/^usemtl /,Fv=/^usemap /,Bu=/\s+/,Wu=new De,Fs=new De,ku=new De,zu=new De,Ze=new De,jr=new pt;function Dv(){const l={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(r,n){if(this.object&&this.object.fromDeclaration===!1){this.object.name=r,this.object.fromDeclaration=n!==!1;return}const a=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:r||"",fromDeclaration:n!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(s,u){const c=this._finalize(!1);c&&(c.inherited||c.groupCount<=0)&&this.materials.splice(c.index,1);const d={index:this.materials.length,name:s||"",mtllib:Array.isArray(u)&&u.length>0?u[u.length-1]:"",smooth:c!==void 0?c.smooth:this.smooth,groupStart:c!==void 0?c.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(v){const w={index:typeof v=="number"?v:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return w.clone=this.clone.bind(w),w}};return this.materials.push(d),d},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(s){const u=this.currentMaterial();if(u&&u.groupEnd===-1&&(u.groupEnd=this.geometry.vertices.length/3,u.groupCount=u.groupEnd-u.groupStart,u.inherited=!1),s&&this.materials.length>1)for(let c=this.materials.length-1;c>=0;c--)this.materials[c].groupCount<=0&&this.materials.splice(c,1);return s&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),u}},a&&a.name&&typeof a.clone=="function"){const s=a.clone(0);s.inherited=!0,this.object.materials.push(s)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(r,n){const a=parseInt(r,10);return(a>=0?a-1:a+n/3)*3},parseNormalIndex:function(r,n){const a=parseInt(r,10);return(a>=0?a-1:a+n/3)*3},parseUVIndex:function(r,n){const a=parseInt(r,10);return(a>=0?a-1:a+n/2)*2},addVertex:function(r,n,a){const s=this.vertices,u=this.object.geometry.vertices;u.push(s[r+0],s[r+1],s[r+2]),u.push(s[n+0],s[n+1],s[n+2]),u.push(s[a+0],s[a+1],s[a+2])},addVertexPoint:function(r){const n=this.vertices;this.object.geometry.vertices.push(n[r+0],n[r+1],n[r+2])},addVertexLine:function(r){const n=this.vertices;this.object.geometry.vertices.push(n[r+0],n[r+1],n[r+2])},addNormal:function(r,n,a){const s=this.normals,u=this.object.geometry.normals;u.push(s[r+0],s[r+1],s[r+2]),u.push(s[n+0],s[n+1],s[n+2]),u.push(s[a+0],s[a+1],s[a+2])},addFaceNormal:function(r,n,a){const s=this.vertices,u=this.object.geometry.normals;Wu.fromArray(s,r),Fs.fromArray(s,n),ku.fromArray(s,a),Ze.subVectors(ku,Fs),zu.subVectors(Wu,Fs),Ze.cross(zu),Ze.normalize(),u.push(Ze.x,Ze.y,Ze.z),u.push(Ze.x,Ze.y,Ze.z),u.push(Ze.x,Ze.y,Ze.z)},addColor:function(r,n,a){const s=this.colors,u=this.object.geometry.colors;s[r]!==void 0&&u.push(s[r+0],s[r+1],s[r+2]),s[n]!==void 0&&u.push(s[n+0],s[n+1],s[n+2]),s[a]!==void 0&&u.push(s[a+0],s[a+1],s[a+2])},addUV:function(r,n,a){const s=this.uvs,u=this.object.geometry.uvs;u.push(s[r+0],s[r+1]),u.push(s[n+0],s[n+1]),u.push(s[a+0],s[a+1])},addDefaultUV:function(){const r=this.object.geometry.uvs;r.push(0,0),r.push(0,0),r.push(0,0)},addUVLine:function(r){const n=this.uvs;this.object.geometry.uvs.push(n[r+0],n[r+1])},addFace:function(r,n,a,s,u,c,d,v,w){const y=this.vertices.length;let g=this.parseVertexIndex(r,y),A=this.parseVertexIndex(n,y),C=this.parseVertexIndex(a,y);if(this.addVertex(g,A,C),this.addColor(g,A,C),d!==void 0&&d!==""){const R=this.normals.length;g=this.parseNormalIndex(d,R),A=this.parseNormalIndex(v,R),C=this.parseNormalIndex(w,R),this.addNormal(g,A,C)}else this.addFaceNormal(g,A,C);if(s!==void 0&&s!==""){const R=this.uvs.length;g=this.parseUVIndex(s,R),A=this.parseUVIndex(u,R),C=this.parseUVIndex(c,R),this.addUV(g,A,C),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(r){this.object.geometry.type="Points";const n=this.vertices.length;for(let a=0,s=r.length;a<s;a++){const u=this.parseVertexIndex(r[a],n);this.addVertexPoint(u),this.addColor(u)}},addLineGeometry:function(r,n){this.object.geometry.type="Line";const a=this.vertices.length,s=this.uvs.length;for(let u=0,c=r.length;u<c;u++)this.addVertexLine(this.parseVertexIndex(r[u],a));for(let u=0,c=n.length;u<c;u++)this.addUVLine(this.parseUVIndex(n[u],s))}};return l.startObject("",!1),l}class Ov extends Yu{constructor(r){super(r),this.materials=null}load(r,n,a,s){const u=this,c=new qu(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(r,function(d){try{n(u.parse(d))}catch(v){s?s(v):console.error(v),u.manager.itemError(r)}},a,s)}setMaterials(r){return this.materials=r,this}parse(r){const n=new Dv;r.indexOf(`\r
`)!==-1&&(r=r.replace(/\r\n/g,`
`)),r.indexOf(`\\
`)!==-1&&(r=r.replace(/\\\n/g,""));const a=r.split(`
`);let s=[];for(let d=0,v=a.length;d<v;d++){const w=a[d].trimStart();if(w.length===0)continue;const y=w.charAt(0);if(y!=="#")if(y==="v"){const g=w.split(Bu);switch(g[0]){case"v":n.vertices.push(parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3])),g.length>=7?(jr.setRGB(parseFloat(g[4]),parseFloat(g[5]),parseFloat(g[6])).convertSRGBToLinear(),n.colors.push(jr.r,jr.g,jr.b)):n.colors.push(void 0,void 0,void 0);break;case"vn":n.normals.push(parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3]));break;case"vt":n.uvs.push(parseFloat(g[1]),parseFloat(g[2]));break}}else if(y==="f"){const A=w.slice(1).trim().split(Bu),C=[];for(let M=0,L=A.length;M<L;M++){const U=A[M];if(U.length>0){const H=U.split("/");C.push(H)}}const R=C[0];for(let M=1,L=C.length-1;M<L;M++){const U=C[M],H=C[M+1];n.addFace(R[0],U[0],H[0],R[1],U[1],H[1],R[2],U[2],H[2])}}else if(y==="l"){const g=w.substring(1).trim().split(" ");let A=[];const C=[];if(w.indexOf("/")===-1)A=g;else for(let R=0,M=g.length;R<M;R++){const L=g[R].split("/");L[0]!==""&&A.push(L[0]),L[1]!==""&&C.push(L[1])}n.addLineGeometry(A,C)}else if(y==="p"){const A=w.slice(1).trim().split(" ");n.addPointGeometry(A)}else if((s=Pv.exec(w))!==null){const g=(" "+s[0].slice(1).trim()).slice(1);n.startObject(g)}else if(Mv.test(w))n.object.startMaterial(w.substring(7).trim(),n.materialLibraries);else if(Lv.test(w))n.materialLibraries.push(w.substring(7).trim());else if(Fv.test(w))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(y==="s"){if(s=w.split(" "),s.length>1){const A=s[1].trim().toLowerCase();n.object.smooth=A!=="0"&&A!=="off"}else n.object.smooth=!0;const g=n.object.currentMaterial();g&&(g.smooth=n.object.smooth)}else{if(w==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+w+'"')}}n.finalize();const u=new Hs;if(u.materialLibraries=[].concat(n.materialLibraries),!(n.objects.length===1&&n.objects[0].geometry.vertices.length===0)===!0)for(let d=0,v=n.objects.length;d<v;d++){const w=n.objects[d],y=w.geometry,g=w.materials,A=y.type==="Line",C=y.type==="Points";let R=!1;if(y.vertices.length===0)continue;const M=new Je;M.setAttribute("position",new ye(y.vertices,3)),y.normals.length>0&&M.setAttribute("normal",new ye(y.normals,3)),y.colors.length>0&&(R=!0,M.setAttribute("color",new ye(y.colors,3))),y.hasUVIndices===!0&&M.setAttribute("uv",new ye(y.uvs,2));const L=[];for(let H=0,W=g.length;H<W;H++){const j=g[H],ae=j.name+"_"+j.smooth+"_"+R;let G=n.materials[ae];if(this.materials!==null){if(G=this.materials.create(j.name),A&&G&&!(G instanceof ti)){const ee=new ti;Eu.prototype.copy.call(ee,G),ee.color.copy(G.color),G=ee}else if(C&&G&&!(G instanceof sn)){const ee=new sn({size:10,sizeAttenuation:!1});Eu.prototype.copy.call(ee,G),ee.color.copy(G.color),ee.map=G.map,G=ee}}G===void 0&&(A?G=new ti:C?G=new sn({size:1,sizeAttenuation:!1}):G=new ni,G.name=j.name,G.flatShading=!j.smooth,G.vertexColors=R,n.materials[ae]=G),L.push(G)}let U;if(L.length>1){for(let H=0,W=g.length;H<W;H++){const j=g[H];M.addGroup(j.groupStart,j.groupCount,H)}A?U=new Ru(M,L):C?U=new In(M,L):U=new ri(M,L)}else A?U=new Ru(M,L[0]):C?U=new In(M,L[0]):U=new ri(M,L[0]);U.name=w.name,u.add(U)}else if(n.vertices.length>0){const d=new sn({size:1,sizeAttenuation:!1}),v=new Je;v.setAttribute("position",new ye(n.vertices,3)),n.colors.length>0&&n.colors[0]!==void 0&&(v.setAttribute("color",new ye(n.colors,3)),d.vertexColors=!0);const w=new In(v,d);u.add(w)}return u}}const Uv={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );
			gl_FragColor.a *= opacity;


		}`};class Sn{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Bv=new $u(-1,1,1,-1,0,1),Ks=new Je;Ks.setAttribute("position",new ye([-1,3,0,-1,-1,0,3,-1,0],3));Ks.setAttribute("uv",new ye([0,2,0,0,2,0],2));class Ys{constructor(r){this._mesh=new ri(Ks,r)}dispose(){this._mesh.geometry.dispose()}render(r){r.render(this._mesh,Bv)}get material(){return this._mesh.material}set material(r){this._mesh.material=r}}class Ju extends Sn{constructor(r,n){super(),this.textureID=n!==void 0?n:"tDiffuse",r instanceof tr?(this.uniforms=r.uniforms,this.material=r):r&&(this.uniforms=ii.clone(r.uniforms),this.material=new tr({defines:Object.assign({},r.defines),uniforms:this.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader})),this.fsQuad=new Ys(this.material)}render(r,n,a){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=a.texture),this.fsQuad.material=this.material,this.renderToScreen?(r.setRenderTarget(null),this.fsQuad.render(r)):(r.setRenderTarget(n),this.clear&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),this.fsQuad.render(r))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Gu extends Sn{constructor(r,n){super(),this.scene=r,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(r,n,a){const s=r.getContext(),u=r.state;u.buffers.color.setMask(!1),u.buffers.depth.setMask(!1),u.buffers.color.setLocked(!0),u.buffers.depth.setLocked(!0);let c,d;this.inverse?(c=0,d=1):(c=1,d=0),u.buffers.stencil.setTest(!0),u.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),u.buffers.stencil.setFunc(s.ALWAYS,c,4294967295),u.buffers.stencil.setClear(d),u.buffers.stencil.setLocked(!0),r.setRenderTarget(a),this.clear&&r.clear(),r.render(this.scene,this.camera),r.setRenderTarget(n),this.clear&&r.clear(),r.render(this.scene,this.camera),u.buffers.color.setLocked(!1),u.buffers.depth.setLocked(!1),u.buffers.stencil.setLocked(!1),u.buffers.stencil.setFunc(s.EQUAL,1,4294967295),u.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),u.buffers.stencil.setLocked(!0)}}class Wv extends Sn{constructor(){super(),this.needsSwap=!1}render(r){r.state.buffers.stencil.setLocked(!1),r.state.buffers.stencil.setTest(!1)}}class kv{constructor(r,n){if(this.renderer=r,n===void 0){const a=r.getSize(new nr);this._pixelRatio=r.getPixelRatio(),this._width=a.width,this._height=a.height,n=new Ns(this._width*this._pixelRatio,this._height*this._pixelRatio),n.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Ju(Uv),this.clock=new tv}swapBuffers(){const r=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=r}addPass(r){this.passes.push(r),r.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(r,n){this.passes.splice(n,0,r),r.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(r){const n=this.passes.indexOf(r);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(r){for(let n=r+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(r){r===void 0&&(r=this.clock.getDelta());const n=this.renderer.getRenderTarget();let a=!1;for(let s=0,u=this.passes.length;s<u;s++){const c=this.passes[s];if(c.enabled!==!1){if(c.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(s),c.render(this.renderer,this.writeBuffer,this.readBuffer,r,a),c.needsSwap){if(a){const d=this.renderer.getContext(),v=this.renderer.state.buffers.stencil;v.setFunc(d.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,r),v.setFunc(d.EQUAL,1,4294967295)}this.swapBuffers()}Gu!==void 0&&(c instanceof Gu?a=!0:c instanceof Wv&&(a=!1))}}this.renderer.setRenderTarget(n)}reset(r){if(r===void 0){const n=this.renderer.getSize(new nr);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,r=this.renderTarget1.clone(),r.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=r,this.renderTarget2=r.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(r,n){this._width=r,this._height=n;const a=this._width*this._pixelRatio,s=this._height*this._pixelRatio;this.renderTarget1.setSize(a,s),this.renderTarget2.setSize(a,s);for(let u=0;u<this.passes.length;u++)this.passes[u].setSize(a,s)}setPixelRatio(r){this._pixelRatio=r,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class zv extends Sn{constructor(r,n,a,s,u){super(),this.scene=r,this.camera=n,this.overrideMaterial=a,this.clearColor=s,this.clearAlpha=u!==void 0?u:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new pt}render(r,n,a){const s=r.autoClear;r.autoClear=!1;let u,c;this.overrideMaterial!==void 0&&(c=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(r.getClearColor(this._oldClearColor),u=r.getClearAlpha(),r.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&r.clearDepth(),r.setRenderTarget(this.renderToScreen?null:a),this.clear&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),r.render(this.scene,this.camera),this.clearColor&&r.setClearColor(this._oldClearColor,u),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=c),r.autoClear=s}}const Hu={defines:{KERNEL_SIZE_FLOAT:"25.0",KERNEL_SIZE_INT:"25"},uniforms:{tDiffuse:{value:null},uImageIncrement:{value:new nr(.001953125,0)},cKernel:{value:[]}},vertexShader:`

		uniform vec2 uImageIncrement;

		varying vec2 vUv;

		void main() {

			vUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float cKernel[ KERNEL_SIZE_INT ];

		uniform sampler2D tDiffuse;
		uniform vec2 uImageIncrement;

		varying vec2 vUv;

		void main() {

			vec2 imageCoord = vUv;
			vec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );

			for( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {

				sum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];
				imageCoord += uImageIncrement;

			}

			gl_FragColor = sum;

		}`,buildKernel:function(l){let n=2*Math.ceil(l*3)+1;n>25&&(n=25);const a=(n-1)*.5,s=new Array(n);let u=0;for(let c=0;c<n;++c)s[c]=Gv(c-a,l),u+=s[c];for(let c=0;c<n;++c)s[c]/=u;return s}};function Gv(l,r){return Math.exp(-(l*l)/(2*r*r))}class an extends Sn{constructor(r=1,n=25,a=4){super(),this.renderTargetX=new Ns,this.renderTargetX.texture.name="BloomPass.x",this.renderTargetY=new Ns,this.renderTargetY.texture.name="BloomPass.y",this.combineUniforms=ii.clone(Ds.uniforms),this.combineUniforms.strength.value=r,this.materialCombine=new tr({uniforms:this.combineUniforms,vertexShader:Ds.vertexShader,fragmentShader:Ds.fragmentShader,blending:oi,transparent:!0});const s=Hu;this.convolutionUniforms=ii.clone(s.uniforms),this.convolutionUniforms.uImageIncrement.value=an.blurX,this.convolutionUniforms.cKernel.value=Hu.buildKernel(a),this.materialConvolution=new tr({uniforms:this.convolutionUniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,defines:{KERNEL_SIZE_FLOAT:n.toFixed(1),KERNEL_SIZE_INT:n.toFixed(0)}}),this.needsSwap=!1,this.fsQuad=new Ys(null)}render(r,n,a,s,u){u&&r.state.buffers.stencil.setTest(!1),this.fsQuad.material=this.materialConvolution,this.convolutionUniforms.tDiffuse.value=a.texture,this.convolutionUniforms.uImageIncrement.value=an.blurX,r.setRenderTarget(this.renderTargetX),r.clear(),this.fsQuad.render(r),this.convolutionUniforms.tDiffuse.value=this.renderTargetX.texture,this.convolutionUniforms.uImageIncrement.value=an.blurY,r.setRenderTarget(this.renderTargetY),r.clear(),this.fsQuad.render(r),this.fsQuad.material=this.materialCombine,this.combineUniforms.tDiffuse.value=this.renderTargetY.texture,u&&r.state.buffers.stencil.setTest(!0),r.setRenderTarget(a),this.clear&&r.clear(),this.fsQuad.render(r)}setSize(r,n){this.renderTargetX.setSize(r,n),this.renderTargetY.setSize(r,n)}dispose(){this.renderTargetX.dispose(),this.renderTargetY.dispose(),this.materialCombine.dispose(),this.materialConvolution.dispose(),this.fsQuad.dispose()}}const Ds={uniforms:{tDiffuse:{value:null},strength:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float strength;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = strength * texel;

		}`};an.blurX=new nr(.001953125,0);an.blurY=new nr(0,.001953125);const Hv={uniforms:{tDiffuse:{value:null},time:{value:0},nIntensity:{value:.5},sIntensity:{value:.05},sCount:{value:4096},grayscale:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#include <common>

		// control parameter
		uniform float time;

		uniform bool grayscale;

		// noise effect intensity value (0 = no effect, 1 = full effect)
		uniform float nIntensity;

		// scanlines effect intensity value (0 = no effect, 1 = full effect)
		uniform float sIntensity;

		// scanlines effect count value (0 = no effect, 4096 = full effect)
		uniform float sCount;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

		// sample the source
			vec4 cTextureScreen = texture2D( tDiffuse, vUv );

		// make some noise
			float dx = rand( vUv + time );

		// add noise
			vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );

		// get us a sine and cosine
			vec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );

		// add scanlines
			cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;

		// interpolate between source and result by intensity
			cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );

		// convert to grayscale if desired
			if( grayscale ) {

				cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );

			}

			gl_FragColor =  vec4( cResult, cTextureScreen.a );

		}`};class Nv extends Sn{constructor(r,n,a,s){super();const u=Hv;this.uniforms=ii.clone(u.uniforms),this.material=new tr({uniforms:this.uniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}),s!==void 0&&(this.uniforms.grayscale.value=s),r!==void 0&&(this.uniforms.nIntensity.value=r),n!==void 0&&(this.uniforms.sIntensity.value=n),a!==void 0&&(this.uniforms.sCount.value=a),this.fsQuad=new Ys(this.material)}render(r,n,a,s){this.uniforms.tDiffuse.value=a.texture,this.uniforms.time.value+=s,this.renderToScreen?(r.setRenderTarget(null),this.fsQuad.render(r)):(r.setRenderTarget(n),this.clear&&r.clear(),this.fsQuad.render(r))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}const Xv={uniforms:{tDiffuse:{value:null},screenWidth:{value:1024},screenHeight:{value:1024},sampleDistance:{value:.94},waveFactor:{value:.00125}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float screenWidth;
		uniform float screenHeight;
		uniform float sampleDistance;
		uniform float waveFactor;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 color, org, tmp, add;
			float sample_dist, f;
			vec2 vin;
			vec2 uv = vUv;

			add = color = org = texture2D( tDiffuse, uv );

			vin = ( uv - vec2( 0.5 ) ) * vec2( 1.4 );
			sample_dist = dot( vin, vin ) * 2.0;

			f = ( waveFactor * 100.0 + sample_dist ) * sampleDistance * 4.0;

			vec2 sampleSize = vec2(  1.0 / screenWidth, 1.0 / screenHeight ) * vec2( f );

			add += tmp = texture2D( tDiffuse, uv + vec2( 0.111964, 0.993712 ) * sampleSize );
			if( tmp.b < color.b ) color = tmp;

			add += tmp = texture2D( tDiffuse, uv + vec2( 0.846724, 0.532032 ) * sampleSize );
			if( tmp.b < color.b ) color = tmp;

			add += tmp = texture2D( tDiffuse, uv + vec2( 0.943883, -0.330279 ) * sampleSize );
			if( tmp.b < color.b ) color = tmp;

			add += tmp = texture2D( tDiffuse, uv + vec2( 0.330279, -0.943883 ) * sampleSize );
			if( tmp.b < color.b ) color = tmp;

			add += tmp = texture2D( tDiffuse, uv + vec2( -0.532032, -0.846724 ) * sampleSize );
			if( tmp.b < color.b ) color = tmp;

			add += tmp = texture2D( tDiffuse, uv + vec2( -0.993712, -0.111964 ) * sampleSize );
			if( tmp.b < color.b ) color = tmp;

			add += tmp = texture2D( tDiffuse, uv + vec2( -0.707107, 0.707107 ) * sampleSize );
			if( tmp.b < color.b ) color = tmp;

			color = color * vec4( 2.0 ) - ( add / vec4( 8.0 ) );
			color = color + ( add / vec4( 8.0 ) - color ) * ( vec4( 1.0 ) - vec4( sample_dist * 0.5 ) );

			gl_FragColor = vec4( color.rgb * color.rgb * vec3( 0.95 ) + color.rgb, 1.0 );

		}`};var Jn={Linear:{None:function(l){return l}},Quadratic:{In:function(l){return l*l},Out:function(l){return l*(2-l)},InOut:function(l){return(l*=2)<1?.5*l*l:-.5*(--l*(l-2)-1)}},Cubic:{In:function(l){return l*l*l},Out:function(l){return--l*l*l+1},InOut:function(l){return(l*=2)<1?.5*l*l*l:.5*((l-=2)*l*l+2)}},Quartic:{In:function(l){return l*l*l*l},Out:function(l){return 1- --l*l*l*l},InOut:function(l){return(l*=2)<1?.5*l*l*l*l:-.5*((l-=2)*l*l*l-2)}},Quintic:{In:function(l){return l*l*l*l*l},Out:function(l){return--l*l*l*l*l+1},InOut:function(l){return(l*=2)<1?.5*l*l*l*l*l:.5*((l-=2)*l*l*l*l+2)}},Sinusoidal:{In:function(l){return 1-Math.cos(l*Math.PI/2)},Out:function(l){return Math.sin(l*Math.PI/2)},InOut:function(l){return .5*(1-Math.cos(Math.PI*l))}},Exponential:{In:function(l){return l===0?0:Math.pow(1024,l-1)},Out:function(l){return l===1?1:1-Math.pow(2,-10*l)},InOut:function(l){return l===0?0:l===1?1:(l*=2)<1?.5*Math.pow(1024,l-1):.5*(-Math.pow(2,-10*(l-1))+2)}},Circular:{In:function(l){return 1-Math.sqrt(1-l*l)},Out:function(l){return Math.sqrt(1- --l*l)},InOut:function(l){return(l*=2)<1?-.5*(Math.sqrt(1-l*l)-1):.5*(Math.sqrt(1-(l-=2)*l)+1)}},Elastic:{In:function(l){return l===0?0:l===1?1:-Math.pow(2,10*(l-1))*Math.sin((l-1.1)*5*Math.PI)},Out:function(l){return l===0?0:l===1?1:Math.pow(2,-10*l)*Math.sin((l-.1)*5*Math.PI)+1},InOut:function(l){return l===0?0:l===1?1:(l*=2,l<1?-.5*Math.pow(2,10*(l-1))*Math.sin((l-1.1)*5*Math.PI):.5*Math.pow(2,-10*(l-1))*Math.sin((l-1.1)*5*Math.PI)+1)}},Back:{In:function(l){var r=1.70158;return l*l*((r+1)*l-r)},Out:function(l){var r=1.70158;return--l*l*((r+1)*l+r)+1},InOut:function(l){var r=2.5949095;return(l*=2)<1?.5*(l*l*((r+1)*l-r)):.5*((l-=2)*l*((r+1)*l+r)+2)}},Bounce:{In:function(l){return 1-Jn.Bounce.Out(1-l)},Out:function(l){return l<1/2.75?7.5625*l*l:l<2/2.75?7.5625*(l-=1.5/2.75)*l+.75:l<2.5/2.75?7.5625*(l-=2.25/2.75)*l+.9375:7.5625*(l-=2.625/2.75)*l+.984375},InOut:function(l){return l<.5?Jn.Bounce.In(l*2)*.5:Jn.Bounce.Out(l*2-1)*.5+.5}}},Qn;typeof self>"u"&&typeof process<"u"&&process.hrtime?Qn=function(){var l=process.hrtime();return l[0]*1e3+l[1]/1e6}:typeof self<"u"&&self.performance!==void 0&&self.performance.now!==void 0?Qn=self.performance.now.bind(self.performance):Date.now!==void 0?Qn=Date.now:Qn=function(){return new Date().getTime()};var rn=Qn,ju=function(){function l(){this._tweens={},this._tweensAddedDuringUpdate={}}return l.prototype.getAll=function(){var r=this;return Object.keys(this._tweens).map(function(n){return r._tweens[n]})},l.prototype.removeAll=function(){this._tweens={}},l.prototype.add=function(r){this._tweens[r.getId()]=r,this._tweensAddedDuringUpdate[r.getId()]=r},l.prototype.remove=function(r){delete this._tweens[r.getId()],delete this._tweensAddedDuringUpdate[r.getId()]},l.prototype.update=function(r,n){r===void 0&&(r=rn()),n===void 0&&(n=!1);var a=Object.keys(this._tweens);if(a.length===0)return!1;for(;a.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<a.length;s++){var u=this._tweens[a[s]],c=!n;u&&u.update(r,c)===!1&&!n&&delete this._tweens[a[s]]}a=Object.keys(this._tweensAddedDuringUpdate)}return!0},l}(),An={Linear:function(l,r){var n=l.length-1,a=n*r,s=Math.floor(a),u=An.Utils.Linear;return r<0?u(l[0],l[1],a):r>1?u(l[n],l[n-1],n-a):u(l[s],l[s+1>n?n:s+1],a-s)},Bezier:function(l,r){for(var n=0,a=l.length-1,s=Math.pow,u=An.Utils.Bernstein,c=0;c<=a;c++)n+=s(1-r,a-c)*s(r,c)*l[c]*u(a,c);return n},CatmullRom:function(l,r){var n=l.length-1,a=n*r,s=Math.floor(a),u=An.Utils.CatmullRom;return l[0]===l[n]?(r<0&&(s=Math.floor(a=n*(1+r))),u(l[(s-1+n)%n],l[s],l[(s+1)%n],l[(s+2)%n],a-s)):r<0?l[0]-(u(l[0],l[0],l[1],l[1],-a)-l[0]):r>1?l[n]-(u(l[n],l[n],l[n-1],l[n-1],a-n)-l[n]):u(l[s?s-1:0],l[s],l[n<s+1?n:s+1],l[n<s+2?n:s+2],a-s)},Utils:{Linear:function(l,r,n){return(r-l)*n+l},Bernstein:function(l,r){var n=An.Utils.Factorial;return n(l)/n(r)/n(l-r)},Factorial:function(){var l=[1];return function(r){var n=1;if(l[r])return l[r];for(var a=r;a>1;a--)n*=a;return l[r]=n,n}}(),CatmullRom:function(l,r,n,a,s){var u=(n-l)*.5,c=(a-r)*.5,d=s*s,v=s*d;return(2*r-2*n+u+c)*v+(-3*r+3*n-2*u-c)*d+u*s+r}}},qs=function(){function l(){}return l.nextId=function(){return l._nextId++},l._nextId=0,l}(),el=new ju,Vv=function(){function l(r,n){n===void 0&&(n=el),this._object=r,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Jn.Linear.None,this._interpolationFunction=An.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=qs.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return l.prototype.getId=function(){return this._id},l.prototype.isPlaying=function(){return this._isPlaying},l.prototype.isPaused=function(){return this._isPaused},l.prototype.to=function(r,n){return this._valuesEnd=Object.create(r),n!==void 0&&(this._duration=n),this},l.prototype.duration=function(r){return this._duration=r,this},l.prototype.start=function(r){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=r!==void 0?typeof r=="string"?rn()+parseFloat(r):r:rn(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},l.prototype._setupProperties=function(r,n,a,s){for(var u in a){var c=r[u],d=Array.isArray(c),v=d?"array":typeof c,w=!d&&Array.isArray(a[u]);if(!(v==="undefined"||v==="function")){if(w){var y=a[u];if(y.length===0)continue;y=y.map(this._handleRelativeValue.bind(this,c)),a[u]=[c].concat(y)}if((v==="object"||d)&&c&&!w){n[u]=d?[]:{};for(var g in c)n[u][g]=c[g];s[u]=d?[]:{},this._setupProperties(c,n[u],a[u],s[u])}else typeof n[u]>"u"&&(n[u]=c),d||(n[u]*=1),w?s[u]=a[u].slice().reverse():s[u]=n[u]||0}}},l.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},l.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},l.prototype.pause=function(r){return r===void 0&&(r=rn()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=r,this._group&&this._group.remove(this),this)},l.prototype.resume=function(r){return r===void 0&&(r=rn()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=r-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},l.prototype.stopChainedTweens=function(){for(var r=0,n=this._chainedTweens.length;r<n;r++)this._chainedTweens[r].stop();return this},l.prototype.group=function(r){return this._group=r,this},l.prototype.delay=function(r){return this._delayTime=r,this},l.prototype.repeat=function(r){return this._initialRepeat=r,this._repeat=r,this},l.prototype.repeatDelay=function(r){return this._repeatDelayTime=r,this},l.prototype.yoyo=function(r){return this._yoyo=r,this},l.prototype.easing=function(r){return this._easingFunction=r,this},l.prototype.interpolation=function(r){return this._interpolationFunction=r,this},l.prototype.chain=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return this._chainedTweens=r,this},l.prototype.onStart=function(r){return this._onStartCallback=r,this},l.prototype.onUpdate=function(r){return this._onUpdateCallback=r,this},l.prototype.onRepeat=function(r){return this._onRepeatCallback=r,this},l.prototype.onComplete=function(r){return this._onCompleteCallback=r,this},l.prototype.onStop=function(r){return this._onStopCallback=r,this},l.prototype.update=function(r,n){if(r===void 0&&(r=rn()),n===void 0&&(n=!0),this._isPaused)return!0;var a,s,u=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(r>u)return!1;n&&this.start(r)}if(this._goToEnd=!1,r<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),s=(r-this._startTime)/this._duration,s=this._duration===0||s>1?1:s;var c=this._easingFunction(s);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,c),this._onUpdateCallback&&this._onUpdateCallback(this._object,s),s===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(a in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[a]=="string"&&(this._valuesStartRepeat[a]=this._valuesStartRepeat[a]+parseFloat(this._valuesEnd[a])),this._yoyo&&this._swapEndStartRepeatValues(a),this._valuesStart[a]=this._valuesStartRepeat[a];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=r+this._repeatDelayTime:this._startTime=r+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var d=0,v=this._chainedTweens.length;d<v;d++)this._chainedTweens[d].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},l.prototype._updateProperties=function(r,n,a,s){for(var u in a)if(n[u]!==void 0){var c=n[u]||0,d=a[u],v=Array.isArray(r[u]),w=Array.isArray(d),y=!v&&w;y?r[u]=this._interpolationFunction(d,s):typeof d=="object"&&d?this._updateProperties(r[u],c,d,s):(d=this._handleRelativeValue(c,d),typeof d=="number"&&(r[u]=c+(d-c)*s))}},l.prototype._handleRelativeValue=function(r,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?r+parseFloat(n):parseFloat(n)},l.prototype._swapEndStartRepeatValues=function(r){var n=this._valuesStartRepeat[r],a=this._valuesEnd[r];typeof a=="string"?this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(a):this._valuesStartRepeat[r]=this._valuesEnd[r],this._valuesEnd[r]=n},l}(),Kv="18.6.4",Yv=qs.nextId,gt=el,qv=gt.getAll.bind(gt),$v=gt.removeAll.bind(gt),Zv=gt.add.bind(gt),Qv=gt.remove.bind(gt),Jv=gt.update.bind(gt),Ht={Easing:Jn,Group:ju,Interpolation:An,now:rn,Sequence:qs,nextId:Yv,Tween:Vv,VERSION:Kv,getAll:qv,removeAll:$v,add:Zv,remove:Qv,update:Jv},jn=function(){var l=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",function(y){y.preventDefault(),a(++l%r.children.length)},!1);function n(y){return r.appendChild(y.dom),y}function a(y){for(var g=0;g<r.children.length;g++)r.children[g].style.display=g===y?"block":"none";l=y}var s=(performance||Date).now(),u=s,c=0,d=n(new jn.Panel("FPS","#0ff","#002")),v=n(new jn.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var w=n(new jn.Panel("MB","#f08","#201"));return a(0),{REVISION:16,dom:r,addPanel:n,showPanel:a,begin:function(){s=(performance||Date).now()},end:function(){c++;var y=(performance||Date).now();if(v.update(y-s,200),y>=u+1e3&&(d.update(c*1e3/(y-u),100),u=y,c=0,w)){var g=performance.memory;w.update(g.usedJSHeapSize/1048576,g.jsHeapSizeLimit/1048576)}return y},update:function(){s=this.end()},domElement:r,setMode:a}};jn.Panel=function(l,r,n){var a=1/0,s=0,u=Math.round,c=u(window.devicePixelRatio||1),d=80*c,v=48*c,w=3*c,y=2*c,g=3*c,A=15*c,C=74*c,R=30*c,M=document.createElement("canvas");M.width=d,M.height=v,M.style.cssText="width:80px;height:48px";var L=M.getContext("2d");return L.font="bold "+9*c+"px Helvetica,Arial,sans-serif",L.textBaseline="top",L.fillStyle=n,L.fillRect(0,0,d,v),L.fillStyle=r,L.fillText(l,w,y),L.fillRect(g,A,C,R),L.fillStyle=n,L.globalAlpha=.9,L.fillRect(g,A,C,R),{dom:M,update:function(U,H){a=Math.min(a,U),s=Math.max(s,U),L.fillStyle=n,L.globalAlpha=1,L.fillRect(0,0,d,A),L.fillStyle=r,L.fillText(u(U)+" "+l+" ("+u(a)+"-"+u(s)+")",w,y),L.drawImage(M,g+c,A,C-c,R,g,A,C-c,R),L.fillRect(g+C-c,A,c,R),L.fillStyle=n,L.globalAlpha=.9,L.fillRect(g+C-c,A,c,u((1-U/H)*R))}}};const jv=jn;var ai={},em={get exports(){return ai},set exports(l){ai=l}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(l,r){(function(){var n,a="4.17.21",s=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",d="Invalid `variable` option passed into `_.template`",v="__lodash_hash_undefined__",w=500,y="__lodash_placeholder__",g=1,A=2,C=4,R=1,M=2,L=1,U=2,H=4,W=8,j=16,ae=32,G=64,ee=128,fe=256,je=512,xe=30,Xt="...",Et=800,Rt=16,Vt=1,ir=2,ut=3,vt=1/0,lt=9007199254740991,Cn=17976931348623157e292,et=0/0,Oe=4294967295,Kt=Oe-1,bn=Oe>>>1,En=[["ary",ee],["bind",L],["bindKey",U],["curry",W],["curryRight",j],["flip",je],["partial",ae],["partialRight",G],["rearg",fe]],mt="[object Arguments]",Yt="[object Array]",sr="[object AsyncFunction]",Pt="[object Boolean]",Rn="[object Date]",dl="[object DOMException]",ar="[object Error]",or="[object Function]",Zs="[object GeneratorFunction]",tt="[object Map]",Pn="[object Number]",gl="[object Null]",_t="[object Object]",Qs="[object Promise]",vl="[object Proxy]",Ln="[object RegExp]",nt="[object Set]",Mn="[object String]",ur="[object Symbol]",ml="[object Undefined]",Fn="[object WeakMap]",_l="[object WeakSet]",Dn="[object ArrayBuffer]",on="[object DataView]",fi="[object Float32Array]",ci="[object Float64Array]",hi="[object Int8Array]",pi="[object Int16Array]",di="[object Int32Array]",gi="[object Uint8Array]",vi="[object Uint8ClampedArray]",mi="[object Uint16Array]",_i="[object Uint32Array]",wl=/\b__p \+= '';/g,yl=/\b(__p \+=) '' \+/g,xl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Js=/&(?:amp|lt|gt|quot|#39);/g,js=/[&<>"']/g,Tl=RegExp(Js.source),Al=RegExp(js.source),Il=/<%-([\s\S]+?)%>/g,Sl=/<%([\s\S]+?)%>/g,ea=/<%=([\s\S]+?)%>/g,Cl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bl=/^\w*$/,El=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wi=/[\\^$.*+?()[\]{}|]/g,Rl=RegExp(wi.source),yi=/^\s+/,Pl=/\s/,Ll=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ml=/\{\n\/\* \[wrapped with (.+)\] \*/,Fl=/,? & /,Dl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ol=/[()=,{}\[\]\/\s]/,Ul=/\\(\\)?/g,Bl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ta=/\w*$/,Wl=/^[-+]0x[0-9a-f]+$/i,kl=/^0b[01]+$/i,zl=/^\[object .+?Constructor\]$/,Gl=/^0o[0-7]+$/i,Hl=/^(?:0|[1-9]\d*)$/,Nl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lr=/($^)/,Xl=/['\n\r\u2028\u2029\\]/g,fr="\\ud800-\\udfff",Vl="\\u0300-\\u036f",Kl="\\ufe20-\\ufe2f",Yl="\\u20d0-\\u20ff",na=Vl+Kl+Yl,ra="\\u2700-\\u27bf",ia="a-z\\xdf-\\xf6\\xf8-\\xff",ql="\\xac\\xb1\\xd7\\xf7",$l="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Zl="\\u2000-\\u206f",Ql=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",sa="A-Z\\xc0-\\xd6\\xd8-\\xde",aa="\\ufe0e\\ufe0f",oa=ql+$l+Zl+Ql,xi="['’]",Jl="["+fr+"]",ua="["+oa+"]",cr="["+na+"]",la="\\d+",jl="["+ra+"]",fa="["+ia+"]",ca="[^"+fr+oa+la+ra+ia+sa+"]",Ti="\\ud83c[\\udffb-\\udfff]",ef="(?:"+cr+"|"+Ti+")",ha="[^"+fr+"]",Ai="(?:\\ud83c[\\udde6-\\uddff]){2}",Ii="[\\ud800-\\udbff][\\udc00-\\udfff]",un="["+sa+"]",pa="\\u200d",da="(?:"+fa+"|"+ca+")",tf="(?:"+un+"|"+ca+")",ga="(?:"+xi+"(?:d|ll|m|re|s|t|ve))?",va="(?:"+xi+"(?:D|LL|M|RE|S|T|VE))?",ma=ef+"?",_a="["+aa+"]?",nf="(?:"+pa+"(?:"+[ha,Ai,Ii].join("|")+")"+_a+ma+")*",rf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",sf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",wa=_a+ma+nf,af="(?:"+[jl,Ai,Ii].join("|")+")"+wa,of="(?:"+[ha+cr+"?",cr,Ai,Ii,Jl].join("|")+")",uf=RegExp(xi,"g"),lf=RegExp(cr,"g"),Si=RegExp(Ti+"(?="+Ti+")|"+of+wa,"g"),ff=RegExp([un+"?"+fa+"+"+ga+"(?="+[ua,un,"$"].join("|")+")",tf+"+"+va+"(?="+[ua,un+da,"$"].join("|")+")",un+"?"+da+"+"+ga,un+"+"+va,sf,rf,la,af].join("|"),"g"),cf=RegExp("["+pa+fr+na+aa+"]"),hf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],df=-1,oe={};oe[fi]=oe[ci]=oe[hi]=oe[pi]=oe[di]=oe[gi]=oe[vi]=oe[mi]=oe[_i]=!0,oe[mt]=oe[Yt]=oe[Dn]=oe[Pt]=oe[on]=oe[Rn]=oe[ar]=oe[or]=oe[tt]=oe[Pn]=oe[_t]=oe[Ln]=oe[nt]=oe[Mn]=oe[Fn]=!1;var se={};se[mt]=se[Yt]=se[Dn]=se[on]=se[Pt]=se[Rn]=se[fi]=se[ci]=se[hi]=se[pi]=se[di]=se[tt]=se[Pn]=se[_t]=se[Ln]=se[nt]=se[Mn]=se[ur]=se[gi]=se[vi]=se[mi]=se[_i]=!0,se[ar]=se[or]=se[Fn]=!1;var gf={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},vf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_f={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wf=parseFloat,yf=parseInt,ya=typeof Zn=="object"&&Zn&&Zn.Object===Object&&Zn,xf=typeof self=="object"&&self&&self.Object===Object&&self,Te=ya||xf||Function("return this")(),Ci=r&&!r.nodeType&&r,qt=Ci&&!0&&l&&!l.nodeType&&l,xa=qt&&qt.exports===Ci,bi=xa&&ya.process,He=function(){try{var x=qt&&qt.require&&qt.require("util").types;return x||bi&&bi.binding&&bi.binding("util")}catch{}}(),Ta=He&&He.isArrayBuffer,Aa=He&&He.isDate,Ia=He&&He.isMap,Sa=He&&He.isRegExp,Ca=He&&He.isSet,ba=He&&He.isTypedArray;function Ue(x,S,I){switch(I.length){case 0:return x.call(S);case 1:return x.call(S,I[0]);case 2:return x.call(S,I[0],I[1]);case 3:return x.call(S,I[0],I[1],I[2])}return x.apply(S,I)}function Tf(x,S,I,D){for(var N=-1,te=x==null?0:x.length;++N<te;){var me=x[N];S(D,me,I(me),x)}return D}function Ne(x,S){for(var I=-1,D=x==null?0:x.length;++I<D&&S(x[I],I,x)!==!1;);return x}function Af(x,S){for(var I=x==null?0:x.length;I--&&S(x[I],I,x)!==!1;);return x}function Ea(x,S){for(var I=-1,D=x==null?0:x.length;++I<D;)if(!S(x[I],I,x))return!1;return!0}function Lt(x,S){for(var I=-1,D=x==null?0:x.length,N=0,te=[];++I<D;){var me=x[I];S(me,I,x)&&(te[N++]=me)}return te}function hr(x,S){var I=x==null?0:x.length;return!!I&&ln(x,S,0)>-1}function Ei(x,S,I){for(var D=-1,N=x==null?0:x.length;++D<N;)if(I(S,x[D]))return!0;return!1}function le(x,S){for(var I=-1,D=x==null?0:x.length,N=Array(D);++I<D;)N[I]=S(x[I],I,x);return N}function Mt(x,S){for(var I=-1,D=S.length,N=x.length;++I<D;)x[N+I]=S[I];return x}function Ri(x,S,I,D){var N=-1,te=x==null?0:x.length;for(D&&te&&(I=x[++N]);++N<te;)I=S(I,x[N],N,x);return I}function If(x,S,I,D){var N=x==null?0:x.length;for(D&&N&&(I=x[--N]);N--;)I=S(I,x[N],N,x);return I}function Pi(x,S){for(var I=-1,D=x==null?0:x.length;++I<D;)if(S(x[I],I,x))return!0;return!1}var Sf=Li("length");function Cf(x){return x.split("")}function bf(x){return x.match(Dl)||[]}function Ra(x,S,I){var D;return I(x,function(N,te,me){if(S(N,te,me))return D=te,!1}),D}function pr(x,S,I,D){for(var N=x.length,te=I+(D?1:-1);D?te--:++te<N;)if(S(x[te],te,x))return te;return-1}function ln(x,S,I){return S===S?kf(x,S,I):pr(x,Pa,I)}function Ef(x,S,I,D){for(var N=I-1,te=x.length;++N<te;)if(D(x[N],S))return N;return-1}function Pa(x){return x!==x}function La(x,S){var I=x==null?0:x.length;return I?Fi(x,S)/I:et}function Li(x){return function(S){return S==null?n:S[x]}}function Mi(x){return function(S){return x==null?n:x[S]}}function Ma(x,S,I,D,N){return N(x,function(te,me,ie){I=D?(D=!1,te):S(I,te,me,ie)}),I}function Rf(x,S){var I=x.length;for(x.sort(S);I--;)x[I]=x[I].value;return x}function Fi(x,S){for(var I,D=-1,N=x.length;++D<N;){var te=S(x[D]);te!==n&&(I=I===n?te:I+te)}return I}function Di(x,S){for(var I=-1,D=Array(x);++I<x;)D[I]=S(I);return D}function Pf(x,S){return le(S,function(I){return[I,x[I]]})}function Fa(x){return x&&x.slice(0,Ba(x)+1).replace(yi,"")}function Be(x){return function(S){return x(S)}}function Oi(x,S){return le(S,function(I){return x[I]})}function On(x,S){return x.has(S)}function Da(x,S){for(var I=-1,D=x.length;++I<D&&ln(S,x[I],0)>-1;);return I}function Oa(x,S){for(var I=x.length;I--&&ln(S,x[I],0)>-1;);return I}function Lf(x,S){for(var I=x.length,D=0;I--;)x[I]===S&&++D;return D}var Mf=Mi(gf),Ff=Mi(vf);function Df(x){return"\\"+_f[x]}function Of(x,S){return x==null?n:x[S]}function fn(x){return cf.test(x)}function Uf(x){return hf.test(x)}function Bf(x){for(var S,I=[];!(S=x.next()).done;)I.push(S.value);return I}function Ui(x){var S=-1,I=Array(x.size);return x.forEach(function(D,N){I[++S]=[N,D]}),I}function Ua(x,S){return function(I){return x(S(I))}}function Ft(x,S){for(var I=-1,D=x.length,N=0,te=[];++I<D;){var me=x[I];(me===S||me===y)&&(x[I]=y,te[N++]=I)}return te}function dr(x){var S=-1,I=Array(x.size);return x.forEach(function(D){I[++S]=D}),I}function Wf(x){var S=-1,I=Array(x.size);return x.forEach(function(D){I[++S]=[D,D]}),I}function kf(x,S,I){for(var D=I-1,N=x.length;++D<N;)if(x[D]===S)return D;return-1}function zf(x,S,I){for(var D=I+1;D--;)if(x[D]===S)return D;return D}function cn(x){return fn(x)?Hf(x):Sf(x)}function rt(x){return fn(x)?Nf(x):Cf(x)}function Ba(x){for(var S=x.length;S--&&Pl.test(x.charAt(S)););return S}var Gf=Mi(mf);function Hf(x){for(var S=Si.lastIndex=0;Si.test(x);)++S;return S}function Nf(x){return x.match(Si)||[]}function Xf(x){return x.match(ff)||[]}var Vf=function x(S){S=S==null?Te:hn.defaults(Te.Object(),S,hn.pick(Te,pf));var I=S.Array,D=S.Date,N=S.Error,te=S.Function,me=S.Math,ie=S.Object,Bi=S.RegExp,Kf=S.String,Xe=S.TypeError,gr=I.prototype,Yf=te.prototype,pn=ie.prototype,vr=S["__core-js_shared__"],mr=Yf.toString,re=pn.hasOwnProperty,qf=0,Wa=function(){var e=/[^.]+$/.exec(vr&&vr.keys&&vr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),_r=pn.toString,$f=mr.call(ie),Zf=Te._,Qf=Bi("^"+mr.call(re).replace(wi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wr=xa?S.Buffer:n,Dt=S.Symbol,yr=S.Uint8Array,ka=wr?wr.allocUnsafe:n,xr=Ua(ie.getPrototypeOf,ie),za=ie.create,Ga=pn.propertyIsEnumerable,Tr=gr.splice,Ha=Dt?Dt.isConcatSpreadable:n,Un=Dt?Dt.iterator:n,$t=Dt?Dt.toStringTag:n,Ar=function(){try{var e=en(ie,"defineProperty");return e({},"",{}),e}catch{}}(),Jf=S.clearTimeout!==Te.clearTimeout&&S.clearTimeout,jf=D&&D.now!==Te.Date.now&&D.now,ec=S.setTimeout!==Te.setTimeout&&S.setTimeout,Ir=me.ceil,Sr=me.floor,Wi=ie.getOwnPropertySymbols,tc=wr?wr.isBuffer:n,Na=S.isFinite,nc=gr.join,rc=Ua(ie.keys,ie),_e=me.max,Ie=me.min,ic=D.now,sc=S.parseInt,Xa=me.random,ac=gr.reverse,ki=en(S,"DataView"),Bn=en(S,"Map"),zi=en(S,"Promise"),dn=en(S,"Set"),Wn=en(S,"WeakMap"),kn=en(ie,"create"),Cr=Wn&&new Wn,gn={},oc=tn(ki),uc=tn(Bn),lc=tn(zi),fc=tn(dn),cc=tn(Wn),br=Dt?Dt.prototype:n,zn=br?br.valueOf:n,Va=br?br.toString:n;function h(e){if(he(e)&&!X(e)&&!(e instanceof Q)){if(e instanceof Ve)return e;if(re.call(e,"__wrapped__"))return Yo(e)}return new Ve(e)}var vn=function(){function e(){}return function(t){if(!ce(t))return{};if(za)return za(t);e.prototype=t;var i=new e;return e.prototype=n,i}}();function Er(){}function Ve(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}h.templateSettings={escape:Il,evaluate:Sl,interpolate:ea,variable:"",imports:{_:h}},h.prototype=Er.prototype,h.prototype.constructor=h,Ve.prototype=vn(Er.prototype),Ve.prototype.constructor=Ve;function Q(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Oe,this.__views__=[]}function hc(){var e=new Q(this.__wrapped__);return e.__actions__=Re(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Re(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Re(this.__views__),e}function pc(){if(this.__filtered__){var e=new Q(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function dc(){var e=this.__wrapped__.value(),t=this.__dir__,i=X(e),o=t<0,f=i?e.length:0,p=Ch(0,f,this.__views__),m=p.start,_=p.end,T=_-m,b=o?_:m-1,E=this.__iteratees__,P=E.length,F=0,O=Ie(T,this.__takeCount__);if(!i||!o&&f==T&&O==T)return vo(e,this.__actions__);var k=[];e:for(;T--&&F<O;){b+=t;for(var Y=-1,z=e[b];++Y<P;){var $=E[Y],J=$.iteratee,ze=$.type,Ee=J(z);if(ze==ir)z=Ee;else if(!Ee){if(ze==Vt)continue e;break e}}k[F++]=z}return k}Q.prototype=vn(Er.prototype),Q.prototype.constructor=Q;function Zt(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function gc(){this.__data__=kn?kn(null):{},this.size=0}function vc(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function mc(e){var t=this.__data__;if(kn){var i=t[e];return i===v?n:i}return re.call(t,e)?t[e]:n}function _c(e){var t=this.__data__;return kn?t[e]!==n:re.call(t,e)}function wc(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=kn&&t===n?v:t,this}Zt.prototype.clear=gc,Zt.prototype.delete=vc,Zt.prototype.get=mc,Zt.prototype.has=_c,Zt.prototype.set=wc;function wt(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function yc(){this.__data__=[],this.size=0}function xc(e){var t=this.__data__,i=Rr(t,e);if(i<0)return!1;var o=t.length-1;return i==o?t.pop():Tr.call(t,i,1),--this.size,!0}function Tc(e){var t=this.__data__,i=Rr(t,e);return i<0?n:t[i][1]}function Ac(e){return Rr(this.__data__,e)>-1}function Ic(e,t){var i=this.__data__,o=Rr(i,e);return o<0?(++this.size,i.push([e,t])):i[o][1]=t,this}wt.prototype.clear=yc,wt.prototype.delete=xc,wt.prototype.get=Tc,wt.prototype.has=Ac,wt.prototype.set=Ic;function yt(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function Sc(){this.size=0,this.__data__={hash:new Zt,map:new(Bn||wt),string:new Zt}}function Cc(e){var t=Gr(this,e).delete(e);return this.size-=t?1:0,t}function bc(e){return Gr(this,e).get(e)}function Ec(e){return Gr(this,e).has(e)}function Rc(e,t){var i=Gr(this,e),o=i.size;return i.set(e,t),this.size+=i.size==o?0:1,this}yt.prototype.clear=Sc,yt.prototype.delete=Cc,yt.prototype.get=bc,yt.prototype.has=Ec,yt.prototype.set=Rc;function Qt(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new yt;++t<i;)this.add(e[t])}function Pc(e){return this.__data__.set(e,v),this}function Lc(e){return this.__data__.has(e)}Qt.prototype.add=Qt.prototype.push=Pc,Qt.prototype.has=Lc;function it(e){var t=this.__data__=new wt(e);this.size=t.size}function Mc(){this.__data__=new wt,this.size=0}function Fc(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function Dc(e){return this.__data__.get(e)}function Oc(e){return this.__data__.has(e)}function Uc(e,t){var i=this.__data__;if(i instanceof wt){var o=i.__data__;if(!Bn||o.length<s-1)return o.push([e,t]),this.size=++i.size,this;i=this.__data__=new yt(o)}return i.set(e,t),this.size=i.size,this}it.prototype.clear=Mc,it.prototype.delete=Fc,it.prototype.get=Dc,it.prototype.has=Oc,it.prototype.set=Uc;function Ka(e,t){var i=X(e),o=!i&&nn(e),f=!i&&!o&&kt(e),p=!i&&!o&&!f&&yn(e),m=i||o||f||p,_=m?Di(e.length,Kf):[],T=_.length;for(var b in e)(t||re.call(e,b))&&!(m&&(b=="length"||f&&(b=="offset"||b=="parent")||p&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||It(b,T)))&&_.push(b);return _}function Ya(e){var t=e.length;return t?e[Qi(0,t-1)]:n}function Bc(e,t){return Hr(Re(e),Jt(t,0,e.length))}function Wc(e){return Hr(Re(e))}function Gi(e,t,i){(i!==n&&!st(e[t],i)||i===n&&!(t in e))&&xt(e,t,i)}function Gn(e,t,i){var o=e[t];(!(re.call(e,t)&&st(o,i))||i===n&&!(t in e))&&xt(e,t,i)}function Rr(e,t){for(var i=e.length;i--;)if(st(e[i][0],t))return i;return-1}function kc(e,t,i,o){return Ot(e,function(f,p,m){t(o,f,i(f),m)}),o}function qa(e,t){return e&&ct(t,we(t),e)}function zc(e,t){return e&&ct(t,Le(t),e)}function xt(e,t,i){t=="__proto__"&&Ar?Ar(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Hi(e,t){for(var i=-1,o=t.length,f=I(o),p=e==null;++i<o;)f[i]=p?n:Ts(e,t[i]);return f}function Jt(e,t,i){return e===e&&(i!==n&&(e=e<=i?e:i),t!==n&&(e=e>=t?e:t)),e}function Ke(e,t,i,o,f,p){var m,_=t&g,T=t&A,b=t&C;if(i&&(m=f?i(e,o,f,p):i(e)),m!==n)return m;if(!ce(e))return e;var E=X(e);if(E){if(m=Eh(e),!_)return Re(e,m)}else{var P=Se(e),F=P==or||P==Zs;if(kt(e))return wo(e,_);if(P==_t||P==mt||F&&!f){if(m=T||F?{}:Wo(e),!_)return T?mh(e,zc(m,e)):vh(e,qa(m,e))}else{if(!se[P])return f?e:{};m=Rh(e,P,_)}}p||(p=new it);var O=p.get(e);if(O)return O;p.set(e,m),pu(e)?e.forEach(function(z){m.add(Ke(z,t,i,z,e,p))}):cu(e)&&e.forEach(function(z,$){m.set($,Ke(z,t,i,$,e,p))});var k=b?T?us:os:T?Le:we,Y=E?n:k(e);return Ne(Y||e,function(z,$){Y&&($=z,z=e[$]),Gn(m,$,Ke(z,t,i,$,e,p))}),m}function Gc(e){var t=we(e);return function(i){return $a(i,e,t)}}function $a(e,t,i){var o=i.length;if(e==null)return!o;for(e=ie(e);o--;){var f=i[o],p=t[f],m=e[f];if(m===n&&!(f in e)||!p(m))return!1}return!0}function Za(e,t,i){if(typeof e!="function")throw new Xe(c);return qn(function(){e.apply(n,i)},t)}function Hn(e,t,i,o){var f=-1,p=hr,m=!0,_=e.length,T=[],b=t.length;if(!_)return T;i&&(t=le(t,Be(i))),o?(p=Ei,m=!1):t.length>=s&&(p=On,m=!1,t=new Qt(t));e:for(;++f<_;){var E=e[f],P=i==null?E:i(E);if(E=o||E!==0?E:0,m&&P===P){for(var F=b;F--;)if(t[F]===P)continue e;T.push(E)}else p(t,P,o)||T.push(E)}return T}var Ot=Io(ft),Qa=Io(Xi,!0);function Hc(e,t){var i=!0;return Ot(e,function(o,f,p){return i=!!t(o,f,p),i}),i}function Pr(e,t,i){for(var o=-1,f=e.length;++o<f;){var p=e[o],m=t(p);if(m!=null&&(_===n?m===m&&!ke(m):i(m,_)))var _=m,T=p}return T}function Nc(e,t,i,o){var f=e.length;for(i=K(i),i<0&&(i=-i>f?0:f+i),o=o===n||o>f?f:K(o),o<0&&(o+=f),o=i>o?0:gu(o);i<o;)e[i++]=t;return e}function Ja(e,t){var i=[];return Ot(e,function(o,f,p){t(o,f,p)&&i.push(o)}),i}function Ae(e,t,i,o,f){var p=-1,m=e.length;for(i||(i=Lh),f||(f=[]);++p<m;){var _=e[p];t>0&&i(_)?t>1?Ae(_,t-1,i,o,f):Mt(f,_):o||(f[f.length]=_)}return f}var Ni=So(),ja=So(!0);function ft(e,t){return e&&Ni(e,t,we)}function Xi(e,t){return e&&ja(e,t,we)}function Lr(e,t){return Lt(t,function(i){return St(e[i])})}function jt(e,t){t=Bt(t,e);for(var i=0,o=t.length;e!=null&&i<o;)e=e[ht(t[i++])];return i&&i==o?e:n}function eo(e,t,i){var o=t(e);return X(e)?o:Mt(o,i(e))}function Ce(e){return e==null?e===n?ml:gl:$t&&$t in ie(e)?Sh(e):Wh(e)}function Vi(e,t){return e>t}function Xc(e,t){return e!=null&&re.call(e,t)}function Vc(e,t){return e!=null&&t in ie(e)}function Kc(e,t,i){return e>=Ie(t,i)&&e<_e(t,i)}function Ki(e,t,i){for(var o=i?Ei:hr,f=e[0].length,p=e.length,m=p,_=I(p),T=1/0,b=[];m--;){var E=e[m];m&&t&&(E=le(E,Be(t))),T=Ie(E.length,T),_[m]=!i&&(t||f>=120&&E.length>=120)?new Qt(m&&E):n}E=e[0];var P=-1,F=_[0];e:for(;++P<f&&b.length<T;){var O=E[P],k=t?t(O):O;if(O=i||O!==0?O:0,!(F?On(F,k):o(b,k,i))){for(m=p;--m;){var Y=_[m];if(!(Y?On(Y,k):o(e[m],k,i)))continue e}F&&F.push(k),b.push(O)}}return b}function Yc(e,t,i,o){return ft(e,function(f,p,m){t(o,i(f),p,m)}),o}function Nn(e,t,i){t=Bt(t,e),e=Ho(e,t);var o=e==null?e:e[ht(qe(t))];return o==null?n:Ue(o,e,i)}function to(e){return he(e)&&Ce(e)==mt}function qc(e){return he(e)&&Ce(e)==Dn}function $c(e){return he(e)&&Ce(e)==Rn}function Xn(e,t,i,o,f){return e===t?!0:e==null||t==null||!he(e)&&!he(t)?e!==e&&t!==t:Zc(e,t,i,o,Xn,f)}function Zc(e,t,i,o,f,p){var m=X(e),_=X(t),T=m?Yt:Se(e),b=_?Yt:Se(t);T=T==mt?_t:T,b=b==mt?_t:b;var E=T==_t,P=b==_t,F=T==b;if(F&&kt(e)){if(!kt(t))return!1;m=!0,E=!1}if(F&&!E)return p||(p=new it),m||yn(e)?Oo(e,t,i,o,f,p):Ah(e,t,T,i,o,f,p);if(!(i&R)){var O=E&&re.call(e,"__wrapped__"),k=P&&re.call(t,"__wrapped__");if(O||k){var Y=O?e.value():e,z=k?t.value():t;return p||(p=new it),f(Y,z,i,o,p)}}return F?(p||(p=new it),Ih(e,t,i,o,f,p)):!1}function Qc(e){return he(e)&&Se(e)==tt}function Yi(e,t,i,o){var f=i.length,p=f,m=!o;if(e==null)return!p;for(e=ie(e);f--;){var _=i[f];if(m&&_[2]?_[1]!==e[_[0]]:!(_[0]in e))return!1}for(;++f<p;){_=i[f];var T=_[0],b=e[T],E=_[1];if(m&&_[2]){if(b===n&&!(T in e))return!1}else{var P=new it;if(o)var F=o(b,E,T,e,t,P);if(!(F===n?Xn(E,b,R|M,o,P):F))return!1}}return!0}function no(e){if(!ce(e)||Fh(e))return!1;var t=St(e)?Qf:zl;return t.test(tn(e))}function Jc(e){return he(e)&&Ce(e)==Ln}function jc(e){return he(e)&&Se(e)==nt}function eh(e){return he(e)&&qr(e.length)&&!!oe[Ce(e)]}function ro(e){return typeof e=="function"?e:e==null?Me:typeof e=="object"?X(e)?ao(e[0],e[1]):so(e):Cu(e)}function qi(e){if(!Yn(e))return rc(e);var t=[];for(var i in ie(e))re.call(e,i)&&i!="constructor"&&t.push(i);return t}function th(e){if(!ce(e))return Bh(e);var t=Yn(e),i=[];for(var o in e)o=="constructor"&&(t||!re.call(e,o))||i.push(o);return i}function $i(e,t){return e<t}function io(e,t){var i=-1,o=Pe(e)?I(e.length):[];return Ot(e,function(f,p,m){o[++i]=t(f,p,m)}),o}function so(e){var t=fs(e);return t.length==1&&t[0][2]?zo(t[0][0],t[0][1]):function(i){return i===e||Yi(i,e,t)}}function ao(e,t){return hs(e)&&ko(t)?zo(ht(e),t):function(i){var o=Ts(i,e);return o===n&&o===t?As(i,e):Xn(t,o,R|M)}}function Mr(e,t,i,o,f){e!==t&&Ni(t,function(p,m){if(f||(f=new it),ce(p))nh(e,t,m,i,Mr,o,f);else{var _=o?o(ds(e,m),p,m+"",e,t,f):n;_===n&&(_=p),Gi(e,m,_)}},Le)}function nh(e,t,i,o,f,p,m){var _=ds(e,i),T=ds(t,i),b=m.get(T);if(b){Gi(e,i,b);return}var E=p?p(_,T,i+"",e,t,m):n,P=E===n;if(P){var F=X(T),O=!F&&kt(T),k=!F&&!O&&yn(T);E=T,F||O||k?X(_)?E=_:pe(_)?E=Re(_):O?(P=!1,E=wo(T,!0)):k?(P=!1,E=yo(T,!0)):E=[]:$n(T)||nn(T)?(E=_,nn(_)?E=vu(_):(!ce(_)||St(_))&&(E=Wo(T))):P=!1}P&&(m.set(T,E),f(E,T,o,p,m),m.delete(T)),Gi(e,i,E)}function oo(e,t){var i=e.length;if(i)return t+=t<0?i:0,It(t,i)?e[t]:n}function uo(e,t,i){t.length?t=le(t,function(p){return X(p)?function(m){return jt(m,p.length===1?p[0]:p)}:p}):t=[Me];var o=-1;t=le(t,Be(B()));var f=io(e,function(p,m,_){var T=le(t,function(b){return b(p)});return{criteria:T,index:++o,value:p}});return Rf(f,function(p,m){return gh(p,m,i)})}function rh(e,t){return lo(e,t,function(i,o){return As(e,o)})}function lo(e,t,i){for(var o=-1,f=t.length,p={};++o<f;){var m=t[o],_=jt(e,m);i(_,m)&&Vn(p,Bt(m,e),_)}return p}function ih(e){return function(t){return jt(t,e)}}function Zi(e,t,i,o){var f=o?Ef:ln,p=-1,m=t.length,_=e;for(e===t&&(t=Re(t)),i&&(_=le(e,Be(i)));++p<m;)for(var T=0,b=t[p],E=i?i(b):b;(T=f(_,E,T,o))>-1;)_!==e&&Tr.call(_,T,1),Tr.call(e,T,1);return e}function fo(e,t){for(var i=e?t.length:0,o=i-1;i--;){var f=t[i];if(i==o||f!==p){var p=f;It(f)?Tr.call(e,f,1):es(e,f)}}return e}function Qi(e,t){return e+Sr(Xa()*(t-e+1))}function sh(e,t,i,o){for(var f=-1,p=_e(Ir((t-e)/(i||1)),0),m=I(p);p--;)m[o?p:++f]=e,e+=i;return m}function Ji(e,t){var i="";if(!e||t<1||t>lt)return i;do t%2&&(i+=e),t=Sr(t/2),t&&(e+=e);while(t);return i}function q(e,t){return gs(Go(e,t,Me),e+"")}function ah(e){return Ya(xn(e))}function oh(e,t){var i=xn(e);return Hr(i,Jt(t,0,i.length))}function Vn(e,t,i,o){if(!ce(e))return e;t=Bt(t,e);for(var f=-1,p=t.length,m=p-1,_=e;_!=null&&++f<p;){var T=ht(t[f]),b=i;if(T==="__proto__"||T==="constructor"||T==="prototype")return e;if(f!=m){var E=_[T];b=o?o(E,T,_):n,b===n&&(b=ce(E)?E:It(t[f+1])?[]:{})}Gn(_,T,b),_=_[T]}return e}var co=Cr?function(e,t){return Cr.set(e,t),e}:Me,uh=Ar?function(e,t){return Ar(e,"toString",{configurable:!0,enumerable:!1,value:Ss(t),writable:!0})}:Me;function lh(e){return Hr(xn(e))}function Ye(e,t,i){var o=-1,f=e.length;t<0&&(t=-t>f?0:f+t),i=i>f?f:i,i<0&&(i+=f),f=t>i?0:i-t>>>0,t>>>=0;for(var p=I(f);++o<f;)p[o]=e[o+t];return p}function fh(e,t){var i;return Ot(e,function(o,f,p){return i=t(o,f,p),!i}),!!i}function Fr(e,t,i){var o=0,f=e==null?o:e.length;if(typeof t=="number"&&t===t&&f<=bn){for(;o<f;){var p=o+f>>>1,m=e[p];m!==null&&!ke(m)&&(i?m<=t:m<t)?o=p+1:f=p}return f}return ji(e,t,Me,i)}function ji(e,t,i,o){var f=0,p=e==null?0:e.length;if(p===0)return 0;t=i(t);for(var m=t!==t,_=t===null,T=ke(t),b=t===n;f<p;){var E=Sr((f+p)/2),P=i(e[E]),F=P!==n,O=P===null,k=P===P,Y=ke(P);if(m)var z=o||k;else b?z=k&&(o||F):_?z=k&&F&&(o||!O):T?z=k&&F&&!O&&(o||!Y):O||Y?z=!1:z=o?P<=t:P<t;z?f=E+1:p=E}return Ie(p,Kt)}function ho(e,t){for(var i=-1,o=e.length,f=0,p=[];++i<o;){var m=e[i],_=t?t(m):m;if(!i||!st(_,T)){var T=_;p[f++]=m===0?0:m}}return p}function po(e){return typeof e=="number"?e:ke(e)?et:+e}function We(e){if(typeof e=="string")return e;if(X(e))return le(e,We)+"";if(ke(e))return Va?Va.call(e):"";var t=e+"";return t=="0"&&1/e==-vt?"-0":t}function Ut(e,t,i){var o=-1,f=hr,p=e.length,m=!0,_=[],T=_;if(i)m=!1,f=Ei;else if(p>=s){var b=t?null:xh(e);if(b)return dr(b);m=!1,f=On,T=new Qt}else T=t?[]:_;e:for(;++o<p;){var E=e[o],P=t?t(E):E;if(E=i||E!==0?E:0,m&&P===P){for(var F=T.length;F--;)if(T[F]===P)continue e;t&&T.push(P),_.push(E)}else f(T,P,i)||(T!==_&&T.push(P),_.push(E))}return _}function es(e,t){return t=Bt(t,e),e=Ho(e,t),e==null||delete e[ht(qe(t))]}function go(e,t,i,o){return Vn(e,t,i(jt(e,t)),o)}function Dr(e,t,i,o){for(var f=e.length,p=o?f:-1;(o?p--:++p<f)&&t(e[p],p,e););return i?Ye(e,o?0:p,o?p+1:f):Ye(e,o?p+1:0,o?f:p)}function vo(e,t){var i=e;return i instanceof Q&&(i=i.value()),Ri(t,function(o,f){return f.func.apply(f.thisArg,Mt([o],f.args))},i)}function ts(e,t,i){var o=e.length;if(o<2)return o?Ut(e[0]):[];for(var f=-1,p=I(o);++f<o;)for(var m=e[f],_=-1;++_<o;)_!=f&&(p[f]=Hn(p[f]||m,e[_],t,i));return Ut(Ae(p,1),t,i)}function mo(e,t,i){for(var o=-1,f=e.length,p=t.length,m={};++o<f;){var _=o<p?t[o]:n;i(m,e[o],_)}return m}function ns(e){return pe(e)?e:[]}function rs(e){return typeof e=="function"?e:Me}function Bt(e,t){return X(e)?e:hs(e,t)?[e]:Ko(ne(e))}var ch=q;function Wt(e,t,i){var o=e.length;return i=i===n?o:i,!t&&i>=o?e:Ye(e,t,i)}var _o=Jf||function(e){return Te.clearTimeout(e)};function wo(e,t){if(t)return e.slice();var i=e.length,o=ka?ka(i):new e.constructor(i);return e.copy(o),o}function is(e){var t=new e.constructor(e.byteLength);return new yr(t).set(new yr(e)),t}function hh(e,t){var i=t?is(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function ph(e){var t=new e.constructor(e.source,ta.exec(e));return t.lastIndex=e.lastIndex,t}function dh(e){return zn?ie(zn.call(e)):{}}function yo(e,t){var i=t?is(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function xo(e,t){if(e!==t){var i=e!==n,o=e===null,f=e===e,p=ke(e),m=t!==n,_=t===null,T=t===t,b=ke(t);if(!_&&!b&&!p&&e>t||p&&m&&T&&!_&&!b||o&&m&&T||!i&&T||!f)return 1;if(!o&&!p&&!b&&e<t||b&&i&&f&&!o&&!p||_&&i&&f||!m&&f||!T)return-1}return 0}function gh(e,t,i){for(var o=-1,f=e.criteria,p=t.criteria,m=f.length,_=i.length;++o<m;){var T=xo(f[o],p[o]);if(T){if(o>=_)return T;var b=i[o];return T*(b=="desc"?-1:1)}}return e.index-t.index}function To(e,t,i,o){for(var f=-1,p=e.length,m=i.length,_=-1,T=t.length,b=_e(p-m,0),E=I(T+b),P=!o;++_<T;)E[_]=t[_];for(;++f<m;)(P||f<p)&&(E[i[f]]=e[f]);for(;b--;)E[_++]=e[f++];return E}function Ao(e,t,i,o){for(var f=-1,p=e.length,m=-1,_=i.length,T=-1,b=t.length,E=_e(p-_,0),P=I(E+b),F=!o;++f<E;)P[f]=e[f];for(var O=f;++T<b;)P[O+T]=t[T];for(;++m<_;)(F||f<p)&&(P[O+i[m]]=e[f++]);return P}function Re(e,t){var i=-1,o=e.length;for(t||(t=I(o));++i<o;)t[i]=e[i];return t}function ct(e,t,i,o){var f=!i;i||(i={});for(var p=-1,m=t.length;++p<m;){var _=t[p],T=o?o(i[_],e[_],_,i,e):n;T===n&&(T=e[_]),f?xt(i,_,T):Gn(i,_,T)}return i}function vh(e,t){return ct(e,cs(e),t)}function mh(e,t){return ct(e,Uo(e),t)}function Or(e,t){return function(i,o){var f=X(i)?Tf:kc,p=t?t():{};return f(i,e,B(o,2),p)}}function mn(e){return q(function(t,i){var o=-1,f=i.length,p=f>1?i[f-1]:n,m=f>2?i[2]:n;for(p=e.length>3&&typeof p=="function"?(f--,p):n,m&&be(i[0],i[1],m)&&(p=f<3?n:p,f=1),t=ie(t);++o<f;){var _=i[o];_&&e(t,_,o,p)}return t})}function Io(e,t){return function(i,o){if(i==null)return i;if(!Pe(i))return e(i,o);for(var f=i.length,p=t?f:-1,m=ie(i);(t?p--:++p<f)&&o(m[p],p,m)!==!1;);return i}}function So(e){return function(t,i,o){for(var f=-1,p=ie(t),m=o(t),_=m.length;_--;){var T=m[e?_:++f];if(i(p[T],T,p)===!1)break}return t}}function _h(e,t,i){var o=t&L,f=Kn(e);function p(){var m=this&&this!==Te&&this instanceof p?f:e;return m.apply(o?i:this,arguments)}return p}function Co(e){return function(t){t=ne(t);var i=fn(t)?rt(t):n,o=i?i[0]:t.charAt(0),f=i?Wt(i,1).join(""):t.slice(1);return o[e]()+f}}function _n(e){return function(t){return Ri(Iu(Au(t).replace(uf,"")),e,"")}}function Kn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=vn(e.prototype),o=e.apply(i,t);return ce(o)?o:i}}function wh(e,t,i){var o=Kn(e);function f(){for(var p=arguments.length,m=I(p),_=p,T=wn(f);_--;)m[_]=arguments[_];var b=p<3&&m[0]!==T&&m[p-1]!==T?[]:Ft(m,T);if(p-=b.length,p<i)return Lo(e,t,Ur,f.placeholder,n,m,b,n,n,i-p);var E=this&&this!==Te&&this instanceof f?o:e;return Ue(E,this,m)}return f}function bo(e){return function(t,i,o){var f=ie(t);if(!Pe(t)){var p=B(i,3);t=we(t),i=function(_){return p(f[_],_,f)}}var m=e(t,i,o);return m>-1?f[p?t[m]:m]:n}}function Eo(e){return At(function(t){var i=t.length,o=i,f=Ve.prototype.thru;for(e&&t.reverse();o--;){var p=t[o];if(typeof p!="function")throw new Xe(c);if(f&&!m&&zr(p)=="wrapper")var m=new Ve([],!0)}for(o=m?o:i;++o<i;){p=t[o];var _=zr(p),T=_=="wrapper"?ls(p):n;T&&ps(T[0])&&T[1]==(ee|W|ae|fe)&&!T[4].length&&T[9]==1?m=m[zr(T[0])].apply(m,T[3]):m=p.length==1&&ps(p)?m[_]():m.thru(p)}return function(){var b=arguments,E=b[0];if(m&&b.length==1&&X(E))return m.plant(E).value();for(var P=0,F=i?t[P].apply(this,b):E;++P<i;)F=t[P].call(this,F);return F}})}function Ur(e,t,i,o,f,p,m,_,T,b){var E=t&ee,P=t&L,F=t&U,O=t&(W|j),k=t&je,Y=F?n:Kn(e);function z(){for(var $=arguments.length,J=I($),ze=$;ze--;)J[ze]=arguments[ze];if(O)var Ee=wn(z),Ge=Lf(J,Ee);if(o&&(J=To(J,o,f,O)),p&&(J=Ao(J,p,m,O)),$-=Ge,O&&$<b){var de=Ft(J,Ee);return Lo(e,t,Ur,z.placeholder,i,J,de,_,T,b-$)}var at=P?i:this,bt=F?at[e]:e;return $=J.length,_?J=kh(J,_):k&&$>1&&J.reverse(),E&&T<$&&(J.length=T),this&&this!==Te&&this instanceof z&&(bt=Y||Kn(bt)),bt.apply(at,J)}return z}function Ro(e,t){return function(i,o){return Yc(i,e,t(o),{})}}function Br(e,t){return function(i,o){var f;if(i===n&&o===n)return t;if(i!==n&&(f=i),o!==n){if(f===n)return o;typeof i=="string"||typeof o=="string"?(i=We(i),o=We(o)):(i=po(i),o=po(o)),f=e(i,o)}return f}}function ss(e){return At(function(t){return t=le(t,Be(B())),q(function(i){var o=this;return e(t,function(f){return Ue(f,o,i)})})})}function Wr(e,t){t=t===n?" ":We(t);var i=t.length;if(i<2)return i?Ji(t,e):t;var o=Ji(t,Ir(e/cn(t)));return fn(t)?Wt(rt(o),0,e).join(""):o.slice(0,e)}function yh(e,t,i,o){var f=t&L,p=Kn(e);function m(){for(var _=-1,T=arguments.length,b=-1,E=o.length,P=I(E+T),F=this&&this!==Te&&this instanceof m?p:e;++b<E;)P[b]=o[b];for(;T--;)P[b++]=arguments[++_];return Ue(F,f?i:this,P)}return m}function Po(e){return function(t,i,o){return o&&typeof o!="number"&&be(t,i,o)&&(i=o=n),t=Ct(t),i===n?(i=t,t=0):i=Ct(i),o=o===n?t<i?1:-1:Ct(o),sh(t,i,o,e)}}function kr(e){return function(t,i){return typeof t=="string"&&typeof i=="string"||(t=$e(t),i=$e(i)),e(t,i)}}function Lo(e,t,i,o,f,p,m,_,T,b){var E=t&W,P=E?m:n,F=E?n:m,O=E?p:n,k=E?n:p;t|=E?ae:G,t&=~(E?G:ae),t&H||(t&=~(L|U));var Y=[e,t,f,O,P,k,F,_,T,b],z=i.apply(n,Y);return ps(e)&&No(z,Y),z.placeholder=o,Xo(z,e,t)}function as(e){var t=me[e];return function(i,o){if(i=$e(i),o=o==null?0:Ie(K(o),292),o&&Na(i)){var f=(ne(i)+"e").split("e"),p=t(f[0]+"e"+(+f[1]+o));return f=(ne(p)+"e").split("e"),+(f[0]+"e"+(+f[1]-o))}return t(i)}}var xh=dn&&1/dr(new dn([,-0]))[1]==vt?function(e){return new dn(e)}:Es;function Mo(e){return function(t){var i=Se(t);return i==tt?Ui(t):i==nt?Wf(t):Pf(t,e(t))}}function Tt(e,t,i,o,f,p,m,_){var T=t&U;if(!T&&typeof e!="function")throw new Xe(c);var b=o?o.length:0;if(b||(t&=~(ae|G),o=f=n),m=m===n?m:_e(K(m),0),_=_===n?_:K(_),b-=f?f.length:0,t&G){var E=o,P=f;o=f=n}var F=T?n:ls(e),O=[e,t,i,o,f,E,P,p,m,_];if(F&&Uh(O,F),e=O[0],t=O[1],i=O[2],o=O[3],f=O[4],_=O[9]=O[9]===n?T?0:e.length:_e(O[9]-b,0),!_&&t&(W|j)&&(t&=~(W|j)),!t||t==L)var k=_h(e,t,i);else t==W||t==j?k=wh(e,t,_):(t==ae||t==(L|ae))&&!f.length?k=yh(e,t,i,o):k=Ur.apply(n,O);var Y=F?co:No;return Xo(Y(k,O),e,t)}function Fo(e,t,i,o){return e===n||st(e,pn[i])&&!re.call(o,i)?t:e}function Do(e,t,i,o,f,p){return ce(e)&&ce(t)&&(p.set(t,e),Mr(e,t,n,Do,p),p.delete(t)),e}function Th(e){return $n(e)?n:e}function Oo(e,t,i,o,f,p){var m=i&R,_=e.length,T=t.length;if(_!=T&&!(m&&T>_))return!1;var b=p.get(e),E=p.get(t);if(b&&E)return b==t&&E==e;var P=-1,F=!0,O=i&M?new Qt:n;for(p.set(e,t),p.set(t,e);++P<_;){var k=e[P],Y=t[P];if(o)var z=m?o(Y,k,P,t,e,p):o(k,Y,P,e,t,p);if(z!==n){if(z)continue;F=!1;break}if(O){if(!Pi(t,function($,J){if(!On(O,J)&&(k===$||f(k,$,i,o,p)))return O.push(J)})){F=!1;break}}else if(!(k===Y||f(k,Y,i,o,p))){F=!1;break}}return p.delete(e),p.delete(t),F}function Ah(e,t,i,o,f,p,m){switch(i){case on:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Dn:return!(e.byteLength!=t.byteLength||!p(new yr(e),new yr(t)));case Pt:case Rn:case Pn:return st(+e,+t);case ar:return e.name==t.name&&e.message==t.message;case Ln:case Mn:return e==t+"";case tt:var _=Ui;case nt:var T=o&R;if(_||(_=dr),e.size!=t.size&&!T)return!1;var b=m.get(e);if(b)return b==t;o|=M,m.set(e,t);var E=Oo(_(e),_(t),o,f,p,m);return m.delete(e),E;case ur:if(zn)return zn.call(e)==zn.call(t)}return!1}function Ih(e,t,i,o,f,p){var m=i&R,_=os(e),T=_.length,b=os(t),E=b.length;if(T!=E&&!m)return!1;for(var P=T;P--;){var F=_[P];if(!(m?F in t:re.call(t,F)))return!1}var O=p.get(e),k=p.get(t);if(O&&k)return O==t&&k==e;var Y=!0;p.set(e,t),p.set(t,e);for(var z=m;++P<T;){F=_[P];var $=e[F],J=t[F];if(o)var ze=m?o(J,$,F,t,e,p):o($,J,F,e,t,p);if(!(ze===n?$===J||f($,J,i,o,p):ze)){Y=!1;break}z||(z=F=="constructor")}if(Y&&!z){var Ee=e.constructor,Ge=t.constructor;Ee!=Ge&&"constructor"in e&&"constructor"in t&&!(typeof Ee=="function"&&Ee instanceof Ee&&typeof Ge=="function"&&Ge instanceof Ge)&&(Y=!1)}return p.delete(e),p.delete(t),Y}function At(e){return gs(Go(e,n,Zo),e+"")}function os(e){return eo(e,we,cs)}function us(e){return eo(e,Le,Uo)}var ls=Cr?function(e){return Cr.get(e)}:Es;function zr(e){for(var t=e.name+"",i=gn[t],o=re.call(gn,t)?i.length:0;o--;){var f=i[o],p=f.func;if(p==null||p==e)return f.name}return t}function wn(e){var t=re.call(h,"placeholder")?h:e;return t.placeholder}function B(){var e=h.iteratee||Cs;return e=e===Cs?ro:e,arguments.length?e(arguments[0],arguments[1]):e}function Gr(e,t){var i=e.__data__;return Mh(t)?i[typeof t=="string"?"string":"hash"]:i.map}function fs(e){for(var t=we(e),i=t.length;i--;){var o=t[i],f=e[o];t[i]=[o,f,ko(f)]}return t}function en(e,t){var i=Of(e,t);return no(i)?i:n}function Sh(e){var t=re.call(e,$t),i=e[$t];try{e[$t]=n;var o=!0}catch{}var f=_r.call(e);return o&&(t?e[$t]=i:delete e[$t]),f}var cs=Wi?function(e){return e==null?[]:(e=ie(e),Lt(Wi(e),function(t){return Ga.call(e,t)}))}:Rs,Uo=Wi?function(e){for(var t=[];e;)Mt(t,cs(e)),e=xr(e);return t}:Rs,Se=Ce;(ki&&Se(new ki(new ArrayBuffer(1)))!=on||Bn&&Se(new Bn)!=tt||zi&&Se(zi.resolve())!=Qs||dn&&Se(new dn)!=nt||Wn&&Se(new Wn)!=Fn)&&(Se=function(e){var t=Ce(e),i=t==_t?e.constructor:n,o=i?tn(i):"";if(o)switch(o){case oc:return on;case uc:return tt;case lc:return Qs;case fc:return nt;case cc:return Fn}return t});function Ch(e,t,i){for(var o=-1,f=i.length;++o<f;){var p=i[o],m=p.size;switch(p.type){case"drop":e+=m;break;case"dropRight":t-=m;break;case"take":t=Ie(t,e+m);break;case"takeRight":e=_e(e,t-m);break}}return{start:e,end:t}}function bh(e){var t=e.match(Ml);return t?t[1].split(Fl):[]}function Bo(e,t,i){t=Bt(t,e);for(var o=-1,f=t.length,p=!1;++o<f;){var m=ht(t[o]);if(!(p=e!=null&&i(e,m)))break;e=e[m]}return p||++o!=f?p:(f=e==null?0:e.length,!!f&&qr(f)&&It(m,f)&&(X(e)||nn(e)))}function Eh(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&re.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function Wo(e){return typeof e.constructor=="function"&&!Yn(e)?vn(xr(e)):{}}function Rh(e,t,i){var o=e.constructor;switch(t){case Dn:return is(e);case Pt:case Rn:return new o(+e);case on:return hh(e,i);case fi:case ci:case hi:case pi:case di:case gi:case vi:case mi:case _i:return yo(e,i);case tt:return new o;case Pn:case Mn:return new o(e);case Ln:return ph(e);case nt:return new o;case ur:return dh(e)}}function Ph(e,t){var i=t.length;if(!i)return e;var o=i-1;return t[o]=(i>1?"& ":"")+t[o],t=t.join(i>2?", ":" "),e.replace(Ll,`{
/* [wrapped with `+t+`] */
`)}function Lh(e){return X(e)||nn(e)||!!(Ha&&e&&e[Ha])}function It(e,t){var i=typeof e;return t=t??lt,!!t&&(i=="number"||i!="symbol"&&Hl.test(e))&&e>-1&&e%1==0&&e<t}function be(e,t,i){if(!ce(i))return!1;var o=typeof t;return(o=="number"?Pe(i)&&It(t,i.length):o=="string"&&t in i)?st(i[t],e):!1}function hs(e,t){if(X(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||ke(e)?!0:bl.test(e)||!Cl.test(e)||t!=null&&e in ie(t)}function Mh(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ps(e){var t=zr(e),i=h[t];if(typeof i!="function"||!(t in Q.prototype))return!1;if(e===i)return!0;var o=ls(i);return!!o&&e===o[0]}function Fh(e){return!!Wa&&Wa in e}var Dh=vr?St:Ps;function Yn(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||pn;return e===i}function ko(e){return e===e&&!ce(e)}function zo(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==n||e in ie(i))}}function Oh(e){var t=Kr(e,function(o){return i.size===w&&i.clear(),o}),i=t.cache;return t}function Uh(e,t){var i=e[1],o=t[1],f=i|o,p=f<(L|U|ee),m=o==ee&&i==W||o==ee&&i==fe&&e[7].length<=t[8]||o==(ee|fe)&&t[7].length<=t[8]&&i==W;if(!(p||m))return e;o&L&&(e[2]=t[2],f|=i&L?0:H);var _=t[3];if(_){var T=e[3];e[3]=T?To(T,_,t[4]):_,e[4]=T?Ft(e[3],y):t[4]}return _=t[5],_&&(T=e[5],e[5]=T?Ao(T,_,t[6]):_,e[6]=T?Ft(e[5],y):t[6]),_=t[7],_&&(e[7]=_),o&ee&&(e[8]=e[8]==null?t[8]:Ie(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=f,e}function Bh(e){var t=[];if(e!=null)for(var i in ie(e))t.push(i);return t}function Wh(e){return _r.call(e)}function Go(e,t,i){return t=_e(t===n?e.length-1:t,0),function(){for(var o=arguments,f=-1,p=_e(o.length-t,0),m=I(p);++f<p;)m[f]=o[t+f];f=-1;for(var _=I(t+1);++f<t;)_[f]=o[f];return _[t]=i(m),Ue(e,this,_)}}function Ho(e,t){return t.length<2?e:jt(e,Ye(t,0,-1))}function kh(e,t){for(var i=e.length,o=Ie(t.length,i),f=Re(e);o--;){var p=t[o];e[o]=It(p,i)?f[p]:n}return e}function ds(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var No=Vo(co),qn=ec||function(e,t){return Te.setTimeout(e,t)},gs=Vo(uh);function Xo(e,t,i){var o=t+"";return gs(e,Ph(o,zh(bh(o),i)))}function Vo(e){var t=0,i=0;return function(){var o=ic(),f=Rt-(o-i);if(i=o,f>0){if(++t>=Et)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Hr(e,t){var i=-1,o=e.length,f=o-1;for(t=t===n?o:t;++i<t;){var p=Qi(i,f),m=e[p];e[p]=e[i],e[i]=m}return e.length=t,e}var Ko=Oh(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(El,function(i,o,f,p){t.push(f?p.replace(Ul,"$1"):o||i)}),t});function ht(e){if(typeof e=="string"||ke(e))return e;var t=e+"";return t=="0"&&1/e==-vt?"-0":t}function tn(e){if(e!=null){try{return mr.call(e)}catch{}try{return e+""}catch{}}return""}function zh(e,t){return Ne(En,function(i){var o="_."+i[0];t&i[1]&&!hr(e,o)&&e.push(o)}),e.sort()}function Yo(e){if(e instanceof Q)return e.clone();var t=new Ve(e.__wrapped__,e.__chain__);return t.__actions__=Re(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Gh(e,t,i){(i?be(e,t,i):t===n)?t=1:t=_e(K(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var f=0,p=0,m=I(Ir(o/t));f<o;)m[p++]=Ye(e,f,f+=t);return m}function Hh(e){for(var t=-1,i=e==null?0:e.length,o=0,f=[];++t<i;){var p=e[t];p&&(f[o++]=p)}return f}function Nh(){var e=arguments.length;if(!e)return[];for(var t=I(e-1),i=arguments[0],o=e;o--;)t[o-1]=arguments[o];return Mt(X(i)?Re(i):[i],Ae(t,1))}var Xh=q(function(e,t){return pe(e)?Hn(e,Ae(t,1,pe,!0)):[]}),Vh=q(function(e,t){var i=qe(t);return pe(i)&&(i=n),pe(e)?Hn(e,Ae(t,1,pe,!0),B(i,2)):[]}),Kh=q(function(e,t){var i=qe(t);return pe(i)&&(i=n),pe(e)?Hn(e,Ae(t,1,pe,!0),n,i):[]});function Yh(e,t,i){var o=e==null?0:e.length;return o?(t=i||t===n?1:K(t),Ye(e,t<0?0:t,o)):[]}function qh(e,t,i){var o=e==null?0:e.length;return o?(t=i||t===n?1:K(t),t=o-t,Ye(e,0,t<0?0:t)):[]}function $h(e,t){return e&&e.length?Dr(e,B(t,3),!0,!0):[]}function Zh(e,t){return e&&e.length?Dr(e,B(t,3),!0):[]}function Qh(e,t,i,o){var f=e==null?0:e.length;return f?(i&&typeof i!="number"&&be(e,t,i)&&(i=0,o=f),Nc(e,t,i,o)):[]}function qo(e,t,i){var o=e==null?0:e.length;if(!o)return-1;var f=i==null?0:K(i);return f<0&&(f=_e(o+f,0)),pr(e,B(t,3),f)}function $o(e,t,i){var o=e==null?0:e.length;if(!o)return-1;var f=o-1;return i!==n&&(f=K(i),f=i<0?_e(o+f,0):Ie(f,o-1)),pr(e,B(t,3),f,!0)}function Zo(e){var t=e==null?0:e.length;return t?Ae(e,1):[]}function Jh(e){var t=e==null?0:e.length;return t?Ae(e,vt):[]}function jh(e,t){var i=e==null?0:e.length;return i?(t=t===n?1:K(t),Ae(e,t)):[]}function ep(e){for(var t=-1,i=e==null?0:e.length,o={};++t<i;){var f=e[t];o[f[0]]=f[1]}return o}function Qo(e){return e&&e.length?e[0]:n}function tp(e,t,i){var o=e==null?0:e.length;if(!o)return-1;var f=i==null?0:K(i);return f<0&&(f=_e(o+f,0)),ln(e,t,f)}function np(e){var t=e==null?0:e.length;return t?Ye(e,0,-1):[]}var rp=q(function(e){var t=le(e,ns);return t.length&&t[0]===e[0]?Ki(t):[]}),ip=q(function(e){var t=qe(e),i=le(e,ns);return t===qe(i)?t=n:i.pop(),i.length&&i[0]===e[0]?Ki(i,B(t,2)):[]}),sp=q(function(e){var t=qe(e),i=le(e,ns);return t=typeof t=="function"?t:n,t&&i.pop(),i.length&&i[0]===e[0]?Ki(i,n,t):[]});function ap(e,t){return e==null?"":nc.call(e,t)}function qe(e){var t=e==null?0:e.length;return t?e[t-1]:n}function op(e,t,i){var o=e==null?0:e.length;if(!o)return-1;var f=o;return i!==n&&(f=K(i),f=f<0?_e(o+f,0):Ie(f,o-1)),t===t?zf(e,t,f):pr(e,Pa,f,!0)}function up(e,t){return e&&e.length?oo(e,K(t)):n}var lp=q(Jo);function Jo(e,t){return e&&e.length&&t&&t.length?Zi(e,t):e}function fp(e,t,i){return e&&e.length&&t&&t.length?Zi(e,t,B(i,2)):e}function cp(e,t,i){return e&&e.length&&t&&t.length?Zi(e,t,n,i):e}var hp=At(function(e,t){var i=e==null?0:e.length,o=Hi(e,t);return fo(e,le(t,function(f){return It(f,i)?+f:f}).sort(xo)),o});function pp(e,t){var i=[];if(!(e&&e.length))return i;var o=-1,f=[],p=e.length;for(t=B(t,3);++o<p;){var m=e[o];t(m,o,e)&&(i.push(m),f.push(o))}return fo(e,f),i}function vs(e){return e==null?e:ac.call(e)}function dp(e,t,i){var o=e==null?0:e.length;return o?(i&&typeof i!="number"&&be(e,t,i)?(t=0,i=o):(t=t==null?0:K(t),i=i===n?o:K(i)),Ye(e,t,i)):[]}function gp(e,t){return Fr(e,t)}function vp(e,t,i){return ji(e,t,B(i,2))}function mp(e,t){var i=e==null?0:e.length;if(i){var o=Fr(e,t);if(o<i&&st(e[o],t))return o}return-1}function _p(e,t){return Fr(e,t,!0)}function wp(e,t,i){return ji(e,t,B(i,2),!0)}function yp(e,t){var i=e==null?0:e.length;if(i){var o=Fr(e,t,!0)-1;if(st(e[o],t))return o}return-1}function xp(e){return e&&e.length?ho(e):[]}function Tp(e,t){return e&&e.length?ho(e,B(t,2)):[]}function Ap(e){var t=e==null?0:e.length;return t?Ye(e,1,t):[]}function Ip(e,t,i){return e&&e.length?(t=i||t===n?1:K(t),Ye(e,0,t<0?0:t)):[]}function Sp(e,t,i){var o=e==null?0:e.length;return o?(t=i||t===n?1:K(t),t=o-t,Ye(e,t<0?0:t,o)):[]}function Cp(e,t){return e&&e.length?Dr(e,B(t,3),!1,!0):[]}function bp(e,t){return e&&e.length?Dr(e,B(t,3)):[]}var Ep=q(function(e){return Ut(Ae(e,1,pe,!0))}),Rp=q(function(e){var t=qe(e);return pe(t)&&(t=n),Ut(Ae(e,1,pe,!0),B(t,2))}),Pp=q(function(e){var t=qe(e);return t=typeof t=="function"?t:n,Ut(Ae(e,1,pe,!0),n,t)});function Lp(e){return e&&e.length?Ut(e):[]}function Mp(e,t){return e&&e.length?Ut(e,B(t,2)):[]}function Fp(e,t){return t=typeof t=="function"?t:n,e&&e.length?Ut(e,n,t):[]}function ms(e){if(!(e&&e.length))return[];var t=0;return e=Lt(e,function(i){if(pe(i))return t=_e(i.length,t),!0}),Di(t,function(i){return le(e,Li(i))})}function jo(e,t){if(!(e&&e.length))return[];var i=ms(e);return t==null?i:le(i,function(o){return Ue(t,n,o)})}var Dp=q(function(e,t){return pe(e)?Hn(e,t):[]}),Op=q(function(e){return ts(Lt(e,pe))}),Up=q(function(e){var t=qe(e);return pe(t)&&(t=n),ts(Lt(e,pe),B(t,2))}),Bp=q(function(e){var t=qe(e);return t=typeof t=="function"?t:n,ts(Lt(e,pe),n,t)}),Wp=q(ms);function kp(e,t){return mo(e||[],t||[],Gn)}function zp(e,t){return mo(e||[],t||[],Vn)}var Gp=q(function(e){var t=e.length,i=t>1?e[t-1]:n;return i=typeof i=="function"?(e.pop(),i):n,jo(e,i)});function eu(e){var t=h(e);return t.__chain__=!0,t}function Hp(e,t){return t(e),e}function Nr(e,t){return t(e)}var Np=At(function(e){var t=e.length,i=t?e[0]:0,o=this.__wrapped__,f=function(p){return Hi(p,e)};return t>1||this.__actions__.length||!(o instanceof Q)||!It(i)?this.thru(f):(o=o.slice(i,+i+(t?1:0)),o.__actions__.push({func:Nr,args:[f],thisArg:n}),new Ve(o,this.__chain__).thru(function(p){return t&&!p.length&&p.push(n),p}))});function Xp(){return eu(this)}function Vp(){return new Ve(this.value(),this.__chain__)}function Kp(){this.__values__===n&&(this.__values__=du(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function Yp(){return this}function qp(e){for(var t,i=this;i instanceof Er;){var o=Yo(i);o.__index__=0,o.__values__=n,t?f.__wrapped__=o:t=o;var f=o;i=i.__wrapped__}return f.__wrapped__=e,t}function $p(){var e=this.__wrapped__;if(e instanceof Q){var t=e;return this.__actions__.length&&(t=new Q(this)),t=t.reverse(),t.__actions__.push({func:Nr,args:[vs],thisArg:n}),new Ve(t,this.__chain__)}return this.thru(vs)}function Zp(){return vo(this.__wrapped__,this.__actions__)}var Qp=Or(function(e,t,i){re.call(e,i)?++e[i]:xt(e,i,1)});function Jp(e,t,i){var o=X(e)?Ea:Hc;return i&&be(e,t,i)&&(t=n),o(e,B(t,3))}function jp(e,t){var i=X(e)?Lt:Ja;return i(e,B(t,3))}var ed=bo(qo),td=bo($o);function nd(e,t){return Ae(Xr(e,t),1)}function rd(e,t){return Ae(Xr(e,t),vt)}function id(e,t,i){return i=i===n?1:K(i),Ae(Xr(e,t),i)}function tu(e,t){var i=X(e)?Ne:Ot;return i(e,B(t,3))}function nu(e,t){var i=X(e)?Af:Qa;return i(e,B(t,3))}var sd=Or(function(e,t,i){re.call(e,i)?e[i].push(t):xt(e,i,[t])});function ad(e,t,i,o){e=Pe(e)?e:xn(e),i=i&&!o?K(i):0;var f=e.length;return i<0&&(i=_e(f+i,0)),$r(e)?i<=f&&e.indexOf(t,i)>-1:!!f&&ln(e,t,i)>-1}var od=q(function(e,t,i){var o=-1,f=typeof t=="function",p=Pe(e)?I(e.length):[];return Ot(e,function(m){p[++o]=f?Ue(t,m,i):Nn(m,t,i)}),p}),ud=Or(function(e,t,i){xt(e,i,t)});function Xr(e,t){var i=X(e)?le:io;return i(e,B(t,3))}function ld(e,t,i,o){return e==null?[]:(X(t)||(t=t==null?[]:[t]),i=o?n:i,X(i)||(i=i==null?[]:[i]),uo(e,t,i))}var fd=Or(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});function cd(e,t,i){var o=X(e)?Ri:Ma,f=arguments.length<3;return o(e,B(t,4),i,f,Ot)}function hd(e,t,i){var o=X(e)?If:Ma,f=arguments.length<3;return o(e,B(t,4),i,f,Qa)}function pd(e,t){var i=X(e)?Lt:Ja;return i(e,Yr(B(t,3)))}function dd(e){var t=X(e)?Ya:ah;return t(e)}function gd(e,t,i){(i?be(e,t,i):t===n)?t=1:t=K(t);var o=X(e)?Bc:oh;return o(e,t)}function vd(e){var t=X(e)?Wc:lh;return t(e)}function md(e){if(e==null)return 0;if(Pe(e))return $r(e)?cn(e):e.length;var t=Se(e);return t==tt||t==nt?e.size:qi(e).length}function _d(e,t,i){var o=X(e)?Pi:fh;return i&&be(e,t,i)&&(t=n),o(e,B(t,3))}var wd=q(function(e,t){if(e==null)return[];var i=t.length;return i>1&&be(e,t[0],t[1])?t=[]:i>2&&be(t[0],t[1],t[2])&&(t=[t[0]]),uo(e,Ae(t,1),[])}),Vr=jf||function(){return Te.Date.now()};function yd(e,t){if(typeof t!="function")throw new Xe(c);return e=K(e),function(){if(--e<1)return t.apply(this,arguments)}}function ru(e,t,i){return t=i?n:t,t=e&&t==null?e.length:t,Tt(e,ee,n,n,n,n,t)}function iu(e,t){var i;if(typeof t!="function")throw new Xe(c);return e=K(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=n),i}}var _s=q(function(e,t,i){var o=L;if(i.length){var f=Ft(i,wn(_s));o|=ae}return Tt(e,o,t,i,f)}),su=q(function(e,t,i){var o=L|U;if(i.length){var f=Ft(i,wn(su));o|=ae}return Tt(t,o,e,i,f)});function au(e,t,i){t=i?n:t;var o=Tt(e,W,n,n,n,n,n,t);return o.placeholder=au.placeholder,o}function ou(e,t,i){t=i?n:t;var o=Tt(e,j,n,n,n,n,n,t);return o.placeholder=ou.placeholder,o}function uu(e,t,i){var o,f,p,m,_,T,b=0,E=!1,P=!1,F=!0;if(typeof e!="function")throw new Xe(c);t=$e(t)||0,ce(i)&&(E=!!i.leading,P="maxWait"in i,p=P?_e($e(i.maxWait)||0,t):p,F="trailing"in i?!!i.trailing:F);function O(de){var at=o,bt=f;return o=f=n,b=de,m=e.apply(bt,at),m}function k(de){return b=de,_=qn($,t),E?O(de):m}function Y(de){var at=de-T,bt=de-b,bu=t-at;return P?Ie(bu,p-bt):bu}function z(de){var at=de-T,bt=de-b;return T===n||at>=t||at<0||P&&bt>=p}function $(){var de=Vr();if(z(de))return J(de);_=qn($,Y(de))}function J(de){return _=n,F&&o?O(de):(o=f=n,m)}function ze(){_!==n&&_o(_),b=0,o=T=f=_=n}function Ee(){return _===n?m:J(Vr())}function Ge(){var de=Vr(),at=z(de);if(o=arguments,f=this,T=de,at){if(_===n)return k(T);if(P)return _o(_),_=qn($,t),O(T)}return _===n&&(_=qn($,t)),m}return Ge.cancel=ze,Ge.flush=Ee,Ge}var xd=q(function(e,t){return Za(e,1,t)}),Td=q(function(e,t,i){return Za(e,$e(t)||0,i)});function Ad(e){return Tt(e,je)}function Kr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Xe(c);var i=function(){var o=arguments,f=t?t.apply(this,o):o[0],p=i.cache;if(p.has(f))return p.get(f);var m=e.apply(this,o);return i.cache=p.set(f,m)||p,m};return i.cache=new(Kr.Cache||yt),i}Kr.Cache=yt;function Yr(e){if(typeof e!="function")throw new Xe(c);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Id(e){return iu(2,e)}var Sd=ch(function(e,t){t=t.length==1&&X(t[0])?le(t[0],Be(B())):le(Ae(t,1),Be(B()));var i=t.length;return q(function(o){for(var f=-1,p=Ie(o.length,i);++f<p;)o[f]=t[f].call(this,o[f]);return Ue(e,this,o)})}),ws=q(function(e,t){var i=Ft(t,wn(ws));return Tt(e,ae,n,t,i)}),lu=q(function(e,t){var i=Ft(t,wn(lu));return Tt(e,G,n,t,i)}),Cd=At(function(e,t){return Tt(e,fe,n,n,n,t)});function bd(e,t){if(typeof e!="function")throw new Xe(c);return t=t===n?t:K(t),q(e,t)}function Ed(e,t){if(typeof e!="function")throw new Xe(c);return t=t==null?0:_e(K(t),0),q(function(i){var o=i[t],f=Wt(i,0,t);return o&&Mt(f,o),Ue(e,this,f)})}function Rd(e,t,i){var o=!0,f=!0;if(typeof e!="function")throw new Xe(c);return ce(i)&&(o="leading"in i?!!i.leading:o,f="trailing"in i?!!i.trailing:f),uu(e,t,{leading:o,maxWait:t,trailing:f})}function Pd(e){return ru(e,1)}function Ld(e,t){return ws(rs(t),e)}function Md(){if(!arguments.length)return[];var e=arguments[0];return X(e)?e:[e]}function Fd(e){return Ke(e,C)}function Dd(e,t){return t=typeof t=="function"?t:n,Ke(e,C,t)}function Od(e){return Ke(e,g|C)}function Ud(e,t){return t=typeof t=="function"?t:n,Ke(e,g|C,t)}function Bd(e,t){return t==null||$a(e,t,we(t))}function st(e,t){return e===t||e!==e&&t!==t}var Wd=kr(Vi),kd=kr(function(e,t){return e>=t}),nn=to(function(){return arguments}())?to:function(e){return he(e)&&re.call(e,"callee")&&!Ga.call(e,"callee")},X=I.isArray,zd=Ta?Be(Ta):qc;function Pe(e){return e!=null&&qr(e.length)&&!St(e)}function pe(e){return he(e)&&Pe(e)}function Gd(e){return e===!0||e===!1||he(e)&&Ce(e)==Pt}var kt=tc||Ps,Hd=Aa?Be(Aa):$c;function Nd(e){return he(e)&&e.nodeType===1&&!$n(e)}function Xd(e){if(e==null)return!0;if(Pe(e)&&(X(e)||typeof e=="string"||typeof e.splice=="function"||kt(e)||yn(e)||nn(e)))return!e.length;var t=Se(e);if(t==tt||t==nt)return!e.size;if(Yn(e))return!qi(e).length;for(var i in e)if(re.call(e,i))return!1;return!0}function Vd(e,t){return Xn(e,t)}function Kd(e,t,i){i=typeof i=="function"?i:n;var o=i?i(e,t):n;return o===n?Xn(e,t,n,i):!!o}function ys(e){if(!he(e))return!1;var t=Ce(e);return t==ar||t==dl||typeof e.message=="string"&&typeof e.name=="string"&&!$n(e)}function Yd(e){return typeof e=="number"&&Na(e)}function St(e){if(!ce(e))return!1;var t=Ce(e);return t==or||t==Zs||t==sr||t==vl}function fu(e){return typeof e=="number"&&e==K(e)}function qr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=lt}function ce(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function he(e){return e!=null&&typeof e=="object"}var cu=Ia?Be(Ia):Qc;function qd(e,t){return e===t||Yi(e,t,fs(t))}function $d(e,t,i){return i=typeof i=="function"?i:n,Yi(e,t,fs(t),i)}function Zd(e){return hu(e)&&e!=+e}function Qd(e){if(Dh(e))throw new N(u);return no(e)}function Jd(e){return e===null}function jd(e){return e==null}function hu(e){return typeof e=="number"||he(e)&&Ce(e)==Pn}function $n(e){if(!he(e)||Ce(e)!=_t)return!1;var t=xr(e);if(t===null)return!0;var i=re.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&mr.call(i)==$f}var xs=Sa?Be(Sa):Jc;function eg(e){return fu(e)&&e>=-lt&&e<=lt}var pu=Ca?Be(Ca):jc;function $r(e){return typeof e=="string"||!X(e)&&he(e)&&Ce(e)==Mn}function ke(e){return typeof e=="symbol"||he(e)&&Ce(e)==ur}var yn=ba?Be(ba):eh;function tg(e){return e===n}function ng(e){return he(e)&&Se(e)==Fn}function rg(e){return he(e)&&Ce(e)==_l}var ig=kr($i),sg=kr(function(e,t){return e<=t});function du(e){if(!e)return[];if(Pe(e))return $r(e)?rt(e):Re(e);if(Un&&e[Un])return Bf(e[Un]());var t=Se(e),i=t==tt?Ui:t==nt?dr:xn;return i(e)}function Ct(e){if(!e)return e===0?e:0;if(e=$e(e),e===vt||e===-vt){var t=e<0?-1:1;return t*Cn}return e===e?e:0}function K(e){var t=Ct(e),i=t%1;return t===t?i?t-i:t:0}function gu(e){return e?Jt(K(e),0,Oe):0}function $e(e){if(typeof e=="number")return e;if(ke(e))return et;if(ce(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ce(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Fa(e);var i=kl.test(e);return i||Gl.test(e)?yf(e.slice(2),i?2:8):Wl.test(e)?et:+e}function vu(e){return ct(e,Le(e))}function ag(e){return e?Jt(K(e),-lt,lt):e===0?e:0}function ne(e){return e==null?"":We(e)}var og=mn(function(e,t){if(Yn(t)||Pe(t)){ct(t,we(t),e);return}for(var i in t)re.call(t,i)&&Gn(e,i,t[i])}),mu=mn(function(e,t){ct(t,Le(t),e)}),Zr=mn(function(e,t,i,o){ct(t,Le(t),e,o)}),ug=mn(function(e,t,i,o){ct(t,we(t),e,o)}),lg=At(Hi);function fg(e,t){var i=vn(e);return t==null?i:qa(i,t)}var cg=q(function(e,t){e=ie(e);var i=-1,o=t.length,f=o>2?t[2]:n;for(f&&be(t[0],t[1],f)&&(o=1);++i<o;)for(var p=t[i],m=Le(p),_=-1,T=m.length;++_<T;){var b=m[_],E=e[b];(E===n||st(E,pn[b])&&!re.call(e,b))&&(e[b]=p[b])}return e}),hg=q(function(e){return e.push(n,Do),Ue(_u,n,e)});function pg(e,t){return Ra(e,B(t,3),ft)}function dg(e,t){return Ra(e,B(t,3),Xi)}function gg(e,t){return e==null?e:Ni(e,B(t,3),Le)}function vg(e,t){return e==null?e:ja(e,B(t,3),Le)}function mg(e,t){return e&&ft(e,B(t,3))}function _g(e,t){return e&&Xi(e,B(t,3))}function wg(e){return e==null?[]:Lr(e,we(e))}function yg(e){return e==null?[]:Lr(e,Le(e))}function Ts(e,t,i){var o=e==null?n:jt(e,t);return o===n?i:o}function xg(e,t){return e!=null&&Bo(e,t,Xc)}function As(e,t){return e!=null&&Bo(e,t,Vc)}var Tg=Ro(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=_r.call(t)),e[t]=i},Ss(Me)),Ag=Ro(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=_r.call(t)),re.call(e,t)?e[t].push(i):e[t]=[i]},B),Ig=q(Nn);function we(e){return Pe(e)?Ka(e):qi(e)}function Le(e){return Pe(e)?Ka(e,!0):th(e)}function Sg(e,t){var i={};return t=B(t,3),ft(e,function(o,f,p){xt(i,t(o,f,p),o)}),i}function Cg(e,t){var i={};return t=B(t,3),ft(e,function(o,f,p){xt(i,f,t(o,f,p))}),i}var bg=mn(function(e,t,i){Mr(e,t,i)}),_u=mn(function(e,t,i,o){Mr(e,t,i,o)}),Eg=At(function(e,t){var i={};if(e==null)return i;var o=!1;t=le(t,function(p){return p=Bt(p,e),o||(o=p.length>1),p}),ct(e,us(e),i),o&&(i=Ke(i,g|A|C,Th));for(var f=t.length;f--;)es(i,t[f]);return i});function Rg(e,t){return wu(e,Yr(B(t)))}var Pg=At(function(e,t){return e==null?{}:rh(e,t)});function wu(e,t){if(e==null)return{};var i=le(us(e),function(o){return[o]});return t=B(t),lo(e,i,function(o,f){return t(o,f[0])})}function Lg(e,t,i){t=Bt(t,e);var o=-1,f=t.length;for(f||(f=1,e=n);++o<f;){var p=e==null?n:e[ht(t[o])];p===n&&(o=f,p=i),e=St(p)?p.call(e):p}return e}function Mg(e,t,i){return e==null?e:Vn(e,t,i)}function Fg(e,t,i,o){return o=typeof o=="function"?o:n,e==null?e:Vn(e,t,i,o)}var yu=Mo(we),xu=Mo(Le);function Dg(e,t,i){var o=X(e),f=o||kt(e)||yn(e);if(t=B(t,4),i==null){var p=e&&e.constructor;f?i=o?new p:[]:ce(e)?i=St(p)?vn(xr(e)):{}:i={}}return(f?Ne:ft)(e,function(m,_,T){return t(i,m,_,T)}),i}function Og(e,t){return e==null?!0:es(e,t)}function Ug(e,t,i){return e==null?e:go(e,t,rs(i))}function Bg(e,t,i,o){return o=typeof o=="function"?o:n,e==null?e:go(e,t,rs(i),o)}function xn(e){return e==null?[]:Oi(e,we(e))}function Wg(e){return e==null?[]:Oi(e,Le(e))}function kg(e,t,i){return i===n&&(i=t,t=n),i!==n&&(i=$e(i),i=i===i?i:0),t!==n&&(t=$e(t),t=t===t?t:0),Jt($e(e),t,i)}function zg(e,t,i){return t=Ct(t),i===n?(i=t,t=0):i=Ct(i),e=$e(e),Kc(e,t,i)}function Gg(e,t,i){if(i&&typeof i!="boolean"&&be(e,t,i)&&(t=i=n),i===n&&(typeof t=="boolean"?(i=t,t=n):typeof e=="boolean"&&(i=e,e=n)),e===n&&t===n?(e=0,t=1):(e=Ct(e),t===n?(t=e,e=0):t=Ct(t)),e>t){var o=e;e=t,t=o}if(i||e%1||t%1){var f=Xa();return Ie(e+f*(t-e+wf("1e-"+((f+"").length-1))),t)}return Qi(e,t)}var Hg=_n(function(e,t,i){return t=t.toLowerCase(),e+(i?Tu(t):t)});function Tu(e){return Is(ne(e).toLowerCase())}function Au(e){return e=ne(e),e&&e.replace(Nl,Mf).replace(lf,"")}function Ng(e,t,i){e=ne(e),t=We(t);var o=e.length;i=i===n?o:Jt(K(i),0,o);var f=i;return i-=t.length,i>=0&&e.slice(i,f)==t}function Xg(e){return e=ne(e),e&&Al.test(e)?e.replace(js,Ff):e}function Vg(e){return e=ne(e),e&&Rl.test(e)?e.replace(wi,"\\$&"):e}var Kg=_n(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),Yg=_n(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),qg=Co("toLowerCase");function $g(e,t,i){e=ne(e),t=K(t);var o=t?cn(e):0;if(!t||o>=t)return e;var f=(t-o)/2;return Wr(Sr(f),i)+e+Wr(Ir(f),i)}function Zg(e,t,i){e=ne(e),t=K(t);var o=t?cn(e):0;return t&&o<t?e+Wr(t-o,i):e}function Qg(e,t,i){e=ne(e),t=K(t);var o=t?cn(e):0;return t&&o<t?Wr(t-o,i)+e:e}function Jg(e,t,i){return i||t==null?t=0:t&&(t=+t),sc(ne(e).replace(yi,""),t||0)}function jg(e,t,i){return(i?be(e,t,i):t===n)?t=1:t=K(t),Ji(ne(e),t)}function e0(){var e=arguments,t=ne(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var t0=_n(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});function n0(e,t,i){return i&&typeof i!="number"&&be(e,t,i)&&(t=i=n),i=i===n?Oe:i>>>0,i?(e=ne(e),e&&(typeof t=="string"||t!=null&&!xs(t))&&(t=We(t),!t&&fn(e))?Wt(rt(e),0,i):e.split(t,i)):[]}var r0=_n(function(e,t,i){return e+(i?" ":"")+Is(t)});function i0(e,t,i){return e=ne(e),i=i==null?0:Jt(K(i),0,e.length),t=We(t),e.slice(i,i+t.length)==t}function s0(e,t,i){var o=h.templateSettings;i&&be(e,t,i)&&(t=n),e=ne(e),t=Zr({},t,o,Fo);var f=Zr({},t.imports,o.imports,Fo),p=we(f),m=Oi(f,p),_,T,b=0,E=t.interpolate||lr,P="__p += '",F=Bi((t.escape||lr).source+"|"+E.source+"|"+(E===ea?Bl:lr).source+"|"+(t.evaluate||lr).source+"|$","g"),O="//# sourceURL="+(re.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++df+"]")+`
`;e.replace(F,function(z,$,J,ze,Ee,Ge){return J||(J=ze),P+=e.slice(b,Ge).replace(Xl,Df),$&&(_=!0,P+=`' +
__e(`+$+`) +
'`),Ee&&(T=!0,P+=`';
`+Ee+`;
__p += '`),J&&(P+=`' +
((__t = (`+J+`)) == null ? '' : __t) +
'`),b=Ge+z.length,z}),P+=`';
`;var k=re.call(t,"variable")&&t.variable;if(!k)P=`with (obj) {
`+P+`
}
`;else if(Ol.test(k))throw new N(d);P=(T?P.replace(wl,""):P).replace(yl,"$1").replace(xl,"$1;"),P="function("+(k||"obj")+`) {
`+(k?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(_?", __e = _.escape":"")+(T?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+P+`return __p
}`;var Y=Su(function(){return te(p,O+"return "+P).apply(n,m)});if(Y.source=P,ys(Y))throw Y;return Y}function a0(e){return ne(e).toLowerCase()}function o0(e){return ne(e).toUpperCase()}function u0(e,t,i){if(e=ne(e),e&&(i||t===n))return Fa(e);if(!e||!(t=We(t)))return e;var o=rt(e),f=rt(t),p=Da(o,f),m=Oa(o,f)+1;return Wt(o,p,m).join("")}function l0(e,t,i){if(e=ne(e),e&&(i||t===n))return e.slice(0,Ba(e)+1);if(!e||!(t=We(t)))return e;var o=rt(e),f=Oa(o,rt(t))+1;return Wt(o,0,f).join("")}function f0(e,t,i){if(e=ne(e),e&&(i||t===n))return e.replace(yi,"");if(!e||!(t=We(t)))return e;var o=rt(e),f=Da(o,rt(t));return Wt(o,f).join("")}function c0(e,t){var i=xe,o=Xt;if(ce(t)){var f="separator"in t?t.separator:f;i="length"in t?K(t.length):i,o="omission"in t?We(t.omission):o}e=ne(e);var p=e.length;if(fn(e)){var m=rt(e);p=m.length}if(i>=p)return e;var _=i-cn(o);if(_<1)return o;var T=m?Wt(m,0,_).join(""):e.slice(0,_);if(f===n)return T+o;if(m&&(_+=T.length-_),xs(f)){if(e.slice(_).search(f)){var b,E=T;for(f.global||(f=Bi(f.source,ne(ta.exec(f))+"g")),f.lastIndex=0;b=f.exec(E);)var P=b.index;T=T.slice(0,P===n?_:P)}}else if(e.indexOf(We(f),_)!=_){var F=T.lastIndexOf(f);F>-1&&(T=T.slice(0,F))}return T+o}function h0(e){return e=ne(e),e&&Tl.test(e)?e.replace(Js,Gf):e}var p0=_n(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),Is=Co("toUpperCase");function Iu(e,t,i){return e=ne(e),t=i?n:t,t===n?Uf(e)?Xf(e):bf(e):e.match(t)||[]}var Su=q(function(e,t){try{return Ue(e,n,t)}catch(i){return ys(i)?i:new N(i)}}),d0=At(function(e,t){return Ne(t,function(i){i=ht(i),xt(e,i,_s(e[i],e))}),e});function g0(e){var t=e==null?0:e.length,i=B();return e=t?le(e,function(o){if(typeof o[1]!="function")throw new Xe(c);return[i(o[0]),o[1]]}):[],q(function(o){for(var f=-1;++f<t;){var p=e[f];if(Ue(p[0],this,o))return Ue(p[1],this,o)}})}function v0(e){return Gc(Ke(e,g))}function Ss(e){return function(){return e}}function m0(e,t){return e==null||e!==e?t:e}var _0=Eo(),w0=Eo(!0);function Me(e){return e}function Cs(e){return ro(typeof e=="function"?e:Ke(e,g))}function y0(e){return so(Ke(e,g))}function x0(e,t){return ao(e,Ke(t,g))}var T0=q(function(e,t){return function(i){return Nn(i,e,t)}}),A0=q(function(e,t){return function(i){return Nn(e,i,t)}});function bs(e,t,i){var o=we(t),f=Lr(t,o);i==null&&!(ce(t)&&(f.length||!o.length))&&(i=t,t=e,e=this,f=Lr(t,we(t)));var p=!(ce(i)&&"chain"in i)||!!i.chain,m=St(e);return Ne(f,function(_){var T=t[_];e[_]=T,m&&(e.prototype[_]=function(){var b=this.__chain__;if(p||b){var E=e(this.__wrapped__),P=E.__actions__=Re(this.__actions__);return P.push({func:T,args:arguments,thisArg:e}),E.__chain__=b,E}return T.apply(e,Mt([this.value()],arguments))})}),e}function I0(){return Te._===this&&(Te._=Zf),this}function Es(){}function S0(e){return e=K(e),q(function(t){return oo(t,e)})}var C0=ss(le),b0=ss(Ea),E0=ss(Pi);function Cu(e){return hs(e)?Li(ht(e)):ih(e)}function R0(e){return function(t){return e==null?n:jt(e,t)}}var P0=Po(),L0=Po(!0);function Rs(){return[]}function Ps(){return!1}function M0(){return{}}function F0(){return""}function D0(){return!0}function O0(e,t){if(e=K(e),e<1||e>lt)return[];var i=Oe,o=Ie(e,Oe);t=B(t),e-=Oe;for(var f=Di(o,t);++i<e;)t(i);return f}function U0(e){return X(e)?le(e,ht):ke(e)?[e]:Re(Ko(ne(e)))}function B0(e){var t=++qf;return ne(e)+t}var W0=Br(function(e,t){return e+t},0),k0=as("ceil"),z0=Br(function(e,t){return e/t},1),G0=as("floor");function H0(e){return e&&e.length?Pr(e,Me,Vi):n}function N0(e,t){return e&&e.length?Pr(e,B(t,2),Vi):n}function X0(e){return La(e,Me)}function V0(e,t){return La(e,B(t,2))}function K0(e){return e&&e.length?Pr(e,Me,$i):n}function Y0(e,t){return e&&e.length?Pr(e,B(t,2),$i):n}var q0=Br(function(e,t){return e*t},1),$0=as("round"),Z0=Br(function(e,t){return e-t},0);function Q0(e){return e&&e.length?Fi(e,Me):0}function J0(e,t){return e&&e.length?Fi(e,B(t,2)):0}return h.after=yd,h.ary=ru,h.assign=og,h.assignIn=mu,h.assignInWith=Zr,h.assignWith=ug,h.at=lg,h.before=iu,h.bind=_s,h.bindAll=d0,h.bindKey=su,h.castArray=Md,h.chain=eu,h.chunk=Gh,h.compact=Hh,h.concat=Nh,h.cond=g0,h.conforms=v0,h.constant=Ss,h.countBy=Qp,h.create=fg,h.curry=au,h.curryRight=ou,h.debounce=uu,h.defaults=cg,h.defaultsDeep=hg,h.defer=xd,h.delay=Td,h.difference=Xh,h.differenceBy=Vh,h.differenceWith=Kh,h.drop=Yh,h.dropRight=qh,h.dropRightWhile=$h,h.dropWhile=Zh,h.fill=Qh,h.filter=jp,h.flatMap=nd,h.flatMapDeep=rd,h.flatMapDepth=id,h.flatten=Zo,h.flattenDeep=Jh,h.flattenDepth=jh,h.flip=Ad,h.flow=_0,h.flowRight=w0,h.fromPairs=ep,h.functions=wg,h.functionsIn=yg,h.groupBy=sd,h.initial=np,h.intersection=rp,h.intersectionBy=ip,h.intersectionWith=sp,h.invert=Tg,h.invertBy=Ag,h.invokeMap=od,h.iteratee=Cs,h.keyBy=ud,h.keys=we,h.keysIn=Le,h.map=Xr,h.mapKeys=Sg,h.mapValues=Cg,h.matches=y0,h.matchesProperty=x0,h.memoize=Kr,h.merge=bg,h.mergeWith=_u,h.method=T0,h.methodOf=A0,h.mixin=bs,h.negate=Yr,h.nthArg=S0,h.omit=Eg,h.omitBy=Rg,h.once=Id,h.orderBy=ld,h.over=C0,h.overArgs=Sd,h.overEvery=b0,h.overSome=E0,h.partial=ws,h.partialRight=lu,h.partition=fd,h.pick=Pg,h.pickBy=wu,h.property=Cu,h.propertyOf=R0,h.pull=lp,h.pullAll=Jo,h.pullAllBy=fp,h.pullAllWith=cp,h.pullAt=hp,h.range=P0,h.rangeRight=L0,h.rearg=Cd,h.reject=pd,h.remove=pp,h.rest=bd,h.reverse=vs,h.sampleSize=gd,h.set=Mg,h.setWith=Fg,h.shuffle=vd,h.slice=dp,h.sortBy=wd,h.sortedUniq=xp,h.sortedUniqBy=Tp,h.split=n0,h.spread=Ed,h.tail=Ap,h.take=Ip,h.takeRight=Sp,h.takeRightWhile=Cp,h.takeWhile=bp,h.tap=Hp,h.throttle=Rd,h.thru=Nr,h.toArray=du,h.toPairs=yu,h.toPairsIn=xu,h.toPath=U0,h.toPlainObject=vu,h.transform=Dg,h.unary=Pd,h.union=Ep,h.unionBy=Rp,h.unionWith=Pp,h.uniq=Lp,h.uniqBy=Mp,h.uniqWith=Fp,h.unset=Og,h.unzip=ms,h.unzipWith=jo,h.update=Ug,h.updateWith=Bg,h.values=xn,h.valuesIn=Wg,h.without=Dp,h.words=Iu,h.wrap=Ld,h.xor=Op,h.xorBy=Up,h.xorWith=Bp,h.zip=Wp,h.zipObject=kp,h.zipObjectDeep=zp,h.zipWith=Gp,h.entries=yu,h.entriesIn=xu,h.extend=mu,h.extendWith=Zr,bs(h,h),h.add=W0,h.attempt=Su,h.camelCase=Hg,h.capitalize=Tu,h.ceil=k0,h.clamp=kg,h.clone=Fd,h.cloneDeep=Od,h.cloneDeepWith=Ud,h.cloneWith=Dd,h.conformsTo=Bd,h.deburr=Au,h.defaultTo=m0,h.divide=z0,h.endsWith=Ng,h.eq=st,h.escape=Xg,h.escapeRegExp=Vg,h.every=Jp,h.find=ed,h.findIndex=qo,h.findKey=pg,h.findLast=td,h.findLastIndex=$o,h.findLastKey=dg,h.floor=G0,h.forEach=tu,h.forEachRight=nu,h.forIn=gg,h.forInRight=vg,h.forOwn=mg,h.forOwnRight=_g,h.get=Ts,h.gt=Wd,h.gte=kd,h.has=xg,h.hasIn=As,h.head=Qo,h.identity=Me,h.includes=ad,h.indexOf=tp,h.inRange=zg,h.invoke=Ig,h.isArguments=nn,h.isArray=X,h.isArrayBuffer=zd,h.isArrayLike=Pe,h.isArrayLikeObject=pe,h.isBoolean=Gd,h.isBuffer=kt,h.isDate=Hd,h.isElement=Nd,h.isEmpty=Xd,h.isEqual=Vd,h.isEqualWith=Kd,h.isError=ys,h.isFinite=Yd,h.isFunction=St,h.isInteger=fu,h.isLength=qr,h.isMap=cu,h.isMatch=qd,h.isMatchWith=$d,h.isNaN=Zd,h.isNative=Qd,h.isNil=jd,h.isNull=Jd,h.isNumber=hu,h.isObject=ce,h.isObjectLike=he,h.isPlainObject=$n,h.isRegExp=xs,h.isSafeInteger=eg,h.isSet=pu,h.isString=$r,h.isSymbol=ke,h.isTypedArray=yn,h.isUndefined=tg,h.isWeakMap=ng,h.isWeakSet=rg,h.join=ap,h.kebabCase=Kg,h.last=qe,h.lastIndexOf=op,h.lowerCase=Yg,h.lowerFirst=qg,h.lt=ig,h.lte=sg,h.max=H0,h.maxBy=N0,h.mean=X0,h.meanBy=V0,h.min=K0,h.minBy=Y0,h.stubArray=Rs,h.stubFalse=Ps,h.stubObject=M0,h.stubString=F0,h.stubTrue=D0,h.multiply=q0,h.nth=up,h.noConflict=I0,h.noop=Es,h.now=Vr,h.pad=$g,h.padEnd=Zg,h.padStart=Qg,h.parseInt=Jg,h.random=Gg,h.reduce=cd,h.reduceRight=hd,h.repeat=jg,h.replace=e0,h.result=Lg,h.round=$0,h.runInContext=x,h.sample=dd,h.size=md,h.snakeCase=t0,h.some=_d,h.sortedIndex=gp,h.sortedIndexBy=vp,h.sortedIndexOf=mp,h.sortedLastIndex=_p,h.sortedLastIndexBy=wp,h.sortedLastIndexOf=yp,h.startCase=r0,h.startsWith=i0,h.subtract=Z0,h.sum=Q0,h.sumBy=J0,h.template=s0,h.times=O0,h.toFinite=Ct,h.toInteger=K,h.toLength=gu,h.toLower=a0,h.toNumber=$e,h.toSafeInteger=ag,h.toString=ne,h.toUpper=o0,h.trim=u0,h.trimEnd=l0,h.trimStart=f0,h.truncate=c0,h.unescape=h0,h.uniqueId=B0,h.upperCase=p0,h.upperFirst=Is,h.each=tu,h.eachRight=nu,h.first=Qo,bs(h,function(){var e={};return ft(h,function(t,i){re.call(h.prototype,i)||(e[i]=t)}),e}(),{chain:!1}),h.VERSION=a,Ne(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){h[e].placeholder=h}),Ne(["drop","take"],function(e,t){Q.prototype[e]=function(i){i=i===n?1:_e(K(i),0);var o=this.__filtered__&&!t?new Q(this):this.clone();return o.__filtered__?o.__takeCount__=Ie(i,o.__takeCount__):o.__views__.push({size:Ie(i,Oe),type:e+(o.__dir__<0?"Right":"")}),o},Q.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),Ne(["filter","map","takeWhile"],function(e,t){var i=t+1,o=i==Vt||i==ut;Q.prototype[e]=function(f){var p=this.clone();return p.__iteratees__.push({iteratee:B(f,3),type:i}),p.__filtered__=p.__filtered__||o,p}}),Ne(["head","last"],function(e,t){var i="take"+(t?"Right":"");Q.prototype[e]=function(){return this[i](1).value()[0]}}),Ne(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");Q.prototype[e]=function(){return this.__filtered__?new Q(this):this[i](1)}}),Q.prototype.compact=function(){return this.filter(Me)},Q.prototype.find=function(e){return this.filter(e).head()},Q.prototype.findLast=function(e){return this.reverse().find(e)},Q.prototype.invokeMap=q(function(e,t){return typeof e=="function"?new Q(this):this.map(function(i){return Nn(i,e,t)})}),Q.prototype.reject=function(e){return this.filter(Yr(B(e)))},Q.prototype.slice=function(e,t){e=K(e);var i=this;return i.__filtered__&&(e>0||t<0)?new Q(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==n&&(t=K(t),i=t<0?i.dropRight(-t):i.take(t-e)),i)},Q.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Q.prototype.toArray=function(){return this.take(Oe)},ft(Q.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),f=h[o?"take"+(t=="last"?"Right":""):t],p=o||/^find/.test(t);f&&(h.prototype[t]=function(){var m=this.__wrapped__,_=o?[1]:arguments,T=m instanceof Q,b=_[0],E=T||X(m),P=function($){var J=f.apply(h,Mt([$],_));return o&&F?J[0]:J};E&&i&&typeof b=="function"&&b.length!=1&&(T=E=!1);var F=this.__chain__,O=!!this.__actions__.length,k=p&&!F,Y=T&&!O;if(!p&&E){m=Y?m:new Q(this);var z=e.apply(m,_);return z.__actions__.push({func:Nr,args:[P],thisArg:n}),new Ve(z,F)}return k&&Y?e.apply(this,_):(z=this.thru(P),k?o?z.value()[0]:z.value():z)})}),Ne(["pop","push","shift","sort","splice","unshift"],function(e){var t=gr[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);h.prototype[e]=function(){var f=arguments;if(o&&!this.__chain__){var p=this.value();return t.apply(X(p)?p:[],f)}return this[i](function(m){return t.apply(X(m)?m:[],f)})}}),ft(Q.prototype,function(e,t){var i=h[t];if(i){var o=i.name+"";re.call(gn,o)||(gn[o]=[]),gn[o].push({name:t,func:i})}}),gn[Ur(n,U).name]=[{name:"wrapper",func:n}],Q.prototype.clone=hc,Q.prototype.reverse=pc,Q.prototype.value=dc,h.prototype.at=Np,h.prototype.chain=Xp,h.prototype.commit=Vp,h.prototype.next=Kp,h.prototype.plant=qp,h.prototype.reverse=$p,h.prototype.toJSON=h.prototype.valueOf=h.prototype.value=Zp,h.prototype.first=h.prototype.head,Un&&(h.prototype[Un]=Yp),h},hn=Vf();qt?((qt.exports=hn)._=hn,Ci._=hn):Te._=hn}).call(Zn)})(em,ai);const $s="/web/assets/gradient-2d7d71df.png";function tl(l){const r=new Set;let n=[];for(let s=0;s<l.length;s++)n.push(l[s]),s%3===2&&(r.add(n.join(",")),n=[]);const a=[];return r.forEach(s=>{a.push(...s.split(",").map(u=>Number(u)))}),new Float32Array(a)}const tm=["position","normal","uv","color","skinIndex","skinWeight","instanceMatri","morphTarget0","morphTarget1","morphTarget2","morphTarget3","morphTarget4","morphTarget5","morphTarget6","morphTarget7","morphNormal0","morphNormal1","morphNormal2","morphNormal3"];function Os(l,r){return Math.random()*(r-l)+l}class nm{constructor(r){V(this,"CanvasWrapper");V(this,"modelList");V(this,"_LOAD_COUNT_");V(this,"ModelPointer");V(this,"maxParticlesCount");V(this,"WIDTH");V(this,"HEIGHT");V(this,"orbitControls");V(this,"stats");V(this,"scene");V(this,"camera");V(this,"renderer");V(this,"composer");V(this,"manager");V(this,"PointMaterial");V(this,"AnimateEffectParticle");V(this,"AnimateDuration");V(this,"mouseV");V(this,"mouseK");V(this,"hadListenMouseMove");V(this,"MainParticleGroup");V(this,"defaultLoader");V(this,"ParticleAnimeMap");V(this,"Models");V(this,"addons");V(this,"onModelsFinishedLoad");V(this,"onRendering");V(this,"CurrentUseModelName");V(this,"LastUseModelName");V(this,"handleWindowResize",()=>{var r,n;this.HEIGHT=window.innerHeight,this.WIDTH=window.innerWidth,(r=this.renderer)==null||r.setSize(this.WIDTH,this.HEIGHT),(n=this.composer)==null||n.reset(),this.camera!=null&&(this.camera.aspect=this.WIDTH/this.HEIGHT,this.camera.updateProjectionMatrix())});V(this,"rotateScene",ai.throttle(r=>{this.mouseV=3e-4*(r.clientX-this.WIDTH/2),this.mouseK=1e-4*(r.clientY-this.HEIGHT/2)},100));const{AnimateDuration:n,onModelsFinishedLoad:a,LoadingManager:s}=r;this.CanvasWrapper=r.CanvasWrapper,this.addons=r.addons!=null?r.addons:[],this.Models=new Map;for(const u of r.Models)this.Models.set(u.name,u);this.AnimateDuration=typeof n=="number"?n:1500,this.onModelsFinishedLoad=a,this.manager=s,this.defaultLoader=new Ov(this.manager),this.ParticleAnimeMap=[],this.HEIGHT=window.innerHeight,this.WIDTH=window.innerWidth,this.modelList=new Map,this._LOAD_COUNT_=0,this.ModelPointer=0,this.maxParticlesCount=0,this.createScene(),this.initStats(),this._addModels(),this.createEffect(),this.orbitControls=new nv(this.camera,this.renderer.domElement),this.orbitControls.enablePan=!1,this.orbitControls.enableZoom=!1,this.orbitControls.enableRotate=!1,this.mouseK=0,this.mouseV=0,this.update(0)}createScene(){this.scene=new rv,this.scene.fog=new iv(328972,5e-4);const r=100,n=this.WIDTH/this.HEIGHT,a=1,s=5e4;this.camera=new Zu(r,n,a,s),this.camera.position.set(0,0,1e3),this.camera.lookAt(new De(0,0,0)),new sv(500),this.addons!=null&&this.addons.forEach(u=>{var c;(c=this.scene)==null||c.add(u.Geometry)}),this.renderer=new av({alpha:!0}),this.renderer.autoClear=!1,this.renderer.setClearColor(this.scene.fog.color),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=ov,this.CanvasWrapper.appendChild(this.renderer.domElement),window.addEventListener("resize",this.handleWindowResize,!1)}initStats(){this.stats=jv(),this.stats!=null&&(this.stats.domElement.style.position="absolute",this.stats.domElement.style.bottom="0px",this.stats.domElement.style.top="0px",this.stats.domElement.style.zIndex="100",this.CanvasWrapper.appendChild(this.stats.domElement))}createEffect(){this.composer=new kv(this.renderer);const r=new zv(this.scene,this.camera),n=new an(.75),a=new Nv(.5,.5,1500,0),s=new Ju(Xv);s.uniforms.screenWidth.value=window.innerWidth,s.uniforms.screenHeight.value=window.innerHeight,s.uniforms.sampleDistance.value=.4,s.renderToScreen=!0,this.composer.addPass(r),this.composer.addPass(n),this.composer.addPass(a),this.composer.addPass(s)}_addModels(){const r=new ui;r.crossOrigin="",this.PointMaterial=new sn({size:5,sizeAttenuation:!0,transparent:!0,opacity:1,blending:oi,depthWrite:!1,map:r.load($s)}),this.Models.forEach(n=>{let a,s=new Float32Array([]);const u=()=>{var c;this.modelList.set(n.name,a),(c=n.onLoadComplete)==null||c.call(this,a),this._LOAD_COUNT_++,this._LOAD_COUNT_===this.Models.size&&this._finishLoadModal()};if(typeof n.path=="string")if(n.loader!=null){const{loaderInstance:c,load:d}=n.loader;c.load(n.path,v=>{a=d(v),u()})}else this.defaultLoader.load(n.path,c=>{for(const d of c.children){const v=d.geometry.attributes.position.array;s=new Float32Array([...s,...v])}n.NeedRemoveDuplicateParticle!==!1&&(s=tl(s)),a=new Je,a.setAttribute("position",new Qu(s,3)),n.geometry=a,u()});else n.geometry instanceof Je&&(a=n.geometry,u())})}_finishLoadModal(){var u,c;let r=0;this.modelList.forEach(d=>{r=Math.max(r,d.attributes.position.count)}),this.maxParticlesCount=r;const n=[],a=1500;this.MainParticleGroup=new Ht.Group;for(let d=0;d<r;d++){const v=Os(-1*a,a),w=Os(-1*a,a),y=Os(-1*a,a);n.push(v,w,y);const g={x:v,y:w,z:y,isPlaying:!0};g.tweenctx=new Ht.Tween(g,this.MainParticleGroup).easing(Ht.Easing.Exponential.In).onComplete(A=>{A.tweenctx._valuesStart.x=A.x,A.tweenctx._valuesStart.y=A.y,A.tweenctx._valuesStart.z=A.z,A.isPlaying=!1}).onStart(A=>{A.tweenctx._valuesStart.x=A.x,A.tweenctx._valuesStart.y=A.y,A.tweenctx._valuesStart.z=A.z,A.isPlaying=!0}),this.ParticleAnimeMap[d]=g}const s=new Je;s.setAttribute("position",new ye(n,3,!1)),this.AnimateEffectParticle=new In(s,this.PointMaterial),(u=this.scene)==null||u.add(this.AnimateEffectParticle),(c=this.onModelsFinishedLoad)==null||c.call(this,this.AnimateEffectParticle,this.scene)}ChangeModel(r,n=this.AnimateDuration){var v,w;const a=this.modelList.get(r);if(a==null){console.warn("未找到指定名字的模型，改变操作已终止！传入的名字："+r.toString());return}const s=this.Models.get(r);this.CurrentUseModelName!==void 0&&(this.LastUseModelName=this.CurrentUseModelName),this.CurrentUseModelName=r,(v=s.onEnterStart)==null||v.call(this,this.AnimateEffectParticle);const u=a.getAttribute("position"),c=this.AnimateEffectParticle.geometry.getAttribute("position"),d=setTimeout(()=>{var y;(y=s.onEnterEnd)==null||y.call(this,this.AnimateEffectParticle)},n*2);for(let y=0;y<this.maxParticlesCount;y++){const g=this.ParticleAnimeMap[y];this.ParticleAnimeMap[y].isPlaying=!0;const A=y%u.count;g.x=c.getX(y),g.y=c.getY(y),g.z=c.getZ(y),g.tweenctx.stop().to({x:u.array[A*3],y:u.array[A*3+1],z:u.array[A*3+2]},n).delay(n*Math.random()).onUpdate(C=>{c.setXYZ(y,C.x,C.y,C.z),c.needsUpdate=!0}).onStop(C=>{clearTimeout(d)}).start()}(w=this.addons)==null||w.forEach(y=>{var g;(g=y.ChangeModel)==null||g.call(this)})}ListenMouseMove(){this.hadListenMouseMove!==!0&&(window.addEventListener("mousemove",this.rotateScene),this.hadListenMouseMove=!0)}StopListenMouseMove(){this.hadListenMouseMove===!0&&(window.removeEventListener("mousemove",this.rotateScene),this.hadListenMouseMove=!1)}AlignCameraCenter(r=!1){if(r&&this.scene!=null){this.scene.rotation.x=0,this.scene.rotation.y=0,this.mouseV=0,this.mouseK=0;return}const n=new MouseEvent("click",{clientX:this.WIDTH/2,clientY:this.HEIGHT/2});this.rotateScene(n)}VerticesDuplicateRemove(r){const n=new Set;let a=[];for(let u=0;u<r.length;u++)a.push(r[u]),u%3===2&&(n.add(a.join(",")),a=[]);const s=[];return n.forEach(u=>{s.push(...u.split(",").map(c=>Number(c)))}),new Float32Array(s)}_updateRotation(){this.scene!=null&&(this.scene.rotation.y+=(this.mouseV-this.scene.rotation.y)/50,this.scene.rotation.x+=(this.mouseK-this.scene.rotation.x)/50)}update(r){var n,a,s,u,c;Ht.update(),(n=this.MainParticleGroup)==null||n.update(),(a=this.onRendering)==null||a.call(this,r),(s=this.stats)==null||s.update(),this._updateRotation(),this.Models.forEach(d=>{var v,w;if(d.name===this.CurrentUseModelName&&d.onAnimationFrameUpdate!=null&&d.onAnimationFrameUpdate(this.AnimateEffectParticle,this.ParticleAnimeMap,d.geometry)===!0)for(const y of tm){const g=(w=(v=this.AnimateEffectParticle)==null?void 0:v.geometry)==null?void 0:w.getAttribute(y);g!=null&&(g.needsUpdate=!0)}}),(u=this.addons)==null||u.forEach(d=>{d.update()}),(c=this.composer)==null||c.render(),requestAnimationFrame(d=>{this.update(d)})}}class rm{constructor(){V(this,"Geometry");V(this,"update");V(this,"ChangeModel")}}const nl=new ui;nl.crossOrigin="";const im=new sn({size:7,map:nl.load($s),blending:oi,depthWrite:!1,transparent:!0});function Us(l,r){return Math.random()*(r-l)+l}class Bs extends rm{constructor(n){var w;super();V(this,"longestDistance");V(this,"particleSum");V(this,"renderUpdate");V(this,"onChangeModel");V(this,"callback");V(this,"Geometry");V(this,"update",()=>{var n;(n=this.renderUpdate)==null||n.call(this,this.Geometry)});V(this,"ChangeModel",()=>{var n;(n=this.onChangeModel)==null||n.call(this,this.Geometry)});const{longestDistance:a,particleSum:s,renderUpdate:u,onChangeModel:c}=n;this.longestDistance=a,this.particleSum=s,this.renderUpdate=u,this.onChangeModel=c;const d=[];for(let y=0;y<this.particleSum;y++){const g=Us(-1*a,a),A=Us(-1*a,a),C=Us(-1*a,a);d.push(g,A,C)}const v=new Je;v.setAttribute("position",new ye(d,3)),this.Geometry=new In(v,im),(w=n.callback)==null||w.call(this,this.Geometry)}}function sm(){const s=new Float32Array(7500),u=new Float32Array(2500);let c=0;const d=new ui,v=new sn({size:5,sizeAttenuation:!0,transparent:!0,opacity:1,blending:oi,depthWrite:!1,map:d.load($s)});for(let A=0;A<50;A++)for(let C=0;C<50;C++)s[c]=A*100-50*100/2,s[c+1]=-300,s[c+2]=C*100-50*100/2,c+=3;const w=new Je;w.setAttribute("position",new ye(s,3)),w.setAttribute("scale",new Qu(u,1));const g=new In(w,v).geometry;return g.attributes.position.needsUpdate=!0,g}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var Nu=function(l){return URL.createObjectURL(new Blob([l],{type:"text/javascript"}))};try{URL.revokeObjectURL(Nu(""))}catch{Nu=function(r){return"data:application/javascript;charset=UTF-8,"+encodeURI(r)}}var Qe=Uint8Array,Nt=Uint16Array,Xs=Uint32Array,rl=new Qe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),il=new Qe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),am=new Qe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sl=function(l,r){for(var n=new Nt(31),a=0;a<31;++a)n[a]=r+=1<<l[a-1];for(var s=new Xs(n[30]),a=1;a<30;++a)for(var u=n[a];u<n[a+1];++u)s[u]=u-n[a]<<5|a;return[n,s]},al=sl(rl,2),ol=al[0],om=al[1];ol[28]=258,om[258]=28;var um=sl(il,0),lm=um[0],Vs=new Nt(32768);for(var ue=0;ue<32768;++ue){var zt=(ue&43690)>>>1|(ue&21845)<<1;zt=(zt&52428)>>>2|(zt&13107)<<2,zt=(zt&61680)>>>4|(zt&3855)<<4,Vs[ue]=((zt&65280)>>>8|(zt&255)<<8)>>>1}var er=function(l,r,n){for(var a=l.length,s=0,u=new Nt(r);s<a;++s)++u[l[s]-1];var c=new Nt(r);for(s=0;s<r;++s)c[s]=c[s-1]+u[s-1]<<1;var d;if(n){d=new Nt(1<<r);var v=15-r;for(s=0;s<a;++s)if(l[s])for(var w=s<<4|l[s],y=r-l[s],g=c[l[s]-1]++<<y,A=g|(1<<y)-1;g<=A;++g)d[Vs[g]>>>v]=w}else for(d=new Nt(a),s=0;s<a;++s)l[s]&&(d[s]=Vs[c[l[s]-1]++]>>>15-l[s]);return d},rr=new Qe(288);for(var ue=0;ue<144;++ue)rr[ue]=8;for(var ue=144;ue<256;++ue)rr[ue]=9;for(var ue=256;ue<280;++ue)rr[ue]=7;for(var ue=280;ue<288;++ue)rr[ue]=8;var ul=new Qe(32);for(var ue=0;ue<32;++ue)ul[ue]=5;var fm=er(rr,9,1),cm=er(ul,5,1),Ws=function(l){for(var r=l[0],n=1;n<l.length;++n)l[n]>r&&(r=l[n]);return r},ot=function(l,r,n){var a=r/8|0;return(l[a]|l[a+1]<<8)>>(r&7)&n},ks=function(l,r){var n=r/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(r&7)},hm=function(l){return(l/8|0)+(l&7&&1)},pm=function(l,r,n){(r==null||r<0)&&(r=0),(n==null||n>l.length)&&(n=l.length);var a=new(l instanceof Nt?Nt:l instanceof Xs?Xs:Qe)(n-r);return a.set(l.subarray(r,n)),a},dm=function(l,r,n){var a=l.length;if(!a||n&&!n.l&&a<5)return r||new Qe(0);var s=!r||n,u=!n||n.i;n||(n={}),r||(r=new Qe(a*3));var c=function(Yt){var sr=r.length;if(Yt>sr){var Pt=new Qe(Math.max(sr*2,Yt));Pt.set(r),r=Pt}},d=n.f||0,v=n.p||0,w=n.b||0,y=n.l,g=n.d,A=n.m,C=n.n,R=a*8;do{if(!y){n.f=d=ot(l,v,1);var M=ot(l,v+1,3);if(v+=3,M)if(M==1)y=fm,g=cm,A=9,C=5;else if(M==2){var W=ot(l,v,31)+257,j=ot(l,v+10,15)+4,ae=W+ot(l,v+5,31)+1;v+=14;for(var G=new Qe(ae),ee=new Qe(19),fe=0;fe<j;++fe)ee[am[fe]]=ot(l,v+fe*3,7);v+=j*3;for(var je=Ws(ee),xe=(1<<je)-1,Xt=er(ee,je,1),fe=0;fe<ae;){var Et=Xt[ot(l,v,xe)];v+=Et&15;var L=Et>>>4;if(L<16)G[fe++]=L;else{var Rt=0,Vt=0;for(L==16?(Vt=3+ot(l,v,3),v+=2,Rt=G[fe-1]):L==17?(Vt=3+ot(l,v,7),v+=3):L==18&&(Vt=11+ot(l,v,127),v+=7);Vt--;)G[fe++]=Rt}}var ir=G.subarray(0,W),ut=G.subarray(W);A=Ws(ir),C=Ws(ut),y=er(ir,A,1),g=er(ut,C,1)}else throw"invalid block type";else{var L=hm(v)+4,U=l[L-4]|l[L-3]<<8,H=L+U;if(H>a){if(u)throw"unexpected EOF";break}s&&c(w+U),r.set(l.subarray(L,H),w),n.b=w+=U,n.p=v=H*8;continue}if(v>R){if(u)throw"unexpected EOF";break}}s&&c(w+131072);for(var vt=(1<<A)-1,lt=(1<<C)-1,Cn=v;;Cn=v){var Rt=y[ks(l,v)&vt],et=Rt>>>4;if(v+=Rt&15,v>R){if(u)throw"unexpected EOF";break}if(!Rt)throw"invalid length/literal";if(et<256)r[w++]=et;else if(et==256){Cn=v,y=null;break}else{var Oe=et-254;if(et>264){var fe=et-257,Kt=rl[fe];Oe=ot(l,v,(1<<Kt)-1)+ol[fe],v+=Kt}var bn=g[ks(l,v)&lt],En=bn>>>4;if(!bn)throw"invalid distance";v+=bn&15;var ut=lm[En];if(En>3){var Kt=il[En];ut+=ks(l,v)&(1<<Kt)-1,v+=Kt}if(v>R){if(u)throw"unexpected EOF";break}s&&c(w+131072);for(var mt=w+Oe;w<mt;w+=4)r[w]=r[w-ut],r[w+1]=r[w+1-ut],r[w+2]=r[w+2-ut],r[w+3]=r[w+3-ut];w=mt}}n.l=y,n.p=Cn,n.b=w,y&&(d=1,n.m=A,n.d=g,n.n=C)}while(!d);return w==r.length?r:pm(r,0,w)},gm=new Qe(0),vm=function(l){if((l[0]&15)!=8||l[0]>>>4>7||(l[0]<<8|l[1])%31)throw"invalid zlib data";if(l[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function mm(l,r){return dm((vm(l),l.subarray(2,-4)),r)}var _m=typeof TextDecoder<"u"&&new TextDecoder,wm=0;try{_m.decode(gm,{stream:!0}),wm=1}catch{}function ll(l,r,n){const a=n.length-l-1;if(r>=n[a])return a-1;if(r<=n[l])return l;let s=l,u=a,c=Math.floor((s+u)/2);for(;r<n[c]||r>=n[c+1];)r<n[c]?u=c:s=c,c=Math.floor((s+u)/2);return c}function ym(l,r,n,a){const s=[],u=[],c=[];s[0]=1;for(let d=1;d<=n;++d){u[d]=r-a[l+1-d],c[d]=a[l+d]-r;let v=0;for(let w=0;w<d;++w){const y=c[w+1],g=u[d-w],A=s[w]/(y+g);s[w]=v+y*A,v=g*A}s[d]=v}return s}function xm(l,r,n,a){const s=ll(l,a,r),u=ym(s,a,l,r),c=new li(0,0,0,0);for(let d=0;d<=l;++d){const v=n[s-l+d],w=u[d],y=v.w*w;c.x+=v.x*y,c.y+=v.y*y,c.z+=v.z*y,c.w+=v.w*w}return c}function Tm(l,r,n,a,s){const u=[];for(let g=0;g<=n;++g)u[g]=0;const c=[];for(let g=0;g<=a;++g)c[g]=u.slice(0);const d=[];for(let g=0;g<=n;++g)d[g]=u.slice(0);d[0][0]=1;const v=u.slice(0),w=u.slice(0);for(let g=1;g<=n;++g){v[g]=r-s[l+1-g],w[g]=s[l+g]-r;let A=0;for(let C=0;C<g;++C){const R=w[C+1],M=v[g-C];d[g][C]=R+M;const L=d[C][g-1]/d[g][C];d[C][g]=A+R*L,A=M*L}d[g][g]=A}for(let g=0;g<=n;++g)c[0][g]=d[g][n];for(let g=0;g<=n;++g){let A=0,C=1;const R=[];for(let M=0;M<=n;++M)R[M]=u.slice(0);R[0][0]=1;for(let M=1;M<=a;++M){let L=0;const U=g-M,H=n-M;g>=M&&(R[C][0]=R[A][0]/d[H+1][U],L=R[C][0]*d[U][H]);const W=U>=-1?1:-U,j=g-1<=H?M-1:n-g;for(let G=W;G<=j;++G)R[C][G]=(R[A][G]-R[A][G-1])/d[H+1][U+G],L+=R[C][G]*d[U+G][H];g<=H&&(R[C][M]=-R[A][M-1]/d[H+1][g],L+=R[C][M]*d[g][H]),c[M][g]=L;const ae=A;A=C,C=ae}}let y=n;for(let g=1;g<=a;++g){for(let A=0;A<=n;++A)c[g][A]*=y;y*=n-g}return c}function Am(l,r,n,a,s){const u=s<l?s:l,c=[],d=ll(l,a,r),v=Tm(d,a,l,u,r),w=[];for(let y=0;y<n.length;++y){const g=n[y].clone(),A=g.w;g.x*=A,g.y*=A,g.z*=A,w[y]=g}for(let y=0;y<=u;++y){const g=w[d-l].clone().multiplyScalar(v[y][0]);for(let A=1;A<=l;++A)g.add(w[d-l+A].clone().multiplyScalar(v[y][A]));c[y]=g}for(let y=u+1;y<=s+1;++y)c[y]=new li(0,0,0);return c}function Im(l,r){let n=1;for(let s=2;s<=l;++s)n*=s;let a=1;for(let s=2;s<=r;++s)a*=s;for(let s=2;s<=l-r;++s)a*=s;return n/a}function Sm(l){const r=l.length,n=[],a=[];for(let u=0;u<r;++u){const c=l[u];n[u]=new De(c.x,c.y,c.z),a[u]=c.w}const s=[];for(let u=0;u<r;++u){const c=n[u].clone();for(let d=1;d<=u;++d)c.sub(s[u-d].clone().multiplyScalar(Im(u,d)*a[d]));s[u]=c.divideScalar(a[0])}return s}function Cm(l,r,n,a,s){const u=Am(l,r,n,a,s);return Sm(u)}class bm extends uv{constructor(r,n,a,s,u){super(),this.degree=r,this.knots=n,this.controlPoints=[],this.startKnot=s||0,this.endKnot=u||this.knots.length-1;for(let c=0;c<a.length;++c){const d=a[c];this.controlPoints[c]=new li(d.x,d.y,d.z,d.w)}}getPoint(r,n=new De){const a=n,s=this.knots[this.startKnot]+r*(this.knots[this.endKnot]-this.knots[this.startKnot]),u=xm(this.degree,this.knots,this.controlPoints,s);return u.w!==1&&u.divideScalar(u.w),a.set(u.x,u.y,u.z)}getTangent(r,n=new De){const a=n,s=this.knots[0]+r*(this.knots[this.knots.length-1]-this.knots[0]),u=Cm(this.degree,this.knots,this.controlPoints,s,1);return a.copy(u[1]).normalize(),a}}let Z,ve,Fe;class Em extends Yu{constructor(r){super(r)}load(r,n,a,s){const u=this,c=u.path===""?lv.extractUrlBase(r):u.path,d=new qu(this.manager);d.setPath(u.path),d.setResponseType("arraybuffer"),d.setRequestHeader(u.requestHeader),d.setWithCredentials(u.withCredentials),d.load(r,function(v){try{n(u.parse(v,c))}catch(w){s?s(w):console.error(w),u.manager.itemError(r)}},a,s)}parse(r,n){if(Dm(r))Z=new Fm().parse(r);else{const s=pl(r);if(!Om(s))throw new Error("THREE.FBXLoader: Unknown format.");if(Vu(s)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Vu(s));Z=new Mm().parse(s)}const a=new ui(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new Rm(a,this.manager).parse(Z)}}class Rm{constructor(r,n){this.textureLoader=r,this.manager=n}parse(){ve=this.parseConnections();const r=this.parseImages(),n=this.parseTextures(r),a=this.parseMaterials(n),s=this.parseDeformers(),u=new Pm().parse(s);return this.parseScene(s,u,a),Fe}parseConnections(){const r=new Map;return"Connections"in Z&&Z.Connections.connections.forEach(function(a){const s=a[0],u=a[1],c=a[2];r.has(s)||r.set(s,{parents:[],children:[]});const d={ID:u,relationship:c};r.get(s).parents.push(d),r.has(u)||r.set(u,{parents:[],children:[]});const v={ID:s,relationship:c};r.get(u).children.push(v)}),r}parseImages(){const r={},n={};if("Video"in Z.Objects){const a=Z.Objects.Video;for(const s in a){const u=a[s],c=parseInt(s);if(r[c]=u.RelativeFilename||u.Filename,"Content"in u){const d=u.Content instanceof ArrayBuffer&&u.Content.byteLength>0,v=typeof u.Content=="string"&&u.Content!=="";if(d||v){const w=this.parseImage(a[s]);n[u.RelativeFilename||u.Filename]=w}}}}for(const a in r){const s=r[a];n[s]!==void 0?r[a]=n[s]:r[a]=r[a].split("\\").pop()}return r}parseImage(r){const n=r.Content,a=r.RelativeFilename||r.Filename,s=a.slice(a.lastIndexOf(".")+1).toLowerCase();let u;switch(s){case"bmp":u="image/bmp";break;case"jpg":case"jpeg":u="image/jpeg";break;case"png":u="image/png";break;case"tif":u="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",a),u="image/tga";break;default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof n=="string")return"data:"+u+";base64,"+n;{const c=new Uint8Array(n);return window.URL.createObjectURL(new Blob([c],{type:u}))}}parseTextures(r){const n=new Map;if("Texture"in Z.Objects){const a=Z.Objects.Texture;for(const s in a){const u=this.parseTexture(a[s],r);n.set(parseInt(s),u)}}return n}parseTexture(r,n){const a=this.loadTexture(r,n);a.ID=r.id,a.name=r.attrName;const s=r.WrapModeU,u=r.WrapModeV,c=s!==void 0?s.value:0,d=u!==void 0?u.value:0;if(a.wrapS=c===0?Pu:Lu,a.wrapT=d===0?Pu:Lu,"Scaling"in r){const v=r.Scaling.value;a.repeat.x=v[0],a.repeat.y=v[1]}if("Translation"in r){const v=r.Translation.value;a.offset.x=v[0],a.offset.y=v[1]}return a}loadTexture(r,n){let a;const s=this.textureLoader.path,u=ve.get(r.id).children;u!==void 0&&u.length>0&&n[u[0].ID]!==void 0&&(a=n[u[0].ID],(a.indexOf("blob:")===0||a.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let c;const d=r.FileName.slice(-3).toLowerCase();if(d==="tga"){const v=this.manager.getHandler(".tga");v===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",r.RelativeFilename),c=new Mu):(v.setPath(this.textureLoader.path),c=v.load(a))}else d==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",r.RelativeFilename),c=new Mu):c=this.textureLoader.load(a);return this.textureLoader.setPath(s),c}parseMaterials(r){const n=new Map;if("Material"in Z.Objects){const a=Z.Objects.Material;for(const s in a){const u=this.parseMaterial(a[s],r);u!==null&&n.set(parseInt(s),u)}}return n}parseMaterial(r,n){const a=r.id,s=r.attrName;let u=r.ShadingModel;if(typeof u=="object"&&(u=u.value),!ve.has(a))return null;const c=this.parseParameters(r,n,a);let d;switch(u.toLowerCase()){case"phong":d=new ni;break;case"lambert":d=new fv;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',u),d=new ni;break}return d.setValues(c),d.name=s,d}parseParameters(r,n,a){const s={};r.BumpFactor&&(s.bumpScale=r.BumpFactor.value),r.Diffuse?s.color=new pt().fromArray(r.Diffuse.value):r.DiffuseColor&&(r.DiffuseColor.type==="Color"||r.DiffuseColor.type==="ColorRGB")&&(s.color=new pt().fromArray(r.DiffuseColor.value)),r.DisplacementFactor&&(s.displacementScale=r.DisplacementFactor.value),r.Emissive?s.emissive=new pt().fromArray(r.Emissive.value):r.EmissiveColor&&(r.EmissiveColor.type==="Color"||r.EmissiveColor.type==="ColorRGB")&&(s.emissive=new pt().fromArray(r.EmissiveColor.value)),r.EmissiveFactor&&(s.emissiveIntensity=parseFloat(r.EmissiveFactor.value)),r.Opacity&&(s.opacity=parseFloat(r.Opacity.value)),s.opacity<1&&(s.transparent=!0),r.ReflectionFactor&&(s.reflectivity=r.ReflectionFactor.value),r.Shininess&&(s.shininess=r.Shininess.value),r.Specular?s.specular=new pt().fromArray(r.Specular.value):r.SpecularColor&&r.SpecularColor.type==="Color"&&(s.specular=new pt().fromArray(r.SpecularColor.value));const u=this;return ve.get(a).children.forEach(function(c){const d=c.relationship;switch(d){case"Bump":s.bumpMap=u.getTexture(n,c.ID);break;case"Maya|TEX_ao_map":s.aoMap=u.getTexture(n,c.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=u.getTexture(n,c.ID),s.map!==void 0&&(s.map.encoding=Qr);break;case"DisplacementColor":s.displacementMap=u.getTexture(n,c.ID);break;case"EmissiveColor":s.emissiveMap=u.getTexture(n,c.ID),s.emissiveMap!==void 0&&(s.emissiveMap.encoding=Qr);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=u.getTexture(n,c.ID);break;case"ReflectionColor":s.envMap=u.getTexture(n,c.ID),s.envMap!==void 0&&(s.envMap.mapping=cv,s.envMap.encoding=Qr);break;case"SpecularColor":s.specularMap=u.getTexture(n,c.ID),s.specularMap!==void 0&&(s.specularMap.encoding=Qr);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=u.getTexture(n,c.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",d);break}}),s}getTexture(r,n){return"LayeredTexture"in Z.Objects&&n in Z.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=ve.get(n).children[0].ID),r.get(n)}parseDeformers(){const r={},n={};if("Deformer"in Z.Objects){const a=Z.Objects.Deformer;for(const s in a){const u=a[s],c=ve.get(parseInt(s));if(u.attrType==="Skin"){const d=this.parseSkeleton(c,a);d.ID=s,c.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),d.geometryID=c.parents[0].ID,r[s]=d}else if(u.attrType==="BlendShape"){const d={id:s};d.rawTargets=this.parseMorphTargets(c,a),d.id=s,c.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[s]=d}}}return{skeletons:r,morphTargets:n}}parseSkeleton(r,n){const a=[];return r.children.forEach(function(s){const u=n[s.ID];if(u.attrType!=="Cluster")return;const c={ID:s.ID,indices:[],weights:[],transformLink:new ge().fromArray(u.TransformLink.a)};"Indexes"in u&&(c.indices=u.Indexes.a,c.weights=u.Weights.a),a.push(c)}),{rawBones:a,bones:[]}}parseMorphTargets(r,n){const a=[];for(let s=0;s<r.children.length;s++){const u=r.children[s],c=n[u.ID],d={name:c.attrName,initialWeight:c.DeformPercent,id:c.id,fullWeights:c.FullWeights.a};if(c.attrType!=="BlendShapeChannel")return;d.geoID=ve.get(parseInt(u.ID)).children.filter(function(v){return v.relationship===void 0})[0].ID,a.push(d)}return a}parseScene(r,n,a){Fe=new Hs;const s=this.parseModels(r.skeletons,n,a),u=Z.Objects.Model,c=this;s.forEach(function(v){const w=u[v.ID];c.setLookAtProperties(v,w),ve.get(v.ID).parents.forEach(function(g){const A=s.get(g.ID);A!==void 0&&A.add(v)}),v.parent===null&&Fe.add(v)}),this.bindSkeleton(r.skeletons,n,s),this.createAmbientLight(),Fe.traverse(function(v){if(v.userData.transformData){v.parent&&(v.userData.transformData.parentMatrix=v.parent.matrix,v.userData.transformData.parentMatrixWorld=v.parent.matrixWorld);const w=cl(v.userData.transformData);v.applyMatrix4(w),v.updateWorldMatrix()}});const d=new Lm().parse();Fe.children.length===1&&Fe.children[0].isGroup&&(Fe.children[0].animations=d,Fe=Fe.children[0]),Fe.animations=d}parseModels(r,n,a){const s=new Map,u=Z.Objects.Model;for(const c in u){const d=parseInt(c),v=u[c],w=ve.get(d);let y=this.buildSkeleton(w,r,d,v.attrName);if(!y){switch(v.attrType){case"Camera":y=this.createCamera(w);break;case"Light":y=this.createLight(w);break;case"Mesh":y=this.createMesh(w,n,a);break;case"NurbsCurve":y=this.createCurve(w,n);break;case"LimbNode":case"Root":y=new Fu;break;case"Null":default:y=new Hs;break}y.name=v.attrName?si.sanitizeNodeName(v.attrName):"",y.ID=d}this.getTransformData(y,v),s.set(d,y)}return s}buildSkeleton(r,n,a,s){let u=null;return r.parents.forEach(function(c){for(const d in n){const v=n[d];v.rawBones.forEach(function(w,y){if(w.ID===c.ID){const g=u;u=new Fu,u.matrixWorld.copy(w.transformLink),u.name=s?si.sanitizeNodeName(s):"",u.ID=a,v.bones[y]=u,g!==null&&u.add(g)}})}}),u}createCamera(r){let n,a;if(r.children.forEach(function(s){const u=Z.Objects.NodeAttribute[s.ID];u!==void 0&&(a=u)}),a===void 0)n=new Ls;else{let s=0;a.CameraProjectionType!==void 0&&a.CameraProjectionType.value===1&&(s=1);let u=1;a.NearPlane!==void 0&&(u=a.NearPlane.value/1e3);let c=1e3;a.FarPlane!==void 0&&(c=a.FarPlane.value/1e3);let d=window.innerWidth,v=window.innerHeight;a.AspectWidth!==void 0&&a.AspectHeight!==void 0&&(d=a.AspectWidth.value,v=a.AspectHeight.value);const w=d/v;let y=45;a.FieldOfView!==void 0&&(y=a.FieldOfView.value);const g=a.FocalLength?a.FocalLength.value:null;switch(s){case 0:n=new Zu(y,w,u,c),g!==null&&n.setFocalLength(g);break;case 1:n=new $u(-d/2,d/2,v/2,-v/2,u,c);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+s+"."),n=new Ls;break}}return n}createLight(r){let n,a;if(r.children.forEach(function(s){const u=Z.Objects.NodeAttribute[s.ID];u!==void 0&&(a=u)}),a===void 0)n=new Ls;else{let s;a.LightType===void 0?s=0:s=a.LightType.value;let u=16777215;a.Color!==void 0&&(u=new pt().fromArray(a.Color.value));let c=a.Intensity===void 0?1:a.Intensity.value/100;a.CastLightOnObject!==void 0&&a.CastLightOnObject.value===0&&(c=0);let d=0;a.FarAttenuationEnd!==void 0&&(a.EnableFarAttenuation!==void 0&&a.EnableFarAttenuation.value===0?d=0:d=a.FarAttenuationEnd.value);const v=1;switch(s){case 0:n=new Du(u,c,d,v);break;case 1:n=new pv(u,c);break;case 2:let w=Math.PI/3;a.InnerAngle!==void 0&&(w=dt.degToRad(a.InnerAngle.value));let y=0;a.OuterAngle!==void 0&&(y=dt.degToRad(a.OuterAngle.value),y=Math.max(y,1)),n=new hv(u,c,d,w,y,v);break;default:console.warn("THREE.FBXLoader: Unknown light type "+a.LightType.value+", defaulting to a PointLight."),n=new Du(u,c);break}a.CastShadows!==void 0&&a.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(r,n,a){let s,u=null,c=null;const d=[];return r.children.forEach(function(v){n.has(v.ID)&&(u=n.get(v.ID)),a.has(v.ID)&&d.push(a.get(v.ID))}),d.length>1?c=d:d.length>0?c=d[0]:(c=new ni({color:13421772}),d.push(c)),"color"in u.attributes&&d.forEach(function(v){v.vertexColors=!0}),u.FBX_Deformer?(s=new dv(u,c),s.normalizeSkinWeights()):s=new ri(u,c),s}createCurve(r,n){const a=r.children.reduce(function(u,c){return n.has(c.ID)&&(u=n.get(c.ID)),u},null),s=new ti({color:3342591,linewidth:1});return new gv(a,s)}getTransformData(r,n){const a={};"InheritType"in n&&(a.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?a.eulerOrder=hl(n.RotationOrder.value):a.eulerOrder="ZYX","Lcl_Translation"in n&&(a.translation=n.Lcl_Translation.value),"PreRotation"in n&&(a.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(a.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(a.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(a.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(a.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(a.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(a.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(a.rotationPivot=n.RotationPivot.value),r.userData.transformData=a}setLookAtProperties(r,n){"LookAtProperty"in n&&ve.get(r.ID).children.forEach(function(s){if(s.relationship==="LookAtProperty"){const u=Z.Objects.Model[s.ID];if("Lcl_Translation"in u){const c=u.Lcl_Translation.value;r.target!==void 0?(r.target.position.fromArray(c),Fe.add(r.target)):r.lookAt(new De().fromArray(c))}}})}bindSkeleton(r,n,a){const s=this.parsePoseNodes();for(const u in r){const c=r[u];ve.get(parseInt(c.ID)).parents.forEach(function(v){if(n.has(v.ID)){const w=v.ID;ve.get(w).parents.forEach(function(g){a.has(g.ID)&&a.get(g.ID).bind(new vv(c.bones),s[g.ID])})}})}}parsePoseNodes(){const r={};if("Pose"in Z.Objects){const n=Z.Objects.Pose;for(const a in n)if(n[a].attrType==="BindPose"&&n[a].NbPoseNodes>0){const s=n[a].PoseNode;Array.isArray(s)?s.forEach(function(u){r[u.Node]=new ge().fromArray(u.Matrix.a)}):r[s.Node]=new ge().fromArray(s.Matrix.a)}}return r}createAmbientLight(){if("GlobalSettings"in Z&&"AmbientColor"in Z.GlobalSettings){const r=Z.GlobalSettings.AmbientColor.value,n=r[0],a=r[1],s=r[2];if(n!==0||a!==0||s!==0){const u=new pt(n,a,s);Fe.add(new mv(u,1))}}}}class Pm{constructor(){this.negativeMaterialIndices=!1}parse(r){const n=new Map;if("Geometry"in Z.Objects){const a=Z.Objects.Geometry;for(const s in a){const u=ve.get(parseInt(s)),c=this.parseGeometry(u,a[s],r);n.set(parseInt(s),c)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),n}parseGeometry(r,n,a){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(r,n,a);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(r,n,a){const s=a.skeletons,u=[],c=r.parents.map(function(g){return Z.Objects.Model[g.ID]});if(c.length===0)return;const d=r.children.reduce(function(g,A){return s[A.ID]!==void 0&&(g=s[A.ID]),g},null);r.children.forEach(function(g){a.morphTargets[g.ID]!==void 0&&u.push(a.morphTargets[g.ID])});const v=c[0],w={};"RotationOrder"in v&&(w.eulerOrder=hl(v.RotationOrder.value)),"InheritType"in v&&(w.inheritType=parseInt(v.InheritType.value)),"GeometricTranslation"in v&&(w.translation=v.GeometricTranslation.value),"GeometricRotation"in v&&(w.rotation=v.GeometricRotation.value),"GeometricScaling"in v&&(w.scale=v.GeometricScaling.value);const y=cl(w);return this.genGeometry(n,d,u,y)}genGeometry(r,n,a,s){const u=new Je;r.attrName&&(u.name=r.attrName);const c=this.parseGeoNode(r,n),d=this.genBuffers(c),v=new ye(d.vertex,3);if(v.applyMatrix4(s),u.setAttribute("position",v),d.colors.length>0&&u.setAttribute("color",new ye(d.colors,3)),n&&(u.setAttribute("skinIndex",new _v(d.weightsIndices,4)),u.setAttribute("skinWeight",new ye(d.vertexWeights,4)),u.FBX_Deformer=n),d.normal.length>0){const w=new wv().getNormalMatrix(s),y=new ye(d.normal,3);y.applyNormalMatrix(w),u.setAttribute("normal",y)}if(d.uvs.forEach(function(w,y){let g="uv"+(y+1).toString();y===0&&(g="uv"),u.setAttribute(g,new ye(d.uvs[y],2))}),c.material&&c.material.mappingType!=="AllSame"){let w=d.materialIndex[0],y=0;if(d.materialIndex.forEach(function(g,A){g!==w&&(u.addGroup(y,A-y,w),w=g,y=A)}),u.groups.length>0){const g=u.groups[u.groups.length-1],A=g.start+g.count;A!==d.materialIndex.length&&u.addGroup(A,d.materialIndex.length-A,w)}u.groups.length===0&&u.addGroup(0,d.materialIndex.length,d.materialIndex[0])}return this.addMorphTargets(u,r,a,s),u}parseGeoNode(r,n){const a={};if(a.vertexPositions=r.Vertices!==void 0?r.Vertices.a:[],a.vertexIndices=r.PolygonVertexIndex!==void 0?r.PolygonVertexIndex.a:[],r.LayerElementColor&&(a.color=this.parseVertexColors(r.LayerElementColor[0])),r.LayerElementMaterial&&(a.material=this.parseMaterialIndices(r.LayerElementMaterial[0])),r.LayerElementNormal&&(a.normal=this.parseNormals(r.LayerElementNormal[0])),r.LayerElementUV){a.uv=[];let s=0;for(;r.LayerElementUV[s];)r.LayerElementUV[s].UV&&a.uv.push(this.parseUVs(r.LayerElementUV[s])),s++}return a.weightTable={},n!==null&&(a.skeleton=n,n.rawBones.forEach(function(s,u){s.indices.forEach(function(c,d){a.weightTable[c]===void 0&&(a.weightTable[c]=[]),a.weightTable[c].push({id:u,weight:s.weights[d]})})})),a}genBuffers(r){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let a=0,s=0,u=!1,c=[],d=[],v=[],w=[],y=[],g=[];const A=this;return r.vertexIndices.forEach(function(C,R){let M,L=!1;C<0&&(C=C^-1,L=!0);let U=[],H=[];if(c.push(C*3,C*3+1,C*3+2),r.color){const W=ei(R,a,C,r.color);v.push(W[0],W[1],W[2])}if(r.skeleton){if(r.weightTable[C]!==void 0&&r.weightTable[C].forEach(function(W){H.push(W.weight),U.push(W.id)}),H.length>4){u||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),u=!0);const W=[0,0,0,0],j=[0,0,0,0];H.forEach(function(ae,G){let ee=ae,fe=U[G];j.forEach(function(je,xe,Xt){if(ee>je){Xt[xe]=ee,ee=je;const Et=W[xe];W[xe]=fe,fe=Et}})}),U=W,H=j}for(;H.length<4;)H.push(0),U.push(0);for(let W=0;W<4;++W)y.push(H[W]),g.push(U[W])}if(r.normal){const W=ei(R,a,C,r.normal);d.push(W[0],W[1],W[2])}r.material&&r.material.mappingType!=="AllSame"&&(M=ei(R,a,C,r.material)[0],M<0&&(A.negativeMaterialIndices=!0,M=0)),r.uv&&r.uv.forEach(function(W,j){const ae=ei(R,a,C,W);w[j]===void 0&&(w[j]=[]),w[j].push(ae[0]),w[j].push(ae[1])}),s++,L&&(s>4&&console.warn("THREE.FBXLoader: Polygons with more than four sides are not supported. Make sure to triangulate the geometry during export."),A.genFace(n,r,c,M,d,v,w,y,g,s),a++,s=0,c=[],d=[],v=[],w=[],y=[],g=[])}),n}genFace(r,n,a,s,u,c,d,v,w,y){for(let g=2;g<y;g++)r.vertex.push(n.vertexPositions[a[0]]),r.vertex.push(n.vertexPositions[a[1]]),r.vertex.push(n.vertexPositions[a[2]]),r.vertex.push(n.vertexPositions[a[(g-1)*3]]),r.vertex.push(n.vertexPositions[a[(g-1)*3+1]]),r.vertex.push(n.vertexPositions[a[(g-1)*3+2]]),r.vertex.push(n.vertexPositions[a[g*3]]),r.vertex.push(n.vertexPositions[a[g*3+1]]),r.vertex.push(n.vertexPositions[a[g*3+2]]),n.skeleton&&(r.vertexWeights.push(v[0]),r.vertexWeights.push(v[1]),r.vertexWeights.push(v[2]),r.vertexWeights.push(v[3]),r.vertexWeights.push(v[(g-1)*4]),r.vertexWeights.push(v[(g-1)*4+1]),r.vertexWeights.push(v[(g-1)*4+2]),r.vertexWeights.push(v[(g-1)*4+3]),r.vertexWeights.push(v[g*4]),r.vertexWeights.push(v[g*4+1]),r.vertexWeights.push(v[g*4+2]),r.vertexWeights.push(v[g*4+3]),r.weightsIndices.push(w[0]),r.weightsIndices.push(w[1]),r.weightsIndices.push(w[2]),r.weightsIndices.push(w[3]),r.weightsIndices.push(w[(g-1)*4]),r.weightsIndices.push(w[(g-1)*4+1]),r.weightsIndices.push(w[(g-1)*4+2]),r.weightsIndices.push(w[(g-1)*4+3]),r.weightsIndices.push(w[g*4]),r.weightsIndices.push(w[g*4+1]),r.weightsIndices.push(w[g*4+2]),r.weightsIndices.push(w[g*4+3])),n.color&&(r.colors.push(c[0]),r.colors.push(c[1]),r.colors.push(c[2]),r.colors.push(c[(g-1)*3]),r.colors.push(c[(g-1)*3+1]),r.colors.push(c[(g-1)*3+2]),r.colors.push(c[g*3]),r.colors.push(c[g*3+1]),r.colors.push(c[g*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(r.materialIndex.push(s),r.materialIndex.push(s),r.materialIndex.push(s)),n.normal&&(r.normal.push(u[0]),r.normal.push(u[1]),r.normal.push(u[2]),r.normal.push(u[(g-1)*3]),r.normal.push(u[(g-1)*3+1]),r.normal.push(u[(g-1)*3+2]),r.normal.push(u[g*3]),r.normal.push(u[g*3+1]),r.normal.push(u[g*3+2])),n.uv&&n.uv.forEach(function(A,C){r.uvs[C]===void 0&&(r.uvs[C]=[]),r.uvs[C].push(d[C][0]),r.uvs[C].push(d[C][1]),r.uvs[C].push(d[C][(g-1)*2]),r.uvs[C].push(d[C][(g-1)*2+1]),r.uvs[C].push(d[C][g*2]),r.uvs[C].push(d[C][g*2+1])})}addMorphTargets(r,n,a,s){if(a.length===0)return;r.morphTargetsRelative=!0,r.morphAttributes.position=[];const u=this;a.forEach(function(c){c.rawTargets.forEach(function(d){const v=Z.Objects.Geometry[d.geoID];v!==void 0&&u.genMorphGeometry(r,n,v,s,d.name)})})}genMorphGeometry(r,n,a,s,u){const c=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],d=a.Vertices!==void 0?a.Vertices.a:[],v=a.Indexes!==void 0?a.Indexes.a:[],w=r.attributes.position.count*3,y=new Float32Array(w);for(let R=0;R<v.length;R++){const M=v[R]*3;y[M]=d[R*3],y[M+1]=d[R*3+1],y[M+2]=d[R*3+2]}const g={vertexIndices:c,vertexPositions:y},A=this.genBuffers(g),C=new ye(A.vertex,3);C.name=u||a.attrName,C.applyMatrix4(s),r.morphAttributes.position.push(C)}parseNormals(r){const n=r.MappingInformationType,a=r.ReferenceInformationType,s=r.Normals.a;let u=[];return a==="IndexToDirect"&&("NormalIndex"in r?u=r.NormalIndex.a:"NormalsIndex"in r&&(u=r.NormalsIndex.a)),{dataSize:3,buffer:s,indices:u,mappingType:n,referenceType:a}}parseUVs(r){const n=r.MappingInformationType,a=r.ReferenceInformationType,s=r.UV.a;let u=[];return a==="IndexToDirect"&&(u=r.UVIndex.a),{dataSize:2,buffer:s,indices:u,mappingType:n,referenceType:a}}parseVertexColors(r){const n=r.MappingInformationType,a=r.ReferenceInformationType,s=r.Colors.a;let u=[];return a==="IndexToDirect"&&(u=r.ColorIndex.a),{dataSize:4,buffer:s,indices:u,mappingType:n,referenceType:a}}parseMaterialIndices(r){const n=r.MappingInformationType,a=r.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:a};const s=r.Materials.a,u=[];for(let c=0;c<s.length;++c)u.push(c);return{dataSize:1,buffer:s,indices:u,mappingType:n,referenceType:a}}parseNurbsGeometry(r){const n=parseInt(r.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",r.Order,r.id),new Je;const a=n-1,s=r.KnotVector.a,u=[],c=r.Points.a;for(let g=0,A=c.length;g<A;g+=4)u.push(new li().fromArray(c,g));let d,v;if(r.Form==="Closed")u.push(u[0]);else if(r.Form==="Periodic"){d=a,v=s.length-1-d;for(let g=0;g<a;++g)u.push(u[g])}const y=new bm(a,s,u,d,v).getPoints(u.length*12);return new Je().setFromPoints(y)}}class Lm{parse(){const r=[],n=this.parseClips();if(n!==void 0)for(const a in n){const s=n[a],u=this.addClip(s);r.push(u)}return r}parseClips(){if(Z.Objects.AnimationCurve===void 0)return;const r=this.parseAnimationCurveNodes();this.parseAnimationCurves(r);const n=this.parseAnimationLayers(r);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const r=Z.Objects.AnimationCurveNode,n=new Map;for(const a in r){const s=r[a];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const u={id:s.id,attr:s.attrName,curves:{}};n.set(u.id,u)}}return n}parseAnimationCurves(r){const n=Z.Objects.AnimationCurve;for(const a in n){const s={id:n[a].id,times:n[a].KeyTime.a.map(Um),values:n[a].KeyValueFloat.a},u=ve.get(s.id);if(u!==void 0){const c=u.parents[0].ID,d=u.parents[0].relationship;d.match(/X/)?r.get(c).curves.x=s:d.match(/Y/)?r.get(c).curves.y=s:d.match(/Z/)?r.get(c).curves.z=s:d.match(/d|DeformPercent/)&&r.has(c)&&(r.get(c).curves.morph=s)}}}parseAnimationLayers(r){const n=Z.Objects.AnimationLayer,a=new Map;for(const s in n){const u=[],c=ve.get(parseInt(s));c!==void 0&&(c.children.forEach(function(v,w){if(r.has(v.ID)){const y=r.get(v.ID);if(y.curves.x!==void 0||y.curves.y!==void 0||y.curves.z!==void 0){if(u[w]===void 0){const g=ve.get(v.ID).parents.filter(function(A){return A.relationship!==void 0})[0].ID;if(g!==void 0){const A=Z.Objects.Model[g.toString()];if(A===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",v);return}const C={modelName:A.attrName?si.sanitizeNodeName(A.attrName):"",ID:A.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Fe.traverse(function(R){R.ID===A.id&&(C.transform=R.matrix,R.userData.transformData&&(C.eulerOrder=R.userData.transformData.eulerOrder))}),C.transform||(C.transform=new ge),"PreRotation"in A&&(C.preRotation=A.PreRotation.value),"PostRotation"in A&&(C.postRotation=A.PostRotation.value),u[w]=C}}u[w]&&(u[w][y.attr]=y)}else if(y.curves.morph!==void 0){if(u[w]===void 0){const g=ve.get(v.ID).parents.filter(function(U){return U.relationship!==void 0})[0].ID,A=ve.get(g).parents[0].ID,C=ve.get(A).parents[0].ID,R=ve.get(C).parents[0].ID,M=Z.Objects.Model[R],L={modelName:M.attrName?si.sanitizeNodeName(M.attrName):"",morphName:Z.Objects.Deformer[g].attrName};u[w]=L}u[w][y.attr]=y}}}),a.set(parseInt(s),u))}return a}parseAnimStacks(r){const n=Z.Objects.AnimationStack,a={};for(const s in n){const u=ve.get(parseInt(s)).children;u.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const c=r.get(u[0].ID);a[s]={name:n[s].attrName,layer:c}}return a}addClip(r){let n=[];const a=this;return r.layer.forEach(function(s){n=n.concat(a.generateTracks(s))}),new yv(r.name,-1,n)}generateTracks(r){const n=[];let a=new De,s=new Jr,u=new De;if(r.transform&&r.transform.decompose(a,s,u),a=a.toArray(),s=new Gt().setFromQuaternion(s,r.eulerOrder).toArray(),u=u.toArray(),r.T!==void 0&&Object.keys(r.T.curves).length>0){const c=this.generateVectorTrack(r.modelName,r.T.curves,a,"position");c!==void 0&&n.push(c)}if(r.R!==void 0&&Object.keys(r.R.curves).length>0){const c=this.generateRotationTrack(r.modelName,r.R.curves,s,r.preRotation,r.postRotation,r.eulerOrder);c!==void 0&&n.push(c)}if(r.S!==void 0&&Object.keys(r.S.curves).length>0){const c=this.generateVectorTrack(r.modelName,r.S.curves,u,"scale");c!==void 0&&n.push(c)}if(r.DeformPercent!==void 0){const c=this.generateMorphTrack(r);c!==void 0&&n.push(c)}return n}generateVectorTrack(r,n,a,s){const u=this.getTimesForAllAxes(n),c=this.getKeyframeTrackValues(u,n,a);return new xv(r+"."+s,u,c)}generateRotationTrack(r,n,a,s,u,c){n.x!==void 0&&(this.interpolateRotations(n.x),n.x.values=n.x.values.map(dt.degToRad)),n.y!==void 0&&(this.interpolateRotations(n.y),n.y.values=n.y.values.map(dt.degToRad)),n.z!==void 0&&(this.interpolateRotations(n.z),n.z.values=n.z.values.map(dt.degToRad));const d=this.getTimesForAllAxes(n),v=this.getKeyframeTrackValues(d,n,a);s!==void 0&&(s=s.map(dt.degToRad),s.push(c),s=new Gt().fromArray(s),s=new Jr().setFromEuler(s)),u!==void 0&&(u=u.map(dt.degToRad),u.push(c),u=new Gt().fromArray(u),u=new Jr().setFromEuler(u).invert());const w=new Jr,y=new Gt,g=[];for(let A=0;A<v.length;A+=3)y.set(v[A],v[A+1],v[A+2],c),w.setFromEuler(y),s!==void 0&&w.premultiply(s),u!==void 0&&w.multiply(u),w.toArray(g,A/3*4);return new Tv(r+".quaternion",d,g)}generateMorphTrack(r){const n=r.DeformPercent.curves.morph,a=n.values.map(function(u){return u/100}),s=Fe.getObjectByName(r.modelName).morphTargetDictionary[r.morphName];return new Av(r.modelName+".morphTargetInfluences["+s+"]",n.times,a)}getTimesForAllAxes(r){let n=[];if(r.x!==void 0&&(n=n.concat(r.x.times)),r.y!==void 0&&(n=n.concat(r.y.times)),r.z!==void 0&&(n=n.concat(r.z.times)),n=n.sort(function(a,s){return a-s}),n.length>1){let a=1,s=n[0];for(let u=1;u<n.length;u++){const c=n[u];c!==s&&(n[a]=c,s=c,a++)}n=n.slice(0,a)}return n}getKeyframeTrackValues(r,n,a){const s=a,u=[];let c=-1,d=-1,v=-1;return r.forEach(function(w){if(n.x&&(c=n.x.times.indexOf(w)),n.y&&(d=n.y.times.indexOf(w)),n.z&&(v=n.z.times.indexOf(w)),c!==-1){const y=n.x.values[c];u.push(y),s[0]=y}else u.push(s[0]);if(d!==-1){const y=n.y.values[d];u.push(y),s[1]=y}else u.push(s[1]);if(v!==-1){const y=n.z.values[v];u.push(y),s[2]=y}else u.push(s[2])}),u}interpolateRotations(r){for(let n=1;n<r.values.length;n++){const a=r.values[n-1],s=r.values[n]-a,u=Math.abs(s);if(u>=180){const c=u/180,d=s/c;let v=a+d;const w=r.times[n-1],g=(r.times[n]-w)/c;let A=w+g;const C=[],R=[];for(;A<r.times[n];)C.push(A),A+=g,R.push(v),v+=d;r.times=Ku(r.times,n,C),r.values=Ku(r.values,n,R)}}}}class Mm{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(r){this.nodeStack.push(r),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(r,n){this.currentProp=r,this.currentPropName=n}parse(r){this.currentIndent=0,this.allNodes=new fl,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,a=r.split(/[\r\n]+/);return a.forEach(function(s,u){const c=s.match(/^[\s\t]*;/),d=s.match(/^[\s\t]*$/);if(c||d)return;const v=s.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),w=s.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),y=s.match("^\\t{"+(n.currentIndent-1)+"}}");v?n.parseNodeBegin(s,v):w?n.parseNodeProperty(s,w,a[++u]):y?n.popStack():s.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(s)}),this.allNodes}parseNodeBegin(r,n){const a=n[1].trim().replace(/^"/,"").replace(/"$/,""),s=n[2].split(",").map(function(v){return v.trim().replace(/^"/,"").replace(/"$/,"")}),u={name:a},c=this.parseNodeAttr(s),d=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(a,u):a in d?(a==="PoseNode"?d.PoseNode.push(u):d[a].id!==void 0&&(d[a]={},d[a][d[a].id]=d[a]),c.id!==""&&(d[a][c.id]=u)):typeof c.id=="number"?(d[a]={},d[a][c.id]=u):a!=="Properties70"&&(a==="PoseNode"?d[a]=[u]:d[a]=u),typeof c.id=="number"&&(u.id=c.id),c.name!==""&&(u.attrName=c.name),c.type!==""&&(u.attrType=c.type),this.pushStack(u)}parseNodeAttr(r){let n=r[0];r[0]!==""&&(n=parseInt(r[0]),isNaN(n)&&(n=r[0]));let a="",s="";return r.length>1&&(a=r[1].replace(/^(\w+)::/,""),s=r[2]),{id:n,name:a,type:s}}parseNodeProperty(r,n,a){let s=n[1].replace(/^"/,"").replace(/"$/,"").trim(),u=n[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&u===","&&(u=a.replace(/"/g,"").replace(/,$/,"").trim());const c=this.getCurrentNode();if(c.name==="Properties70"){this.parseNodeSpecialProperty(r,s,u);return}if(s==="C"){const v=u.split(",").slice(1),w=parseInt(v[0]),y=parseInt(v[1]);let g=u.split(",").slice(3);g=g.map(function(A){return A.trim().replace(/^"/,"")}),s="connections",u=[w,y],Wm(u,g),c[s]===void 0&&(c[s]=[])}s==="Node"&&(c.id=u),s in c&&Array.isArray(c[s])?c[s].push(u):s!=="a"?c[s]=u:c.a=u,this.setCurrentProp(c,s),s==="a"&&u.slice(-1)!==","&&(c.a=Gs(u))}parseNodePropertyContinued(r){const n=this.getCurrentNode();n.a+=r,r.slice(-1)!==","&&(n.a=Gs(n.a))}parseNodeSpecialProperty(r,n,a){const s=a.split('",').map(function(y){return y.trim().replace(/^\"/,"").replace(/\s/,"_")}),u=s[0],c=s[1],d=s[2],v=s[3];let w=s[4];switch(c){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":w=parseFloat(w);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":w=Gs(w);break}this.getPrevNode()[u]={type:c,type2:d,flag:v,value:w},this.setCurrentProp(this.getPrevNode(),u)}}class Fm{parse(r){const n=new Xu(r);n.skip(23);const a=n.getUint32();if(a<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+a);const s=new fl;for(;!this.endOfContent(n);){const u=this.parseNode(n,a);u!==null&&s.add(u.name,u)}return s}endOfContent(r){return r.size()%16===0?(r.getOffset()+160+16&-16)>=r.size():r.getOffset()+160+16>=r.size()}parseNode(r,n){const a={},s=n>=7500?r.getUint64():r.getUint32(),u=n>=7500?r.getUint64():r.getUint32();n>=7500?r.getUint64():r.getUint32();const c=r.getUint8(),d=r.getString(c);if(s===0)return null;const v=[];for(let A=0;A<u;A++)v.push(this.parseProperty(r));const w=v.length>0?v[0]:"",y=v.length>1?v[1]:"",g=v.length>2?v[2]:"";for(a.singleProperty=u===1&&r.getOffset()===s;s>r.getOffset();){const A=this.parseNode(r,n);A!==null&&this.parseSubNode(d,a,A)}return a.propertyList=v,typeof w=="number"&&(a.id=w),y!==""&&(a.attrName=y),g!==""&&(a.attrType=g),d!==""&&(a.name=d),a}parseSubNode(r,n,a){if(a.singleProperty===!0){const s=a.propertyList[0];Array.isArray(s)?(n[a.name]=a,a.a=s):n[a.name]=s}else if(r==="Connections"&&a.name==="C"){const s=[];a.propertyList.forEach(function(u,c){c!==0&&s.push(u)}),n.connections===void 0&&(n.connections=[]),n.connections.push(s)}else if(a.name==="Properties70")Object.keys(a).forEach(function(u){n[u]=a[u]});else if(r==="Properties70"&&a.name==="P"){let s=a.propertyList[0],u=a.propertyList[1];const c=a.propertyList[2],d=a.propertyList[3];let v;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),u.indexOf("Lcl ")===0&&(u=u.replace("Lcl ","Lcl_")),u==="Color"||u==="ColorRGB"||u==="Vector"||u==="Vector3D"||u.indexOf("Lcl_")===0?v=[a.propertyList[4],a.propertyList[5],a.propertyList[6]]:v=a.propertyList[4],n[s]={type:u,type2:c,flag:d,value:v}}else n[a.name]===void 0?typeof a.id=="number"?(n[a.name]={},n[a.name][a.id]=a):n[a.name]=a:a.name==="PoseNode"?(Array.isArray(n[a.name])||(n[a.name]=[n[a.name]]),n[a.name].push(a)):n[a.name][a.id]===void 0&&(n[a.name][a.id]=a)}parseProperty(r){const n=r.getString(1);let a;switch(n){case"C":return r.getBoolean();case"D":return r.getFloat64();case"F":return r.getFloat32();case"I":return r.getInt32();case"L":return r.getInt64();case"R":return a=r.getUint32(),r.getArrayBuffer(a);case"S":return a=r.getUint32(),r.getString(a);case"Y":return r.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const s=r.getUint32(),u=r.getUint32(),c=r.getUint32();if(u===0)switch(n){case"b":case"c":return r.getBooleanArray(s);case"d":return r.getFloat64Array(s);case"f":return r.getFloat32Array(s);case"i":return r.getInt32Array(s);case"l":return r.getInt64Array(s)}const d=mm(new Uint8Array(r.getArrayBuffer(c))),v=new Xu(d.buffer);switch(n){case"b":case"c":return v.getBooleanArray(s);case"d":return v.getFloat64Array(s);case"f":return v.getFloat32Array(s);case"i":return v.getInt32Array(s);case"l":return v.getInt64Array(s)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class Xu{constructor(r,n){this.dv=new DataView(r),this.offset=0,this.littleEndian=n!==void 0?n:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(r){this.offset+=r}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(r){const n=[];for(let a=0;a<r;a++)n.push(this.getBoolean());return n}getUint8(){const r=this.dv.getUint8(this.offset);return this.offset+=1,r}getInt16(){const r=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,r}getInt32(){const r=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,r}getInt32Array(r){const n=[];for(let a=0;a<r;a++)n.push(this.getInt32());return n}getUint32(){const r=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,r}getInt64(){let r,n;return this.littleEndian?(r=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),r=this.getUint32()),n&2147483648?(n=~n&4294967295,r=~r&4294967295,r===4294967295&&(n=n+1&4294967295),r=r+1&4294967295,-(n*4294967296+r)):n*4294967296+r}getInt64Array(r){const n=[];for(let a=0;a<r;a++)n.push(this.getInt64());return n}getUint64(){let r,n;return this.littleEndian?(r=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),r=this.getUint32()),n*4294967296+r}getFloat32(){const r=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,r}getFloat32Array(r){const n=[];for(let a=0;a<r;a++)n.push(this.getFloat32());return n}getFloat64(){const r=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,r}getFloat64Array(r){const n=[];for(let a=0;a<r;a++)n.push(this.getFloat64());return n}getArrayBuffer(r){const n=this.dv.buffer.slice(this.offset,this.offset+r);return this.offset+=r,n}getString(r){const n=this.offset;let a=new Uint8Array(this.dv.buffer,n,r);this.skip(r);const s=a.indexOf(0);return s>=0&&(a=new Uint8Array(this.dv.buffer,n,s)),this._textDecoder.decode(a)}}class fl{add(r,n){this[r]=n}}function Dm(l){const r="Kaydara FBX Binary  \0";return l.byteLength>=r.length&&r===pl(l,0,r.length)}function Om(l){const r=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function a(s){const u=l[s-1];return l=l.slice(n+s),n++,u}for(let s=0;s<r.length;++s)if(a(1)===r[s])return!1;return!0}function Vu(l){const r=/FBXVersion: (\d+)/,n=l.match(r);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Um(l){return l/46186158e3}const Bm=[];function ei(l,r,n,a){let s;switch(a.mappingType){case"ByPolygonVertex":s=l;break;case"ByPolygon":s=r;break;case"ByVertice":s=n;break;case"AllSame":s=a.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+a.mappingType)}a.referenceType==="IndexToDirect"&&(s=a.indices[s]);const u=s*a.dataSize,c=u+a.dataSize;return km(Bm,a.buffer,u,c)}const zs=new Gt,Tn=new De;function cl(l){const r=new ge,n=new ge,a=new ge,s=new ge,u=new ge,c=new ge,d=new ge,v=new ge,w=new ge,y=new ge,g=new ge,A=new ge,C=l.inheritType?l.inheritType:0;if(l.translation&&r.setPosition(Tn.fromArray(l.translation)),l.preRotation){const xe=l.preRotation.map(dt.degToRad);xe.push(l.eulerOrder||Gt.DEFAULT_ORDER),n.makeRotationFromEuler(zs.fromArray(xe))}if(l.rotation){const xe=l.rotation.map(dt.degToRad);xe.push(l.eulerOrder||Gt.DEFAULT_ORDER),a.makeRotationFromEuler(zs.fromArray(xe))}if(l.postRotation){const xe=l.postRotation.map(dt.degToRad);xe.push(l.eulerOrder||Gt.DEFAULT_ORDER),s.makeRotationFromEuler(zs.fromArray(xe)),s.invert()}l.scale&&u.scale(Tn.fromArray(l.scale)),l.scalingOffset&&d.setPosition(Tn.fromArray(l.scalingOffset)),l.scalingPivot&&c.setPosition(Tn.fromArray(l.scalingPivot)),l.rotationOffset&&v.setPosition(Tn.fromArray(l.rotationOffset)),l.rotationPivot&&w.setPosition(Tn.fromArray(l.rotationPivot)),l.parentMatrixWorld&&(g.copy(l.parentMatrix),y.copy(l.parentMatrixWorld));const R=n.clone().multiply(a).multiply(s),M=new ge;M.extractRotation(y);const L=new ge;L.copyPosition(y);const U=L.clone().invert().multiply(y),H=M.clone().invert().multiply(U),W=u,j=new ge;if(C===0)j.copy(M).multiply(R).multiply(H).multiply(W);else if(C===1)j.copy(M).multiply(H).multiply(R).multiply(W);else{const Xt=new ge().scale(new De().setFromMatrixScale(g)).clone().invert(),Et=H.clone().multiply(Xt);j.copy(M).multiply(R).multiply(Et).multiply(W)}const ae=w.clone().invert(),G=c.clone().invert();let ee=r.clone().multiply(v).multiply(w).multiply(n).multiply(a).multiply(s).multiply(ae).multiply(d).multiply(c).multiply(u).multiply(G);const fe=new ge().copyPosition(ee),je=y.clone().multiply(fe);return A.copyPosition(je),ee=A.clone().multiply(j),ee.premultiply(y.invert()),ee}function hl(l){l=l||0;const r=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return l===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),r[0]):r[l]}function Gs(l){return l.split(",").map(function(n){return parseFloat(n)})}function pl(l,r,n){return r===void 0&&(r=0),n===void 0&&(n=l.byteLength),new TextDecoder().decode(new Uint8Array(l,r,n))}function Wm(l,r){for(let n=0,a=l.length,s=r.length;n<s;n++,a++)l[a]=r[n]}function km(l,r,n,a){for(let s=n,u=0;s<a;s++,u++)l[u]=r[s];return l}function Ku(l,r,n){return l.slice(0,r).concat(n).concat(l.slice(r))}const zm={class:"index_page"},Gm={class:"list"},Hm=["onClick"],Km=Iv({__name:"index",setup(l){const r=Sv(null);let n=null;const a=R=>{n==null||n.ChangeModel(R)},s={firefly:.002},u=1500,c=new Ht.Tween(s).easing(Ht.Easing.Exponential.In),d=new Ht.Tween(s).easing(Ht.Easing.Exponential.In),v=new Bs({longestDistance:u,particleSum:500,renderUpdate:R=>{R.rotation.x-=s.firefly},callback:R=>{R.position.z=-1*u},onChangeModel:()=>{c.stop(),d.stop().to({firefly:.04},1500).chain(c),c.to({firefly:.002},1500),d.start()}}),w=new Bs({longestDistance:u,particleSum:500,renderUpdate:R=>{R.rotation.y+=s.firefly},callback:R=>{R.position.y=-.2*u,R.position.z=-1*u}}),y=new Bs({longestDistance:u,particleSum:500,renderUpdate:R=>{R.rotation.z+=s.firefly/2},callback:R=>{R.position.z=-1.2*u}}),g=600;let A=0;const C=[{name:"cube",path:new URL("/web/assets/cube-a177850e.fbx",self.location).href,onLoadComplete(R){R.scale(400,400,400)},loader:{loaderInstance:new Em,load(R){const M=new Je;console.log(R);let L=new Float32Array([]);for(const U of R.children)L=new Float32Array([...L,...U.geometry.attributes.position.array]);return M.setAttribute("position",new ye(tl(L),3)),M}}},{name:"ball",path:new URL("/web/assets/ball-f680aeec.obj",self.location).href,onLoadComplete(R){R.scale(g,g,g),R.translate(-600,0,-100)},onEnterStart(R){console.log("ball enter start")},onEnterEnd(R){console.log("ball enter end")}},{name:"wave",geometry:sm(),onAnimationFrameUpdate(R,M,L){const U=R.geometry.getAttribute("position");return M.forEach((H,W)=>{H.isPlaying===!1&&U.setY(W,Math.sin((W+1+A)*.3)*50+Math.sin((W+A)*.5)*50-500)}),A+=.08,!0}},{name:"cone",path:new URL("/web/assets/cone-6a8c2bce.obj",self.location).href,onLoadComplete(R){R.scale(g,g,g),R.translate(600,100,-100)}}];return window.changeModel=R=>{n!=null&&n.ChangeModel(R)},Cv(()=>{console.log(r),n==null&&r.value!=null&&(n=new nm({CanvasWrapper:r.value,Models:C,addons:[v,w,y],onModelsFinishedLoad:R=>{n==null||n.ListenMouseMove()}}))}),(R,M)=>(Uu(),Ou("div",zm,[Ms("div",{class:"canvas_wrapper",ref_key:"wrapper",ref:r},null,512),Ms("ul",Gm,[(Uu(),Ou(bv,null,Ev(C,L=>Ms("li",{key:L.name,onClick:U=>a(L.name)},Rv(L.name),9,Hm)),64))])]))}});export{Km as default};
